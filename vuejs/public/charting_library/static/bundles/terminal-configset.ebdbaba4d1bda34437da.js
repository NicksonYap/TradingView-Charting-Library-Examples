(window.webpackJsonp=window.webpackJsonp||[]).push([["terminal-configset"],{"5bCf":function(t,e,n){t.exports={container:"container-2MDVNuHv",active:"active-2lnjQ_YF",title:"title-2bqB2fd8",inactive:"inactive-1fcEXv__",titleText:"titleText-qKRHsnHz",indicator:"indicator-mWXMWRtP",disconnected:"disconnected-2k_ljy9z",failed:"failed-3MrYQ2Ho",connecting:"connecting-ny9eVv2c",connected:"connected-2I5niJBg",loginTooltip:"loginTooltip-2A7vTLTC"}},Bf1h:function(t,e,n){"use strict";function i(){var t={paper_trading:{ctor:s,customTitleComponent:f}};return Object(k.merge)(Object(k.clone)(r),t)}var r,o,a,c,s,l,d,u,_,p,g,h,w,v,b,m,C,T,S,f,k;n.r(e),n("YFKU"),r={paper_trading:{name:"paper_trading",title:window.t("Trading Panel"),buttonOpenTooltip:window.t("Open Trading Panel"),buttonCloseTooltip:window.t("Close Trading Panel"),ctor:null,_gaEvent:"Trading Panel"},scripteditor:{name:"scripteditor",title:window.t("Pine Editor"),buttonOpenTooltip:window.t("Open Pine Script Editor"),buttonCloseTooltip:window.t("Close Pine Script Editor"),ctor:null,_gaEvent:"Pine Editor"},backtesting:{name:"backtesting",title:window.t("Strategy Tester"),buttonOpenTooltip:window.t("Open Strategy Tester"),buttonCloseTooltip:window.t("Close Strategy Tester"),ctor:null,_gaEvent:"Strategy Tester"},screener:{name:"screener",title:window.t("Screener"),buttonOpenTooltip:window.t("Open Screener"),buttonCloseTooltip:window.t("Close Screener"),ctor:null,_gaEvent:"Screener"},text_notes:{name:"text_notes",title:window.t("Text Notes"),buttonOpenTooltip:window.t("Open Text Notes Panel"),buttonCloseTooltip:window.t("Close Text Notes Panel"),ctor:null,_gaEvent:"Text Notes"}},o=n("N22A"),a=n("hY0g"),c=n.n(a),s=function(){function t(t){var e=this;this._contentRenderer=Promise.resolve(),this._spinnerContainer=document.createElement("div"),this._renderer=Promise.resolve(),this._filter=new c.a(!0),this._bridge=t,Object(o.waitTradingService)().then(function(t){e._trading=t,e.onStatusChange(t.connectStatus()),e._trading.onConnectionStatusChange.subscribe(e,e.onStatusChange)}),Promise.all([n.e("react"),n.e("spinner-renderer")]).then(n.bind(null,"lG9f")).then(function(t){t.render(e._spinnerContainer)})}return t.prototype.activate=function(){var t=this;this._contentRenderer.then(function(){t._content&&t._content.drawAttention&&t._content.drawAttention()})},t.prototype.onStatusChange=function(t){this._contentRenderer=Promise.resolve(),this._content&&this._content.remove(),2===t&&(this._content=this._bridge.container.appendChild(this._spinnerContainer)),3!==t&&4!==t||this._renderBrokerSelectScreen();var e=this._trading.activeBroker();1===t&&this._renderAccountManager(e),null!==e&&3===t&&this._trading.showBrokerLoginDialog()},t.prototype._renderAccountManager=function(t){var e=this;this._renderer=this._contentRenderer=Promise.all([n.e(23),n.e(66),n.e(93),n.e(28),n.e(61),n.e("trading-account-manager")]).then(n.t.bind(null,"l6K7",7)).then(function(n){e._contentRenderer===e._renderer&&(e._content&&e._content.remove(),e._content=new n.AccountManager(t,e._bridge))})},
t.prototype._renderBrokerSelectScreen=function(){var t=this;this._renderer=this._contentRenderer=Promise.all([n.e("react"),n.e(96),n.e("broker-select-screen")]).then(n.bind(null,"Azu3")).then(function(e){t._content&&t._content.remove(),t._contentRenderer===t._renderer&&(t._content=new e.BrokerSelectScreenRenderer(t._bridge.container,t._trading,t._filter))})},t}(),l=n("mrSG"),d=n("q1tI"),u=n("TSYQ"),_=n("Kxc7"),p=n.n(_),g=n("b5Gw"),h=n("4qhP"),w=n("5bCf"),m=window.t("Trading Panel"),C=window.t("Account Manager"),(v={})[4]="failed",v[2]="connecting",v[1]="connected",v[3]="disconnected",T=v,(b={})[4]=window.t("Failed"),b[2]=window.t("Connecting"),b[1]=window.t("Connected"),b[3]=window.t("Disconnected"),S=b,f=function(t){function e(e){var n=t.call(this,e)||this;return n._trading=null,n._tradingServiceCancelable=null,n._titleClick=function(){var t=n.props.onClick;t&&t()},n.state={status:3,hasActiveBroker:!1,title:p.a.enabled("trading_terminal")?C:m},n}return Object(l.__extends)(e,t),e.prototype.componentDidMount=function(){if(!p.a.enabled("trading_terminal")){var t=Object(o.tradingService)();null===t?(this._tradingServiceCancelable=Object(g.makeCancelable)(Object(o.waitTradingService)()),this._tradingServiceCancelable.promise.then(this._onTradingService.bind(this))):this._onTradingService(t)}},e.prototype.componentWillUnmount=function(){p.a.enabled("trading_terminal")||(this._cancelWaitingTrading(),null!==this._trading&&(this._trading.onBrokerChange.unsubscribe(this,this._update),this._trading.onConnectionStatusChange.unsubscribe(this,this._update)))},e.prototype.render=function(){var t,e=this.state,n=e.status,i=e.hasActiveBroker,r=e.title;return d.createElement("div",{className:u(h.bottomTradingTabClassName,w.container,w[T[n]],(t={},t[w.active]=this.props.isActive,t[w.inactive]=!i,t)),onClick:this._titleClick,"data-name":this.props.dataName,"data-active":this.props.isActive},d.createElement("span",{className:w.title},d.createElement("span",{className:w.titleText},r)),d.createElement("div",{className:u(w.indicator,"apply-common-tooltip"),title:S[n]}))},e.prototype._onTradingService=function(t){this._cancelWaitingTrading(),this._trading=t,t.onBrokerChange.subscribe(this,this._update),t.onConnectionStatusChange.subscribe(this,this._update),this._update()},e.prototype._update=function(){var t=this._trading,e=t&&t.activeBroker(),n=t?t.connectStatus():3;window.is_authenticated&&!p.a.enabled("trading_terminal")&&t&&e&&1===n?this.setState({status:n,hasActiveBroker:!0,title:e.accountManagerInfo().accountTitle}):this.setState({status:n,hasActiveBroker:!1,title:m})},e.prototype._cancelWaitingTrading=function(){null!==this._tradingServiceCancelable&&(this._tradingServiceCancelable.cancel(),this._tradingServiceCancelable=null)},e}(d.PureComponent),k=n("ogJP"),n.d(e,"getTerminalConfigSet",function(){return i})}}]);
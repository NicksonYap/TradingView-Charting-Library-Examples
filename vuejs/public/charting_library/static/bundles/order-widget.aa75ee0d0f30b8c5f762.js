(window.webpackJsonp=window.webpackJsonp||[]).push([["order-widget"],{"0oEL":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23" width="23" height="23"><path fill="none" stroke="currentColor" stroke-width="2" d="M17.09 6.5A7.5 7.5 0 1 0 11.5 19a7.481 7.481 0 0 0 5.59-2.5"/></svg>'},"3nsW":function(e,t,n){e.exports={priceLabel:"priceLabel-3jS0eXPb",ask:"ask-3tWHb9Qr",bid:"bid-2R0XOtR5",last:"last-2kdG2nOc"}},"4UeV":function(e,t,n){e.exports={calculator:"calculator-1pWGeRIv",buttonIcon:"buttonIcon-2pEiPLOW"}},"5o6O":function(e,t,n){e.exports={tabs:"tabs-1LGqoVz6",tab:"tab-1Yr0rq0J",noBorder:"noBorder-oc3HwerO",disabled:"disabled-s8cEYElA",active:"active-37sipdzm",defaultCursor:"defaultCursor-Np9BHjTg",slider:"slider-1-X4lOmE",content:"content-2asssfGq"}},"6a6n":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 132 76" width="132" height="76" fill="none"><mask fill="#fff" id="a"><path fill-rule="evenodd" clip-rule="evenodd" d="M114 76H24C10.745 76 0 65.255 0 52s10.745-24 24-24l.247.002C26.215 12.214 39.681 0 56 0c14.582 0 26.886 9.753 30.744 23.093A21.896 21.896 0 0 1 98 20c11.821 0 21.464 9.323 21.979 21.017C126.981 43.48 132 50.155 132 58c0 9.265-7 16.895-16 17.89V76h-2z"/></mask><path fill="currentColor" d="M24 28l.012-2H24v2zm.247.002l-.012 2 1.777.01.22-1.763-1.985-.247zm62.497-4.909l-1.921.556.72 2.49 2.226-1.328-1.025-1.718zm33.235 17.924l-1.999.087.06 1.35 1.274.45.665-1.887zM116 75.89l-.22-1.988-1.78.197v1.791h2zm0 .11v2h2v-2h-2zm-2-2H24v4h90v-4zm-90 0C11.85 74 2 64.15 2 52h-4c0 14.36 11.64 26 26 26v-4zM2 52c0-12.15 9.85-22 22-22v-4C9.64 26-2 37.64-2 52h4zm21.988-22l.247.001.024-4-.247-.001-.024 4zm2.244-1.751C28.077 13.45 40.702 2 56 2v-4C38.66-2 24.354 10.98 22.263 27.754l3.969.495zM56 2c13.668 0 25.206 9.142 28.823 21.649l3.842-1.111C84.567 8.365 71.497-2 56-2v4zm31.769 22.81A19.896 19.896 0 0 1 98 22v-4a23.896 23.896 0 0 0-12.28 3.376l2.049 3.435zM98 22c10.745 0 19.513 8.475 19.98 19.105l3.997-.176C121.415 28.17 110.896 18 98 18v4zm21.314 20.903C125.541 45.095 130 51.03 130 58h4c0-8.72-5.58-16.132-13.357-18.87l-1.329 3.773zM130 58c0 8.234-6.222 15.018-14.22 15.902l.44 3.976C126.222 76.772 134 68.296 134 58h-4zm-16 17.89V76h4v-.11h-4zm2-1.89h-2v4h2v-4z" mask="url(#a)"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M40 33l8 8M48 33l-8 8M64 33l8 8M72 33l-8 8M46 58h20"/></svg>'},"9E2J":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23" width="23" height="23"><path fill="currentColor" stroke="none" d="M2 10h18v2H2z"/></svg>'},EVs3:function(e,t,n){e.exports={controlGroup:"controlGroup-3MCLpRRP",title:"title-365S0Izg",controlContainer:"controlContainer-3DnBop47",control:"control-1SRwj2tN",input:"input-bK62wa20",relativePriceControl:"relativePriceControl-3Ox4_bWI",absolutePriceControl:"absolutePriceControl-3oXHJ40Q",singlePriceControl:"singlePriceControl-1Ao64chO",highlightedInactive:"highlightedInactive-2CCacdNp",wait:"wait-fWyqvk-K"}},Gg3R:function(e,t,n){e.exports={
absolutePriceDropdownItem:"absolutePriceDropdownItem-3AJk0DlG",price:"price-2DRmXbiJ",labelsGroup:"labelsGroup-1vMW9cm7"}},H3n3:function(e,t,n){e.exports={dialog:"dialog-1Xlkjw62",dialogBody:"dialogBody-OvSZI6fI"}},IkHa:function(e,t,n){"use strict";function r(e){var t,n,r,o=Object(N.useRef)(null),s=Object(Y.a)();return Object(N.useEffect)(function(){var t=function(){return s()};return Object(G.ensureNotNull)(o.current).focus(),e.loading.subscribe(t),e.model.textQuotesOutputs().subscribe(t),function(){e.loading.unsubscribe(t),e.model.textQuotesOutputs().unsubscribe(t)}}),t=T.a.createElement(K.a,{textOutputs:e.model.textQuotesOutputs().value()}),n=T.a.createElement(K.a,{textOutputs:e.model.textInfoOutputs()}),r=T.a.createElement(K.a,{textOutputs:e.model.textOrderOutputs()}),T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:Q.content},t,T.a.createElement("div",{className:Q.separator}),r,T.a.createElement("div",{className:Q.separator}),n,e.model.warning&&T.a.createElement("div",{className:Q.warning},e.model.warning)),T.a.createElement("div",{className:Q.controls},T.a.createElement("div",{className:Q.button},T.a.createElement(q.Button,{useFullWidth:!0,size:"l",intent:"default",appearance:"stroke",onClick:e.model.onCancelClick},J.cancel)),T.a.createElement("div",{className:Q.button},T.a.createElement(q.Button,{useFullWidth:!0,size:"l",intent:-1===e.side?"danger":"primary",onClick:e.model.onPlaceClick,reference:o,disabled:e.loading.value()},J.sendOrder))))}function o(e){return N.createElement("div",null,e.children)}function s(e){var t=N.createElement(ae.a,{className:me.buttonIcon,icon:pe}),n=N.createElement(ae.a,{className:me.buttonIcon,icon:le}),r=N.createElement(ae.a,{className:me.buttonIcon,icon:ue}),o=N.createElement(ae.a,{className:me.buttonIcon,icon:de});return N.createElement("div",{className:me.calculator,tabIndex:-1,ref:e.reference,onFocus:e.onFocus},N.createElement(ce.a,{value:-e.step,type:ce.b.IncDec,icon:t,onClick:e.onClick}),N.createElement(ce.a,{value:e.step,type:ce.b.IncDec,icon:n,onClick:e.onClick}),N.createElement(ce.a,{value:1,type:ce.b.PlusValue,onClick:e.onClick}),N.createElement(ce.a,{value:5,type:ce.b.PlusValue,onClick:e.onClick}),N.createElement(ce.a,{value:25,type:ce.b.PlusValue,onClick:e.onClick}),N.createElement(ce.a,{value:100,type:ce.b.PlusValue,onClick:e.onClick}),N.createElement(ce.a,{value:500,type:ce.b.PlusValue,onClick:e.onClick}),N.createElement(ce.a,{value:1e3,type:ce.b.PlusValue,onClick:e.onClick}),N.createElement(ce.a,{value:0,type:ce.b.Clear,icon:r,onClick:e.onClick}),N.createElement(ce.a,{value:e.min||e.step,type:ce.b.Default,icon:o,onClick:e.onClick}))}function i(e){var t=x(Te.priceLabel,Te[e.modifier.toLowerCase()]);return N.createElement("span",{className:x(t)},e.modifier)}function a(e){var t,n,r=e.price===e.ask,o=e.price===e.bid,s=e.price===e.last,a=(r||o)&&e.ask===e.bid;return e.displayPriceLabel&&(a&&1===e.side?t=N.createElement(i,{modifier:"Ask"}):a&&-1===e.side?t=N.createElement(i,{modifier:"Bid"}):r?t=N.createElement(i,{modifier:"Ask"
}):o&&(t=N.createElement(i,{modifier:"Bid"})),n=N.createElement("div",{className:De.labelsGroup},t,s&&N.createElement(i,{modifier:"Last"}))),N.createElement("div",{className:De.absolutePriceDropdownItem},N.createElement("div",{className:De.price},e.price),n)}function c(e){return N.createElement("div",{className:ze.relativePriceDropdownItem},N.createElement("div",{className:ze.price},e.price))}function l(e,t){return e.findIndex(function(e){return e.displayValue===t})}function p(e){return qe.test(e)}function u(e){return"ask"===e?Ae:"bid"===e?Le:Ue}function d(e){return void 0!==e&&e>0?" + "+Math.abs(e):void 0!==e&&e<0?" - "+Math.abs(e):""}function m(e,t){return u(e)+d(Math.round(t||0))}function h(e){return void 0!==e?String(e):"0"}function f(e,t){var n,r,o,s,i=e.offset;return n=e.base,r=function(e,t){return(Math.abs(e)>=1?e:0)+(1===t?1:-1)}(i,t),o=u(n),s=d(r),{displayValue:o+s,base:n,offset:r}}function v(e,t){var n,r=[],o=[],s={displayValue:u(e.base)+d(e.offset),base:e.base,offset:e.offset};for(n=0;n<t;n++)r.unshift(f(0===n?s:r[0],1)),o.push(f(0===n?s:o[n-1],-1));return Object(S.__spreadArrays)(r,[s],o)}function _(){return"phone"!==Ve.device&&"phone-vertical"!==Ve.device?Ke:Ye}function b(e,t,n){return e.status!==j.g.Wait&&e.focusedControl===n&&t.showRelativePriceControl}function g(e){return N.createElement(Ce.a.Consumer,null,function(t){return N.createElement("div",{className:et.controlGroup},N.createElement("div",{className:et.title},e.groupTitle),N.createElement($e.a,{className:et.controlContainer},N.createElement(Re,{className:x(et.control,et.absolutePriceControl,!t.value.showRelativePriceControl&&et.singlePriceControl),priceType:e.priceType,inputClassName:function(e,t){return x(et.input,e.status===j.g.Wait&&et.wait,b(e,t.value,0)&&et.highlightedInactive)}(e,t),status:e.status,highlighted:b(e,t.value,0),displayPrice:e.absolutePrice,step:e.step,ask:e.ask,bid:e.bid,last:e.last,side:e.side,priceFormatter:e.priceFormatter,warning:e.status!==j.g.Wait&&e.error.res&&"warning"===e.error.severity,error:e.error.res&&"error"===e.error.severity,errorMessage:e.errorMessage,errorHandler:e.errorHandler,onControlFocused:e.onControlFocused,onPriceSelected:e.onAbsolutePriceSelected,displayPriceLabel:!e.isRelativePriceControlHidden,trackEvent:e.trackEvent,focus:e.focus}),t.value.showRelativePriceControl&&!e.isRelativePriceControlHidden&&N.createElement(Ze,{className:x(et.control,et.relativePriceControl),inputClassName:function(e,t){return x(et.input,e.status===j.g.Wait&&et.wait,b(e,t.value,1)&&et.highlightedInactive)}(e,t),status:e.status,highlighted:b(e,t.value,1),initialValue:e.relativePrice,onControlFocused:e.onControlFocused,onPriceSelected:e.onRelativePriceSelected,trackEvent:e.trackEvent})))})}function y(e){var t=e.hasMarginMeter?N.createElement(St,{usedMargin:e.usedMargin,availableMargin:e.availableMargin,progress:e.marginRatio,wait:e.status===j.g.Wait}):void 0;return N.createElement("div",{className:Nt.orderInfo},N.createElement("div",{className:Nt.title},e.title),N.createElement("div",{className:Nt.contentWrapper
},t,N.createElement(K.a,{textOutputs:e.textOutputs,disabled:e.status===j.g.Wait,rightAlignedValues:!0})))}function E(e){return new Promise(function(t){Promise.all([n.e(23),n.e(84),n.e(28),n.e("signin-dialog")]).then(function(r){var o=n("YTu0");t(o.showSignModal(e)),o.isSignModalOpen}.bind(null,n)).catch(void 0)})}function w(e){return N.createElement("div",{className:Dt.messageBlock},N.createElement("div",{className:Dt.image,dangerouslySetInnerHTML:{__html:e.image}}),N.createElement("div",{className:Dt.title},e.title),N.createElement("div",{className:Dt.text,dangerouslySetInnerHTML:{__html:e.text||""}}),e.controls&&N.createElement("div",{className:Dt.controls},e.controls))}function C(e,t,n,r){k();var o={model:e,settings:t,isOpened:!0,onClose:function(){k(),e.onDoneButtonClicked.reject(),o.model.headerModel&&(o.model.headerModel.pinButtonClicked().unsubscribe(null,o.onClose),o.model.headerModel.closeButtonClicked().unsubscribe(null,o.onClose)),Qt&&D.unmountComponentAtNode(Qt)},trackEvent:r,focus:n};O(o),o.model.headerModel&&(o.model.headerModel.pinButtonClicked().subscribe(null,o.onClose),o.model.headerModel.closeButtonClicked().subscribe(null,o.onClose))}function k(){O({model:null,isOpened:!1})}function O(e){null===Qt&&(Qt=document.createElement("div"),document.body.appendChild(Qt));var t=N.createElement(j.e.Provider,{value:{mode:e.model&&e.model.mode.value()||j.f.Panel,supportTrailingStop:Boolean(e.model&&e.model.supportTrailingStop)}},N.createElement(Gt,Object(S.__assign)({},e)));D.render(t,Qt)}function P(e,t,n,r,o,s){M(n);var i={model:e,settings:t,onClose:function(){M(n),i.model.headerModel&&(i.model.headerModel.pinButtonClicked().unsubscribe(null,i.onClose),i.model.headerModel.closeButtonClicked().unsubscribe(null,i.onClose))},onCancel:function(){i.model.headerModel&&i.model.headerModel.cancel()},trackEvent:s,focus:o};i.model.headerModel&&(i.model.headerModel.pinButtonClicked().subscribe(null,i.onClose),i.model.headerModel.closeButtonClicked().subscribe(null,i.onClose)),function(e,t,n){var r=N.createElement(j.e.Provider,{value:{resizerWidth:n||null,mode:e.model.mode.value(),supportTrailingStop:Boolean(e.model.supportTrailingStop)}},N.createElement(Lt,Object(S.__assign)({},e)));D.render(r,t)}(i,n,r)}function M(e){D.unmountComponentAtNode(e)}var S,N,T,D,x,I,B,F,W,H,j,R,z,V,A,L,U,q,K,Y,G,Q,J,X,Z,$,ee,te,ne,re,oe,se,ie,ae,ce,le,pe,ue,de,me,he,fe,ve,_e,be,ge,ye,Ee,we,Ce,ke,Oe,Pe,Me,Se,Ne,Te,De,xe,Ie,Be,Fe,We,He,je,Re,ze,Ve,Ae,Le,Ue,qe,Ke,Ye,Ge,Qe,Je,Xe,Ze,$e,et,tt,nt,rt,ot,st,it,at,ct,lt,pt,ut,dt,mt,ht,ft,vt,_t,bt,gt,yt,Et,wt,Ct,kt,Ot,Pt,Mt,St,Nt,Tt,Dt,xt,It,Bt,Ft,Wt,Ht,jt,Rt,zt,Vt,At,Lt,Ut,qt,Kt,Yt,Gt,Qt;n.r(t),S=n("mrSG"),N=n("q1tI"),T=n.n(N),D=n("i8i4"),n("YFKU"),x=n("TSYQ"),I=n("Vdly"),B=n("8wgr"),F=n("uOxu"),W=n("qFKp"),H=n("oykh"),j=n("en3B"),R=n("pKbH"),z=window.t("Sell"),V=window.t("Buy"),A=window.t("No Data"),L=function(e){function t(t){var n=e.call(this,t)||this;return n._isLongValue=!1,n._maxDigitsNumber=7,n._createClickHandler=function(e){return function(){return n.props.onSideChanged(e)}},
n._isLongValue=Boolean(n.props.quotes.spread&&n.props.quotes.spread.toString().length>n._maxDigitsNumber||n.props.quotes.ask&&n.props.quotes.ask.toString().length>n._maxDigitsNumber),n}return Object(S.__extends)(t,e),t.prototype.render=function(){var e=x(R.sideControl,[j.g.Editing,j.g.Preview].includes(this.props.status)&&R.disable,this.props.status===j.g.Wait&&R.wait),t=x(R.section,R.sell,this.props.status!==j.g.Wait&&-1===this.props.side&&R.active),n=x(R.section,R.buy,this.props.status!==j.g.Wait&&1===this.props.side&&R.active),r=this.props.quotes.bid?N.createElement("div",null,this.props.quotes.bid):N.createElement("div",{className:R.valueNoData},A),o=this.props.quotes.ask?N.createElement("div",null,this.props.quotes.ask):N.createElement("div",{className:R.valueNoData},A);return N.createElement("div",{className:e},N.createElement("div",{className:t,onClick:this._createClickHandler(-1),tabIndex:-1},N.createElement("div",{className:R.title},z),N.createElement("div",{className:R.value},r)),N.createElement("div",{className:n,onClick:this._createClickHandler(1),tabIndex:-1},N.createElement("div",{className:R.title},V),N.createElement("div",{className:R.value},o)),this.props.quotes.spread&&N.createElement("div",{className:x(R.spread,this._isLongValue&&R.isLongValue)},this.props.quotes.spread))},t}(N.PureComponent),U=function(e){function t(t){var n=e.call(this,t)||this;return n._onSideChanged=function(e){n.props.disabled||(n.props.model.side.setValue(e),n.props.model.onControlFocused.fire())},n._callback=function(){return n.forceUpdate()},n._statusCallback=function(e){e!==j.g.Preview&&n.forceUpdate()},n}return Object(S.__extends)(t,e),t.prototype.componentDidMount=function(){this._subscribeToModel(this.props.model)},t.prototype.componentWillUnmount=function(){this._unsubscribeFromModel(this.props.model)},t.prototype.render=function(){var e=this.props.model;return N.createElement(L,{quotes:e.quotes.value(),side:e.side.value(),status:e.status.value(),onSideChanged:this._onSideChanged})},t.prototype._subscribeToModel=function(e){e.quotes.subscribe(this._callback),e.side.subscribe(this._callback),e.status.subscribe(this._statusCallback)},t.prototype._unsubscribeFromModel=function(e){e.quotes.unsubscribe(this._callback),e.side.unsubscribe(this._callback),e.status.unsubscribe(this._statusCallback)},t}(N.PureComponent),q=n("vWed"),K=n("/qCs"),Y=n("gla1"),G=n("Eyy1"),Q=n("L2Pi"),J={cancel:window.t("Cancel"),sendOrder:window.t("Send Order")},X=n("K3s3"),Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._createClickHandler=function(e){return function(){t.props.disabled||t.props.onSelect(e)}},t}return Object(S.__extends)(t,e),t.prototype.render=function(){var e=this._generateTabs();return N.createElement("div",null,N.createElement(X.c,null,e),N.createElement("div",null,this.props.children[this.props.activeTab||0]))},t.prototype._generateTabs=function(){var e=this,t=this.props,n=t.activeTab,r=t.disabled;return N.Children.map(this.props.children,function(t,o){var s=void 0!==t.props.id?t.props.id:o
;return N.createElement(X.b,{isActive:n===s,isDisabled:r,shouldUseDefaultCursor:!!e.props.shouldUseDefaultCursor,noBorder:!!e.props.noBorder,onClick:e._createClickHandler(s)},t.props.title)})},t}(N.PureComponent),$=n("TZdo"),ee=window.t("Market"),te=window.t("Limit"),ne=window.t("Stop"),re=window.t("Stop Limit"),oe=function(e){function t(t){var n=e.call(this,t)||this;return n._callback=function(){return n.forceUpdate()},n}return Object(S.__extends)(t,e),t.prototype.componentDidMount=function(){this.context.resizerWidth&&this.context.resizerWidth.subscribe(this._callback)},t.prototype.componentWillUnmount=function(){this.context.resizerWidth&&this.context.resizerWidth.unsubscribe(this._callback)},t.prototype.render=function(){var e,t=[];return this.props.supportMarketOrders&&t.push(N.createElement(o,{key:2,title:ee,id:2})),this.props.supportLimitOrders&&t.push(N.createElement(o,{key:1,title:te,id:1})),this.props.supportStopOrders&&t.push(N.createElement(o,{key:3,title:ne,id:3})),this.props.supportStopLimitOrders&&t.push(N.createElement(o,{key:4,title:re,id:4})),e=x($.tabsContainer,this.context.mode===j.f.Panel&&t.length>3&&$.moreThen3Types),t.length<2?null:N.createElement(N.Fragment,null,N.createElement("div",{className:e,tabIndex:-1},N.createElement(Z,{activeTab:this.props.activeTab,shouldUseDefaultCursor:!0,onSelect:this.props.onSelect,disabled:this.props.disabled,noBorder:!0},t)),N.createElement("div",{className:$.separator}))},t.contextType=j.e,t}(N.PureComponent),se=n("k/ZQ"),ie=n("xx2B"),n("bf9a"),ae=n("jjrI"),ce=n("lZfC"),le=n("R36R"),pe=n("9E2J"),ue=n("0oEL"),de=n("sgDj"),me=n("4UeV"),he=n("9c3F"),fe=n("RgaO"),ve=n("X6/E"),_e=n("nc0P"),be=n("0rc0"),ge=n("V1pJ"),ye={attachment:{horizontal:"right",vertical:"top"},targetAttachment:{horizontal:"right",vertical:"bottom"},attachmentOffsetY:2},Ee=function(e){function t(t){var n=e.call(this,t)||this;return n._control=null,n._input=null,n._calc=null,n._onFocus=function(e){var t=Object(G.ensureNotNull)(n._calc);!Modernizr.mobiletouch&&t.contains(e.target)&&Object(G.ensureNotNull)(n._input).focus()},n._setRef=function(e){n._control=e},n._setCalcRef=function(e){n._calc=e},n._setInputRef=function(e){n._input=e},n._onKeyDown=function(e){!n.state.isOpened||13!==e.keyCode&&27!==e.keyCode||(e.stopPropagation(),n.setState({isOpened:!1})),Object.values(j.c).includes(e.keyCode)||Object.values(j.d).includes(e.keyCode)||n.setState({isOpened:!1}),n.props.onKeyDown&&n.props.onKeyDown(e)},n._onClickOutside=function(e){n._calc&&!n._calc.contains(e.target)&&n.setState({isOpened:!1})},n._updateValue=function(e){n.props.onValueChange(e)},n._calculatorStepHandler=function(e,t){var r,o,s=n.props,i=s.min,a=s.max;if(void 0!==n.props.trackEvent&&n.props.trackEvent("Order Ticket","Calculator Button",Object(be.u)(e,t)),t===ce.b.Clear||t===ce.b.Default)return n._updateValue(e);if(null!==(r=n.props.value)){if(((o=r+e)<i||a<o)&&t!==ce.b.IncDec)return n._updateValue(r);if(t===ce.b.IncDec){if(a<(o=n._calcByStep(r,e)))return n._updateValue(a);if(o<i)return n._updateValue(i)}return n._updateValue(o)}},
n._toggle=function(){n.setState(function(e){return{isOpened:!e.isOpened}})},n.state={isOpened:!1},n}return Object(S.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.min,r=t.step,o=t.error,i=t.errorMessage,a=t.className,c=t.errorHandler,l=N.createElement(ae.a,{icon:ve,className:x(ge.calculatorIcon,this.state.isOpened&&ge.isOpened),onClick:this._toggle});return N.createElement("div",{className:ge.wrapper},N.createElement(fe.a,{click:!0,mouseDown:!0,touchStart:!0,handler:this._onClickOutside},function(t){return N.createElement("span",{ref:t},N.createElement(ie.a,{value:e.props.value||0,alwaysUpdateValueFromProps:e.state.isOpened,formatter:e.props.formatter,className:a,containerReference:e._setRef,inputReference:e._setInputRef,button:l,onValueChange:e._updateValue,onFocus:e.props.onFocus,onBlur:e.props.onBlur,onKeyDown:e._onKeyDown,error:o,errorMessage:i,errorHandler:c,step:r,controlDecKeyCodes:e.state.isOpened?[j.c.Minus,j.c.NumMinus,j.c.FirefoxMinus]:void 0,controlIncKeyCodes:e.state.isOpened?[j.d.Plus,j.d.NumPlus,j.d.FirefoxPlus]:void 0}),N.createElement(he.a,{root:"document",isOpened:e.state.isOpened,target:e._control||void 0,targetAttachment:ye.targetAttachment,attachment:ye.attachment,attachmentOffsetY:ye.attachmentOffsetY,inheritWidthFromTarget:!1,width:150},N.createElement(s,{min:n,step:r,onClick:e._calculatorStepHandler,onFocus:e._onFocus,reference:e._setCalcRef})))}))},t.prototype._calcByStep=function(e,t){var n,r,o,s,i=Math.sign(t);return t=Math.abs(t),n=new _e.Big(e),r=new _e.Big(t),s=(o=n.mod(r)).eq(0)?n.plus(i*t):n.plus(i*t).plus((i>0?0:1)*t).minus(o),Number(s)},t}(N.PureComponent),we=function(e){function t(t){var n=e.call(this,t)||this;return n._defaultMax=9e15,n._onFocus=function(){n.props.onFocus&&n.props.onFocus(n.props.type)},n._onValueChange=function(e){n.props.value.setValue(e)},n._callback=function(){return n.forceUpdate()},n}return Object(S.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.value.subscribe(this._callback)},t.prototype.componentWillUnmount=function(){this.props.value.unsubscribe(this._callback)},t.prototype.render=function(){var e=this.props,t=e.value,n=e.min,r=e.max,o=e.step,s=e.type,i=e.error,a=e.errorMessage,c=e.errorHandler,l=e.label,p=e.formatter,u=e.className,d=e.inputClassName,m=e.status,h=e.trackEvent,f={value:t.value()||0,step:o,className:x(ge.input,m===j.g.Wait&&ge.wait,d),error:i,errorMessage:a,errorHandler:c,onFocus:this._onFocus,formatter:p,onValueChange:this._onValueChange},v=0===s?N.createElement(Ee,Object(S.__assign)({},f,{min:n||o,max:r||this._defaultMax,trackEvent:h})):N.createElement("div",{className:ge.riskControlWrapper},N.createElement(ie.a,Object(S.__assign)({},f,{step:.01})));return N.createElement("div",{className:x(u,ge.control)},v,l&&N.createElement("div",{className:ge.label}," ",l," "))},t}(N.PureComponent),Ce=n("NbG7"),ke=window.t("Risk"),Oe=window.t("Units"),Pe=window.t("Lots"),Me=function(e){function t(t){var n=e.call(this,t)||this;return n._onFocus=function(e){n.props.model.focusedControl.setValue(e),
n.props.model.onControlFocused.fire()},n._errorHandler=function(e){n.props.model.setControlError(e)},n._callback=function(){return n.forceUpdate()},n}return Object(S.__extends)(t,e),t.prototype.componentDidMount=function(){this._subscribeToModel(this.props.model)},t.prototype.componentWillUnmount=function(){this._unsubscribeFromModel(this.props.model)},t.prototype.render=function(){var e=this.context.value,t=this.props,n=t.model,r=t.symbolHasLotSize,o=t.trackEvent,s=n.error.value(),i={errorHandler:this._errorHandler,error:s,status:n.status.value(),onFocus:this._onFocus,trackEvent:o},a=Boolean(s&&s.res),c=s&&s.msg,l=n.isRiskAvailable.value()&&(e.showPercentRiskInQty||e.showCurrencyRiskInQty),p=x(!l&&ge.single,ge.units);return N.createElement(N.Fragment,null,N.createElement(we,Object(S.__assign)({},i,{value:n.quantity,min:n.qty.min,max:n.qty.max,step:n.qty.step,type:0,formatter:n.quantityFormatter,label:r?Pe:Oe,className:p,inputClassName:this._generateClassName(0),error:a&&this._isSelectedControl(0),errorMessage:c})),l&&N.createElement("div",{className:ge.risk},e.showCurrencyRiskInQty&&N.createElement(we,Object(S.__assign)({},i,{value:n.riskInCurrency,step:n.riskStep,type:1,formatter:n.riskInCurrencyFormatter,label:n.currency+" "+ke,error:a&&this._isSelectedControl(1),errorMessage:c,inputClassName:this._generateClassName(1)})),e.showPercentRiskInQty&&N.createElement(we,Object(S.__assign)({},i,{value:n.riskInPercent,step:n.riskStep,type:2,formatter:n.riskInPercentFormatter,label:"% "+ke,error:a&&this._isSelectedControl(2),errorMessage:c,inputClassName:this._generateClassName(2)}))))},t.prototype._generateClassName=function(e){var t=this.props.model.isRiskAvailable.value()&&this._isSelectedControl(e),n=this.props.model.error.value(),r=(0===e?t:this._isSelectedControl(e))&&(this.context.value.showCurrencyRiskInQty||this.context.value.showPercentRiskInQty),o=Boolean(n&&n.res)&&this._isSelectedControl(e);return x(o&&ge.error,r&&ge.highlightedInactive)},t.prototype._isSelectedControl=function(e){return this.props.model.status.value()!==j.g.Wait&&this.props.model.focusedControl.value()===e},t.prototype._subscribeToModel=function(e){e.focusedControl.subscribe(this._callback),e.isRiskAvailable.subscribe(this._callback),e.error.subscribe(this._callback)},t.prototype._unsubscribeFromModel=function(e){e.focusedControl.unsubscribe(this._callback),e.isRiskAvailable.unsubscribe(this._callback),e.error.unsubscribe(this._callback)},t.contextType=Ce.a,t}(N.PureComponent),Se=n("WUqb"),Ne=n("CSQ5"),Te=n("3nsW"),De=n("Gg3R"),xe=n("zcN6"),Ie=n("R4+T"),Be=n("VVyh"),Fe=n("tTUf"),We=Object(Se.b)(xe.a),He=window.t("Absolute",{context:"price"}),je=window.t("Price format is invalid."),Re=function(e){function t(t){var n,r=e.call(this,t)||this;return r._priceControl=null,r._priceInput=null,r._dropdown=null,r._setDropdownRef=function(e){r._dropdown=e},r._setInitialFocus=function(){
!Modernizr.mobiletouch&&!0===r.props.highlighted&&r._priceInput&&(r.props.priceType===j.i.Limit&&1===r.props.focus||r.props.priceType===j.i.Stop&&2===r.props.focus)&&(r._priceInput.setSelectionRange(r.state.displayPrice.length,r.state.displayPrice.length),r._priceInput.focus())},r._onFocus=function(e){if(r.props.onControlFocused&&r.props.onControlFocused(0),r.props.errorHandler){var t=r.state.priceFormatter.parse(r.state.displayPrice);r.props.errorHandler(!t.res)}r.props.onFocus&&r.props.onFocus(e)},r._onBlur=function(e){r.props.onBlur&&r.props.onBlur(e)},r._onOutsideClick=function(e){var t,n;null===r._priceControl||r._priceControl.contains(e.target)||(t=r.state.priceFormatter.parse(r.state.displayPrice),n=r.props.displayPrice,n=t.res?r.state.priceFormatter.format(t.price>=0?t.price:Math.abs(t.price)):r.state.prices[Object(Be.c)()],r.setState({displayPrice:n},function(){r._onPriceSelected(n)}),r.props.errorHandler&&r.props.errorHandler(!1)),r.state.isOpened&&r._dropdown&&!r._dropdown.contains(e.target)&&r._closeDropdown()},r._onInputChange=function(e){var t=e.currentTarget.value,n=r.state.priceFormatter.parse(t);r.props.errorHandler&&r.props.errorHandler(!Boolean(n.res)),r._onPriceSelected(t)},r._onTouchStart=function(e){e.stopPropagation(),r._swipeState.y=e.touches[0].clientY},r._onTouchMove=function(e){if(e.preventDefault(),e.stopPropagation(),e.changedTouches&&e.changedTouches.length&&null!==r._swipeState.y){var t=e.changedTouches[0].clientY-r._swipeState.y;if(Math.abs(t)<10)return;r._swipeState.direction=t>0?"up":"down","up"===r._swipeState.direction?r._prependPriceOnTouchMove():"down"===r._swipeState.direction&&r._appendPriceOnTouchMove()}},r._onTouchEnd=function(e){e.stopPropagation(),r._resetSwipeState()},r._onDropdownWheelNoPassiv=function(e){e.preventDefault(),e.stopPropagation(),e.deltaY<0?r._prependPriceOnWheel():r._appendPriceOnWheel()},r._onInputMouseWheel=function(e){e.preventDefault(),e.stopPropagation(),r._scrollPriceOnWheel(e.deltaY<0?1:-1)},r._onSelect=function(e,t){var n=r.state.priceFormatter.parse(t.text);r.props.errorHandler&&r.props.errorHandler(!n.res),r.setState({highlighted:!0,displayPrice:t.text,selected:e,isPriceSelectedByWheelOrByDropdown:!0},function(){r._closeDropdown(),r._onPriceSelected(t.text),!Modernizr.mobiletouch&&r._priceInput&&r._priceInput.focus()})},r._onNavigate=function(e,t){var n=r.state.command&&"prev"===r.state.command.name,o=r.state.command&&"next"===r.state.command.name;n?r._prependPriceOnNavigate():o&&r._appendPriceOnNavigate()},r._onMouseOver=function(e){r.setState({mouseOver:!0})},r._onMouseOut=function(e){r.setState({mouseOver:!1})},r._onOpenBtnClick=function(e){e.stopPropagation(),r.state.isOpened?r._closeDropdown():(r._openDropdown(),!Modernizr.mobiletouch&&r._priceInput&&(r._priceInput.setSelectionRange(r.state.displayPrice.length,r.state.displayPrice.length),r._priceInput.focus()),r.props.onControlFocused&&r.props.onControlFocused(0))},r._setPriceInput=function(e){r._priceInput=e},r._setPriceControl=function(e){r._priceControl=e},
r._scrollPriceOnArrowUp=function(e){e.preventDefault(),r._prependPriceOnNavigate()},r._scrollPriceOnArrowDown=function(e){e.preventDefault(),r._appendPriceOnNavigate()},r._selectPrev=function(e){e.preventDefault(),r.setState({command:{name:"prev"}})},r._selectNext=function(e){e.preventDefault(),r.setState({command:{name:"next"}})},r._openDropdown=function(){r.setState({highlighted:!0,isOpened:!0,keyboardEventHandlers:r._getKeyboardEventHandlers("open")})},r._closeDropdownWithStopPropagation=function(e){e&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()),r._closeDropdown()},r._closeDropdown=function(){var e,t,n={isOpened:!1,keyboardEventHandlers:r._getKeyboardEventHandlers("close")};r.props.error||-1!==r.state.prices.indexOf(r.state.displayPrice)&&r.state.selected===Math.floor(r.state.prices.length/2)?r.setState(n):(e=r.state.priceFormatter.parse(r.state.displayPrice),t=e.res?Object(Be.a)(e.price,r.props.step,r.state.priceFormatter,Object(Be.c)()):r.state.prices,r.setState(function(e){return Object(S.__assign)(Object(S.__assign)({},n),{prices:t,selected:t.indexOf(r.state.displayPrice)})}))},n=Object(Be.a)(Object(Be.d)(t.displayPrice,t.priceFormatter),t.step,t.priceFormatter,Object(Be.c)()),r.state={displayPrice:t.displayPrice,prices:n,selected:n.indexOf(t.displayPrice),highlighted:Boolean(r.props.highlighted),isOpened:!1,mouseOver:!1,keyboardEventHandlers:r._getKeyboardEventHandlers("close"),priceFormatter:t.priceFormatter,step:t.step,isPriceSelectedByWheelOrByDropdown:!1},r._resetSwipeState(),r}return Object(S.__extends)(t,e),t.prototype.componentDidMount=function(){this._setInitialFocus()},t.prototype.render=function(){var e=this,t=x(Fe.absolutePriceControl,this.props.className),n=N.createElement("span",{className:Fe.priceLabel},He),r=x(Fe.openIcon,this.state.isOpened&&Fe.opened,this.props.status===j.g.Wait&&Fe.wait),o=N.createElement("div",{className:Fe.openButton,onClick:this._onOpenBtnClick},N.createElement("div",{className:Fe.iconWrapper},N.createElement(ae.a,{className:r,icon:Ie})));return N.createElement(fe.a,{click:!0,mouseDown:!0,touchStart:!0,handler:this._onOutsideClick},function(r){return N.createElement("span",{className:t,ref:r},N.createElement(We,{className:e.props.inputClassName,containerReference:e._setPriceControl,inputReference:e._setPriceInput,keyboardEventHandlers:e.state.keyboardEventHandlers,value:e.state.displayPrice,warning:e.props.warning,error:e.props.error,errorMessage:e.props.errorMessage||je,showErrorMessage:(e.props.error||e.props.warning)&&e.state.mouseOver,onChange:e._onInputChange,onFocus:e._onFocus,onBlur:e._onBlur,onMouseOver:e._onMouseOver,onMouseOut:e._onMouseOut,onWheelNoPassive:e._onInputMouseWheel},o),n,N.createElement(Ne.a,{anchor:"bottom",root:"document",reference:e._setDropdownRef,className:Fe.list,command:e.state.command,isOpened:e.state.isOpened,items:e._makeListItems(),itemsClassName:Fe.item,width:e._getDropdownWidth(),selected:e.state.selected,selectedClassName:Fe.selected,target:null!==e._priceControl?e._priceControl:void 0,attachmentOffsetY:3,
inheritWidthFromTarget:!1,shouldScrollIfNotVisible:!1,onSelect:e._onSelect,onNavigate:e._onNavigate,onDropdownTouchStart:e._onTouchStart,onDropdownTouchMove:e._onTouchMove,onDropdownTouchEnd:e._onTouchEnd,onDropdownWheelNoPassive:e._onDropdownWheelNoPassiv}))})},t.getDerivedStateFromProps=function(e,t){var n,r,o,s;return e.displayPrice!==t.displayPrice||e.highlighted!==t.highlighted||e.priceFormatter!==t.priceFormatter||e.step!==t.step?(r=(n=e.priceFormatter.parse(e.displayPrice)).res?Object(Be.a)(n.price,e.step,e.priceFormatter,Object(Be.c)()):t.prices,o=e.priceFormatter.format(Object(Be.d)(e.displayPrice,e.priceFormatter)),s=Object(S.__assign)(Object(S.__assign)({},t),{displayPrice:e.displayPrice,priceFormatter:e.priceFormatter,step:e.step,isPriceSelectedByWheelOrByDropdown:!1}),e.error||(s.selected=r.indexOf(o),s.highlighted=Boolean(e.highlighted),s.prices=r),s):null},t.prototype._onPriceSelected=function(e){"function"==typeof this.props.onPriceSelected&&this.props.onPriceSelected(e)},t.prototype._resetSwipeState=function(){this._swipeState={direction:null,y:null}},t.prototype._getKeyboardEventHandlers=function(e){var t,n;return"close"===e?((t={})[Se.a.UpArrow]=this._scrollPriceOnArrowUp,t[Se.a.DownArrow]=this._scrollPriceOnArrowDown,t):((n={})[Se.a.Enter]=this._closeDropdownWithStopPropagation,n[Se.a.Escape]=this._closeDropdownWithStopPropagation,n[Se.a.UpArrow]=this._selectPrev,n[Se.a.DownArrow]=this._selectNext,n)},t.prototype._makeListItems=function(e){var t=this;return void 0===e&&(e=!0),this.state.prices.map(function(n){return{text:n,elem:N.createElement(a,{price:n,ask:t.props.priceFormatter.format(t.props.ask),bid:t.props.priceFormatter.format(t.props.bid),last:t.props.priceFormatter.format(t.props.last),side:t.props.side,displayPriceLabel:e})}})},t.prototype._prependPriceOnWheel=function(){var e=this.state.priceFormatter.format(Object(Be.d)(this.state.prices[0],this.state.priceFormatter)+1*this.props.step);this.setState(function(t){return{prices:[e].concat(t.prices.slice(0,-1)),selected:0===t.selected?1:t.selected+1}})},t.prototype._appendPriceOnWheel=function(){var e=this.state.prices.length-1,t=this.state.priceFormatter.format(Object(Be.d)(this.state.prices[e],this.state.priceFormatter)+-1*this.props.step);this.setState(function(n){return{prices:n.prices.slice(1).concat(t),selected:n.selected===e?e-1:n.selected-1}})},t.prototype._scrollPriceOnWheel=function(e){var t=this,n=this.state.priceFormatter.format(Object(Be.d)(this.state.prices[this.state.selected],this.state.priceFormatter)+e*this.props.step);this.setState({displayPrice:n},function(){1===e?t._prependPriceOnNavigate():t._appendPriceOnNavigate()})},t.prototype._prependPriceOnNavigate=function(){var e,t=this,n=this.state.priceFormatter.format(Object(Be.d)(this.state.prices[0],this.state.priceFormatter)+1*this.props.step),r=[n].concat(this.state.prices.slice(0,-1)),o=this.state.prices.length-1;e=this.state.selected<=0?0:this.state.selected>o?o:this.state.selected,this.setState({prices:r,displayPrice:r[e],selected:e,
isPriceSelectedByWheelOrByDropdown:!0},function(){t._onPriceSelected(r[e])})},t.prototype._appendPriceOnNavigate=function(){var e,t=this,n=this.state.priceFormatter.format(Object(Be.d)(this.state.prices[this.state.prices.length-1],this.state.priceFormatter)+-1*this.props.step),r=this.state.prices.slice(1).concat(n),o=this.state.prices.length-1;e=this.state.selected<=0?0:this.state.selected>o?o:this.state.selected,this.setState({prices:r,displayPrice:r[e],selected:e,isPriceSelectedByWheelOrByDropdown:!0},function(){t._onPriceSelected(r[e])})},t.prototype._prependPriceOnTouchMove=function(){var e=this,t=Object(Be.d)(this.state.prices[0],this.state.priceFormatter),n=Object(Be.b)(1,t,this.props.step,1,this.state.priceFormatter);this.setState(function(t){return{prices:n.concat(t.prices.slice(0,e.state.prices.length-1)),selected:0===t.selected?1:t.selected+1}})},t.prototype._appendPriceOnTouchMove=function(){var e=this.state.prices.length-1,t=Object(Be.d)(this.state.prices[e],this.state.priceFormatter),n=Object(Be.b)(1,t,this.props.step,-1,this.state.priceFormatter);this.setState(function(t){return{prices:t.prices.slice(1).concat(n),selected:t.selected===e?e-1:t.selected-1}})},t.prototype._getDropdownWidth=function(){if(this.state.isOpened&&null!==this._priceControl&&(this.context.mode===j.f.Popup||this.state.prices[0].length<=7))return parseFloat(window.getComputedStyle(this._priceControl,null).getPropertyValue("width"))+2},t.contextType=j.e,t.defaultProps={highlighted:!1,className:"",inputClassName:""},t}(N.PureComponent),ze=n("RRM5"),Ve=n("33OQ"),Ae="Ask",Le="Bid",Ue="Stop",qe=/^[-+]?[0-9]*\.?[0-9]+$/,Ke=6,Ye=4,Ge=n("vwxn"),Qe=Object(Se.b)(xe.a),Je=window.t("Ticks",{context:"price"}),Xe=window.t("Price format is invalid."),Ze=function(e){function t(t){var n,r,o,s=e.call(this,t)||this;return s._priceInput=null,s._priceControl=null,s._dropdown=null,s._setDropdownRef=function(e){s._dropdown=e},s._onMouseOver=function(e){s.setState({mouseOver:!0})},s._onMouseOut=function(e){s.setState({mouseOver:!1})},s._onOutsideClick=function(e){s.state.isOpened&&s._dropdown&&!s._dropdown.contains(e.target)&&s._closeDropdown()},s._onFocus=function(e){s.setState({isEditing:!0,displayValue:h(s.state.value.offset)},function(){var e,t;null!==s._priceInput&&(e=s._priceInput,t=s.state.displayValue.length,e.setSelectionRange&&(e.focus(),e.setSelectionRange(0,t),e.select()))}),s.props.onControlFocused&&s.props.onControlFocused(1),s.props.onFocus&&s.props.onFocus(e)},s._onBlur=function(e){var t,n,r;s.props.onBlur&&s.props.onBlur(e),t=s.state.prices[0].base,n=l(s.state.prices,m(t,s.state.value.offset)),r=0<=n&&n<=s.state.prices.length-1?n:Math.floor(s.state.prices.length/2),s.setState({isEditing:!1,displayValue:s.state.prices[r].displayValue,selected:r},function(){s._trackExitEditingModeEvent(s.state.prices[r].offset)})},s._onInputChange=function(e){var t,n,r,o=e.currentTarget.value;p(o)?(r=l(n=v(t={base:s.state.value.base,offset:Number(o)},_()),m(t.base,t.offset)),s.setState({displayValue:o,prices:n,selected:r,isOpened:!1},function(){
s._onPriceSelected(t)})):s.setState({displayValue:o,isOpened:!1})},s._onTouchStart=function(e){e.stopPropagation(),s._swipeState.y=e.touches[0].clientY},s._onTouchMove=function(e){if(e.preventDefault(),e.stopPropagation(),e.changedTouches&&e.changedTouches.length&&null!==s._swipeState.y){var t=e.changedTouches[0].clientY-s._swipeState.y;if(Math.abs(t)<10)return;s._swipeState.direction=t>0?"up":"down","up"===s._swipeState.direction?s._prependPriceOnTouchMove():"down"===s._swipeState.direction&&s._appendPriceOnTouchMove()}},s._onTouchEnd=function(e){e.stopPropagation(),s._resetSwipeState()},s._onDropdownWheelNoPassive=function(e){e.preventDefault(),e.stopPropagation(),e.deltaY<0?s._prependPriceOnWheel():s._appendPriceOnWheel()},s._onInputMouseWheel=function(e){e.preventDefault(),e.stopPropagation(),s._scrollPriceOnWheel(e.deltaY<0?1:-1)},s._onSelect=function(e,t){s.setState(function(n){return{highlighted:!0,displayValue:s.state.isEditing?h(t.offset):t.text,selected:e}},function(){s._closeDropdown(),s._onPriceSelected(),s.setState({isEditing:!1},function(){s._blurInput()})})},s._onNavigate=function(e,t){var n=s.state.command&&"prev"===s.state.command.name,r=s.state.command&&"next"===s.state.command.name;n?s._prependPriceOnNavigate():r&&s._appendPriceOnNavigate()},s._onOpenBtnClick=function(e){e.preventDefault(),e.stopPropagation(),s.state.isOpened?s._closeDropdown():(s._openDropdown(),!Modernizr.mobiletouch&&s._priceInput&&s._priceInput.focus(),s.props.onControlFocused&&s.props.onControlFocused(1),s.setState({isEditing:!1,displayValue:s.state.displayValue},function(){!Modernizr.mobiletouch&&s._priceInput&&s._priceInput.setSelectionRange(s.state.displayValue.length,s.state.displayValue.length)}))},s._switchEditingMode=function(e){var t,n,r,o,i;e.preventDefault(),t=Number(s.state.displayValue),Number.isInteger(t)?s.setState({isEditing:!1},function(){s._blurInput()}):(n=Math.round(t),i=l(o=v(r={base:s.state.value.base,offset:n},_()),m(r.base,r.offset)),s.setState({displayValue:String(n),prices:o,selected:i,isEditing:!1},function(){s._onPriceSelected(),s._blurInput()}))},s._setPriceInput=function(e){s._priceInput=e},s._setPriceControl=function(e){s._priceControl=e},s._scrollPriceOnArrowUp=function(e){e.preventDefault(),s._prependPriceOnNavigate()},s._scrollPriceOnArrowDown=function(e){e.preventDefault(),s._appendPriceOnNavigate()},s._selectPrev=function(e){e.preventDefault(),s.setState({command:{name:"prev"}})},s._selectNext=function(e){e.preventDefault(),s.setState({command:{name:"next"}})},s._openDropdown=function(){s.setState({highlighted:!0,isOpened:!0,keyboardEventHandlers:s._getKeyboardEventHandlers("open")})},s._closeDropdownOnKeyDown=function(e){e.preventDefault(),s._closeDropdown(),s.setState({isEditing:!1,displayValue:s.state.displayValue},function(){s._blurInput()})},s._closeDropdown=function(){var e,t,n={isOpened:!1,keyboardEventHandlers:s._getKeyboardEventHandlers("close")};-1===l(s.state.prices,s.state.displayValue)||s.state.selected!==Math.floor(s.state.prices.length/2)?(t=l(e=v({base:s.state.value.base,
offset:s.state.value.offset||0},_()),s.state.displayValue),s.setState(Object(S.__assign)(Object(S.__assign)({},n),{prices:e,selected:t}))):s.setState(n)},s._trackExitEditingModeEvent=function(e){s.props.trackEvent&&s.props.trackEvent("Order Ticket","Relative Price - Exit Editing Mode",String(e))},n=m(t.initialValue.base,t.initialValue.offset),o=l(r=v(s.props.initialValue,_()),n),s.state={value:t.initialValue,displayValue:n,prices:r,selected:o,highlighted:Boolean(s.props.highlighted),isOpened:!1,isEditing:!1,mouseOver:!1,keyboardEventHandlers:s._getKeyboardEventHandlers("close")},s._resetSwipeState(),s}return Object(S.__extends)(t,e),t.prototype.render=function(){var e=this,t=x(Ge.relativePriceControl,this.props.className),n=N.createElement("span",{className:Ge.pipsLabel},Je),r=x(Ge.openIcon,this.state.isOpened&&Ge.opened,this.props.status===j.g.Wait&&Ge.wait),o=N.createElement("div",{className:Ge.openButton,onClick:this._onOpenBtnClick},N.createElement("div",{className:Ge.iconWrapper},N.createElement(ae.a,{className:r,icon:Ie}))),s=this.state.isEditing&&!p(this.state.displayValue);return N.createElement(fe.a,{click:!0,mouseDown:!0,touchStart:!0,handler:this._onOutsideClick},function(r){return N.createElement("span",{className:t,ref:r},N.createElement(Qe,{className:e.props.inputClassName,containerReference:e._setPriceControl,inputReference:e._setPriceInput,keyboardEventHandlers:e.state.keyboardEventHandlers,value:e.state.displayValue,readOnly:!e.state.isEditing,error:s,errorMessage:s?Xe:void 0,showErrorMessage:s&&e.state.mouseOver,onFocus:e._onFocus,onBlur:e._onBlur,onChange:e._onInputChange,onWheelNoPassive:e._onInputMouseWheel,onMouseOver:e._onMouseOver,onMouseOut:e._onMouseOut},o),n,N.createElement(Ne.a,{anchor:"bottom",root:"document",reference:e._setDropdownRef,className:Ge.list,command:e.state.command,isOpened:e.state.isOpened,items:e._makeListItems(),itemsClassName:Ge.item,selected:e.state.selected,selectedClassName:Ge.selected,target:null!==e._priceControl?e._priceControl:void 0,attachmentOffsetY:3,inheritWidthFromTarget:!0,shouldScrollIfNotVisible:!1,onSelect:e._onSelect,onNavigate:e._onNavigate,onDropdownTouchStart:e._onTouchStart,onDropdownTouchMove:e._onTouchMove,onDropdownTouchEnd:e._onTouchEnd,onDropdownWheelNoPassive:e._onDropdownWheelNoPassive}))})},t.getDerivedStateFromProps=function(e,t){var n,r,o=m(e.initialValue.base,e.initialValue.offset);return!1===Object(be.g)(t.value,e.initialValue)||t.highlighted!==e.highlighted?(r=l(n=v(e.initialValue,_()),o),Object(S.__assign)(Object(S.__assign)({},t),{highlighted:Boolean(e.highlighted),value:e.initialValue,displayValue:t.isEditing?h(e.initialValue.offset):o,prices:n,selected:r})):null},t.prototype._blurInput=function(){!Modernizr.mobiletouch&&this._priceInput&&this._priceInput.blur()},t.prototype._onPriceSelected=function(e){var t,n;"function"==typeof this.props.onPriceSelected&&(n={base:(t=void 0!==e?e:this.state.prices[this.state.selected]).base,offset:t.offset},this.props.onPriceSelected(n))},t.prototype._resetSwipeState=function(){this._swipeState={
direction:null,y:null}},t.prototype._getKeyboardEventHandlers=function(e){var t,n;return"close"===e?((t={})[Se.a.UpArrow]=this._scrollPriceOnArrowUp,t[Se.a.DownArrow]=this._scrollPriceOnArrowDown,t[Se.a.Enter]=this._switchEditingMode,t):((n={})[Se.a.Enter]=this._closeDropdownOnKeyDown,n[Se.a.Escape]=this._closeDropdownOnKeyDown,n[Se.a.UpArrow]=this._selectPrev,n[Se.a.DownArrow]=this._selectNext,n)},t.prototype._makeListItems=function(){return this.state.prices.map(function(e,t){return{base:e.base,offset:e.offset,text:e.displayValue,elem:N.createElement(c,{price:e.displayValue})}})},t.prototype._prependPriceOnWheel=function(){var e=this.state.prices[0],t=f(e,1);this.setState(function(e){return{prices:[t].concat(e.prices.slice(0,-1)),selected:0===e.selected?1:e.selected+1}})},t.prototype._appendPriceOnWheel=function(){var e=this.state.prices.length-1,t=this.state.prices[e],n=f(t,-1);this.setState(function(t){return{prices:t.prices.slice(1).concat(n),selected:t.selected===e?e-1:t.selected-1}})},t.prototype._scrollPriceOnWheel=function(e){var t=this,n=f(this.state.prices[this.state.selected],e);this.setState({displayValue:this.state.isEditing?h(n.offset):n.displayValue},function(){1===e?t._prependPriceOnNavigate():t._appendPriceOnNavigate()})},t.prototype._prependPriceOnNavigate=function(){var e=this,t=this.state.prices[0],n=f(t,1);this.setState(function(t){var r=[n].concat(t.prices.slice(0,-1)),o=e.state.prices.length-1;return{prices:r,selected:e.state.selected<=0?0:e.state.selected>o?o:t.selected}},function(){e._onPriceSelected()})},t.prototype._appendPriceOnNavigate=function(){var e=this,t=this.state.prices[this.state.prices.length-1],n=f(t,-1);this.setState(function(t){var r=t.prices.slice(1).concat(n),o=e.state.prices.length-1;return{prices:r,selected:e.state.selected<=0?0:e.state.selected>o?o:t.selected}},function(){e._onPriceSelected()})},t.prototype._prependPriceOnTouchMove=function(){var e=this,t=this.state.prices[0],n=[];n.unshift(f(t,1)),this.setState(function(t){return{prices:n.concat(t.prices.slice(0,e.state.prices.length-1)),selected:0===t.selected?1:t.selected+1}})},t.prototype._appendPriceOnTouchMove=function(){var e=this.state.prices.length-1,t=this.state.prices[e],n=[];n.push(f(t,-1)),this.setState(function(t){return{prices:t.prices.slice(1).concat(n),selected:t.selected===e?e-1:t.selected-1}})},t.defaultProps={highlighted:!1,className:"",inputClassName:""},t}(N.PureComponent),$e=n("TDT9"),et=n("EVs3"),tt=function(e){function t(t){var n=e.call(this,t)||this;return n._errorHandler=function(e){n.props.model.setControlError(e)},n._updatePrice=function(e){null!==e&&n._callback()},n._updateRelativePrice=function(e){null!==e&&n._callback()},n._onAbsolutePriceSelected=function(e){n.props.model.onAbsolutePriceSelected(e)},n._onRelativePriceSelected=function(e){n.props.model.onRelativePriceSelected(e)},n._onControlFocused=function(e){n.props.model.focusedControl.setValue(e),n.props.model.onControlFocused.fire()},n._callback=function(){return n.forceUpdate()},n}return Object(S.__extends)(t,e),
t.prototype.componentDidMount=function(){this._subscribeToModel(this.props.model)},t.prototype.componentWillUnmount=function(){this._unsubscribeFromModel(this.props.model)},t.prototype.render=function(){var e=this.props.model,t=e.quotes.value();return N.createElement(g,{status:e.status.value(),priceType:this.props.priceType,groupTitle:this.props.groupTitle,focusedControl:e.focusedControl.value(),absolutePrice:e.displayPrice.value(),relativePrice:function(e){var t=e.relativePrice.value();return null!==t?t:{base:1===e.side.value()?"ask":"bid",offset:0}}(e),errorHandler:this._errorHandler,step:e.step.value(),ask:t.ask,bid:t.bid,last:t.last,side:e.side.value(),priceFormatter:e.formatter,error:e.error.value(),errorMessage:e.error.value().msg,onAbsolutePriceSelected:this._onAbsolutePriceSelected,onRelativePriceSelected:this._onRelativePriceSelected,onControlFocused:this._onControlFocused,isRelativePriceControlHidden:e.isRelativePriceControlHidden,trackEvent:this.props.trackEvent,focus:this.props.focus})},t.prototype._subscribeToModel=function(e){e.focusedControl.subscribe(this._callback),e.displayPrice.subscribe(this._updatePrice),e.error.subscribe(this._callback),e.relativePrice.subscribe(this._updateRelativePrice),e.quotes.subscribe(this._callback),e.side.subscribe(this._callback),e.orderType.subscribe(this._callback),e.step.subscribe(this._callback)},t.prototype._unsubscribeFromModel=function(e){e.focusedControl.unsubscribe(this._callback),e.displayPrice.unsubscribe(this._updatePrice),e.error.unsubscribe(this._callback),e.relativePrice.unsubscribe(this._updateRelativePrice),e.quotes.unsubscribe(this._callback),e.side.unsubscribe(this._callback),e.orderType.unsubscribe(this._callback),e.step.unsubscribe(this._callback)},t}(N.PureComponent),nt=window.t("Order Price"),rt=window.t("Stop Price"),ot=window.t("Limit Price"),st=function(e){function t(t){var n=e.call(this,t)||this;return n._callback=function(){return n.forceUpdate()},n}return Object(S.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.model.orderType.subscribe(this._callback)},t.prototype.componentWillUnmount=function(){this.props.model.orderType.unsubscribe(this._callback)},t.prototype.render=function(){var e,t=this.props.model.orderType.value();return 2===t?null:(e=3===t?this.props.model.stopPriceModel:this.props.model.limitPriceModel,N.createElement(N.Fragment,null,N.createElement("div",null,4===t&&N.createElement(tt,{key:this.props.model.stopPriceModel.id,model:this.props.model.stopPriceModel,priceType:j.i.Stop,groupTitle:rt,trackEvent:this.props.trackEvent,focus:this.props.focus}),N.createElement(tt,{key:e.id,model:e,priceType:3===t?j.i.Stop:j.i.Limit,groupTitle:4===t?ot:nt,trackEvent:this.props.trackEvent,focus:this.props.focus}))))},t}(N.PureComponent),it=n("twDL"),at=n("ldgD"),ct=n("4ko3"),lt=n("yTrw"),pt=n("75D8"),n("HbRj"),ut=n("xT4p"),dt=window.t("Set {durationType} {datetime}"),mt=function(e){function t(t){var n=e.call(this,t)||this;return n._todayMidnight=at("00:00","HH:mm"),n._onSelect=function(){
n.props.onSelect(n.state.date,n.state.time)},n._onDateSelect=function(e){n.setState({date:e})},n._onTimeSelect=function(e){n.setState({time:e})},n.state={date:n.props.initTime,time:n.props.initDate},n}return Object(S.__extends)(t,e),t.prototype.render=function(){var e=this.state.date.format("DD")+" "+this.state.date.format("MMM")+" '"+this.state.date.format("YY"),t=this.state.time.format("HH:mm"),n=dt.format({durationType:this.props.durationMetaInfo.name,datetime:e+(this.props.durationMetaInfo.hasTimePicker?", "+t:"")});return N.createElement("div",{className:ut.editWrapper},N.createElement("div",{className:ut.dateTimeWrapper},this.props.durationMetaInfo.hasDatePicker&&N.createElement(lt.a,{selectedDate:this.state.date,className:ut.calendar,minDate:this._todayMidnight,onSelect:this._onDateSelect}),this.props.durationMetaInfo.hasTimePicker&&N.createElement(pt.a,{selectedTime:this.state.time,onSelect:this._onTimeSelect,className:ut.clock})),N.createElement("div",{className:ut.buttonBlock},N.createElement("div",{className:ut.buttonWrapper},N.createElement(q.Button,{type:"primary",size:"l",onClick:this._onSelect},n))))},t}(N.PureComponent),ht=n("MiOS"),ft=n("Iksw"),vt=n("9dlw"),_t=n("N5tr"),bt={attachment:{horizontal:"center",vertical:"bottom"},targetAttachment:{horizontal:"center",vertical:"top"}},gt={attachment:{horizontal:"right",vertical:"bottom"},targetAttachment:{horizontal:"right",vertical:"top"}},yt=window.t("Time in Force"),Et=280,wt=220,Ct=function(e){function t(t){var n=e.call(this,t)||this;return n._typeTextElement=null,n._dateTextElement=null,n._timeDropdown=null,n._updateTimeAttachment=function(){if(n._timeDropdown){var e=Object(G.ensureNotNull)(n._timeDropdown).getBoundingClientRect().right>Object(G.ensureNotNull)(document.documentElement).clientWidth?gt:bt;n.setState({dateAnchors:e})}},n._setTypeElement=function(e){n._typeTextElement=e},n._setTimeDateRef=function(e){n._dateTextElement=e},n._setTimeDropdownRef=function(e){n._timeDropdown=e},n._onTypeClick=function(){n.setState(function(e){return{isTypeOpened:!e.isTypeOpened,isTimeOpened:!1}}),n.props.onClick&&n.props.onClick()},n._onTimeClick=function(){n.setState(function(e){return{isTypeOpened:!1,isTimeOpened:!e.isTimeOpened,dateAnchors:bt}}),n.props.onClick&&n.props.onClick()},n._onTypeEscape=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),27===e.keyCode&&n._close()},n._onTimeEscape=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),27===e.keyCode&&n._close()},n._onTypeSelect=function(e){var t={type:n.props.durations[e||0].value},r=Object(ht.a)(n.props.durations,t.type);(r.hasDatePicker||r.hasTimePicker)&&(t.datetime=n.props.duration.datetime||Object(ht.c)(at().utc().add(1,"days"))),n.props.onDurationChanged(t),n._close()},n._onTimeSelect=function(e,t){var r=at({year:e.year(),month:e.month(),day:e.date(),hour:t.hour(),minute:t.minute()}).utc(),o=Object(ht.c)(r);n.props.onDurationChanged({type:n.props.duration.type,datetime:o}),n._close()},n._onTimeBlockClickOutside=function(e){
n._timeDropdown&&n._timeDropdown.contains(e.target)||!n.state.isTypeOpened&&!n.state.isTimeOpened||(n.setState({isTimeOpened:!1}),n.props.onClose&&n.props.onClose())},n._close=function(){n.props.onClose&&n.props.onClose(),n.setState({isTypeOpened:!1,isTimeOpened:!1})},n.state={isTypeOpened:!1,isTimeOpened:!1,dateAnchors:bt},n}return Object(S.__extends)(t,e),t.prototype.render=function(){var e=this,t=Object(ht.a)(this.props.durations,this.props.duration.type),n=this.props.duration.datetime?at(this.props.duration.datetime):"GTT"===this.props.duration.type||"GTD"===this.props.duration.type?at().utc().add(1,"days"):at(),r=Object(ht.b)(n,t),o=this.props.durations.length>1?N.createElement(ct.a,{className:ut.typeSelector,reference:this._setTypeElement,text:t.name,tabIndex:-1,onClick:this._onTypeClick,onKeyDown:this._onTypeEscape}):N.createElement("span",{className:ut.typeSelector},this.props.durations[0].name+" "),s=t.hasDatePicker||t.hasTimePicker?N.createElement(ct.a,{className:ut.timeSelector,reference:this._setTimeDateRef,text:r,tabIndex:-1,onClick:this._onTimeClick,onKeyDown:this._onTimeEscape}):void 0,i=Object.values(this.props.durations).map(function(t,n){return N.createElement(_t.b,{label:t.name,key:t.value,onClickArg:n,onClick:e._onTypeSelect})});return N.createElement("div",{className:ut.duration},N.createElement("span",null,yt),o,N.createElement(vt.a,{doNotCloseOn:this,isOpened:this.state.isTypeOpened,position:Object(ft.c)(this._typeTextElement,{verticalMargin:0}),onClose:this._close},i),N.createElement(fe.a,{mouseDown:!0,touchStart:!0,handler:this._onTimeBlockClickOutside},function(r){return N.createElement("span",{className:ut.container,ref:r},s,N.createElement(he.a,{root:"document",isOpened:e.state.isTimeOpened,target:e._dateTextElement||void 0,targetAttachment:e.state.dateAnchors.targetAttachment,attachment:e.state.dateAnchors.attachment,inheritWidthFromTarget:!1,width:t.hasTimePicker?Et+wt:Et,reference:e._setTimeDropdownRef,onResize:e._updateTimeAttachment},N.createElement(mt,{durationMetaInfo:t,initDate:n,initTime:n,onSelect:e._onTimeSelect})))}))},t}(N.PureComponent),kt=function(e){function t(t){var n=e.call(this,t)||this;return n.onDurationChanged=function(e){n.props.model.duration.setValue(e)},n._onClick=function(){n.props.model.onControlFocused.fire()},n._callback=function(){return n.forceUpdate()},n}return Object(S.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.model.duration.subscribe(this._callback)},t.prototype.componentWillUnmount=function(){this.props.model.duration.unsubscribe(this._callback)},t.prototype.render=function(){return N.createElement(Ct,{duration:this.props.model.duration.value(),durations:this.props.model.durations,onDurationChanged:this.onDurationChanged,onClose:this.props.onClose,onClick:this._onClick})},t}(N.PureComponent),Ot=n("O8MG"),Pt=window.t("Margin Used"),Mt=window.t("Margin Available"),St=function(e){function t(t){var n=e.call(this,t)||this;return n._callback=function(){return n.forceUpdate()},n}return Object(S.__extends)(t,e),
t.prototype.componentDidMount=function(){this.context.resizerWidth&&this.context.resizerWidth.subscribe(this._callback)},t.prototype.componentWillUnmount=function(){this.context.resizerWidth&&this.context.resizerWidth.unsubscribe(this._callback)},t.prototype.render=function(){var e={width:this.props.progress+"%"},t=x(Ot.progress,100===this.props.progress&&Ot.fullFilled,this.props.usedMargin>this.props.availableMargin&&Ot.marginOverflow);return N.createElement("div",{className:x(Ot.progressBarContainer,this.props.wait&&Ot.wait)},N.createElement("div",{className:Ot.marginsContainer},N.createElement("div",{className:Ot.usedMargin},N.createElement("div",null,Pt),N.createElement("span",null,Object(be.j)(this.props.usedMargin))),N.createElement("div",{className:Ot.availableMargin},N.createElement("div",null,Mt),N.createElement("span",null,Object(be.j)(this.props.availableMargin)))),N.createElement("div",{className:Ot.progressBar},N.createElement("div",{className:Ot.track},N.createElement("div",{className:t,style:e}))))},t.contextType=j.e,t}(N.PureComponent),Nt=n("k2TW"),Tt=function(e){function t(t){var n=e.call(this,t)||this;return n._callback=function(){return n.forceUpdate()},n}return Object(S.__extends)(t,e),t.prototype.componentDidMount=function(){this._subscribeToModel(this.props.model)},t.prototype.componentWillUnmount=function(){this._unsubscribeFromModel(this.props.model)},t.prototype.render=function(){var e=this.props.model,t=e.usedMargin().value(),n=e.availableMargin().value();return N.createElement(y,{title:e.title(),hasMarginMeter:e.hasMarginMeter(),usedMargin:t,availableMargin:n,marginRatio:Object(be.e)(t,n),textOutputs:e.textOutputs().value(),status:this.props.status})},t.prototype._subscribeToModel=function(e){e.availableMargin().subscribe(this._callback),e.usedMargin().subscribe(this._callback),e.textOutputs().subscribe(this._callback)},t.prototype._unsubscribeFromModel=function(e){e.availableMargin().unsubscribe(this._callback),e.usedMargin().unsubscribe(this._callback),e.textOutputs().unsubscribe(this._callback)},t}(N.PureComponent),Dt=n("OOXv"),xt=n("ogJP"),It=n("+Kd2"),Bt=n("6a6n"),n("ZYKY"),Ft=n("BJPy"),Wt=Object(F.getLogger)("Trading.OrderPanel"),Ht=window.t("Quantity"),jt=window.t("Amount"),Rt=window.t("Non tradable symbol"),window.t("Log In"),window.t("Connect to broker"),window.t("Log into your TradingView account to trade"),window.t("Log into your broker/exchange account to trade"),window.t("Sign up"),window.t("Connect"),zt=445,Vt=function(e){function t(t){var n,r=e.call(this,t)||this;return r._block=null,r._orderWidgetWrapperBlock=null,r._button=null,r._resizeHandler=null,r._focusBlock=function(){null!==r._block&&r._block.focus()},r._onLayoutResizeHandleMousedown=function(e){var t,n,o,s;!e.defaultPrevented&&e.cancelable&&(e.preventDefault(),t=Math.max(r._orderWidgetWrapperBlock?r._orderWidgetWrapperBlock.clientHeight:0,0),n="touches"in e?e.touches[0].clientY:e.clientY,o=function(e){var o,s;e.preventDefault(),o="touches"in e?e.touches[0].clientY:e.clientY,(s=t+(o-n))<zt&&(s=zt),r._requestHeight(s)
},s=function(){document.removeEventListener("mousemove",o),document.removeEventListener("touchmove",o),document.removeEventListener("mouseup",s),document.removeEventListener("touchend",s),r._height&&Object(xt.isInteger)(r._height)&&I.setValue(B.settingsKeys.PANEL_HEIGHT,r._height)},document.addEventListener("mousemove",o),document.addEventListener("touchmove",o,{passive:!1}),document.addEventListener("mouseup",s),document.addEventListener("touchend",s,{passive:!1}))},r._setButtonRef=function(e){r._button=e},r._setResizeHandlerRef=function(e){r._resizeHandler=e},r._setOrderWidgetWrapperRef=function(e){r._orderWidgetWrapperBlock=e},r._forceUpdateAndReCalculateBounds=function(){r.forceUpdate(function(){return r.props.popupController&&r.props.popupController.recalculateBounds()})},r._onSelectTab=function(e){r.props.model.orderType.setValue(e)},r._onStatusChange=function(e){e===j.g.Wait&&r._block&&r._block.contains(document.activeElement)&&(W.isIE?HTMLElement.prototype.blur.call(document.activeElement):document.activeElement instanceof HTMLElement?document.activeElement.blur():Wt.logWarn("Failed to deselect: active element is not HTMLElement")),r._callback()},r._setRef=function(e){r._block=e},r._onKeyDown=function(e){13===e.keyCode&&!1===r.props.model.disabled.value()&&r._button&&(r._button.focus(),e.defaultPrevented||r._button.click())},r._handleClickSignIn=function(){E({source:"Trading panel",sourceMeta:"Chart"})},r._handleClickSignUp=function(){E({mode:"signup",source:"Trading panel",sourceMeta:"Chart"})},r._selectBroker=function(){r.props.model.noBroker&&r.props.model.selectBroker()},r._callback=function(){r.forceUpdate()},n=parseInt(I.getValue(B.settingsKeys.PANEL_HEIGHT,"")),Object(xt.isInteger)(n)&&(r._height=n),r}return Object(S.__extends)(t,e),t.prototype.componentDidMount=function(){this._subscribeToModel(this.props.model),this.props.settings.subscribe(this._forceUpdateAndReCalculateBounds),void 0===this.props.focus&&this._focusBlock(),null!==this._resizeHandler&&(this._resizeHandler.addEventListener("mousedown",this._onLayoutResizeHandleMousedown,{passive:!1}),this._resizeHandler.addEventListener("touchstart",this._onLayoutResizeHandleMousedown,{passive:!1}))},t.prototype.componentWillUnmount=function(){this._unsubscribeFromModel(this.props.model),this.props.settings.unsubscribe(this._forceUpdateAndReCalculateBounds),null!==this._resizeHandler&&(this._resizeHandler.removeEventListener("mousedown",this._onLayoutResizeHandleMousedown),this._resizeHandler.removeEventListener("touchstart",this._onLayoutResizeHandleMousedown))},t.prototype.render=function(){var e,t,n=this.props,o=n.model,s=n.settings,i=n.trackEvent,a=n.focus,c=this.context.mode,l=o.status.value(),p=this._quantityTitle(o),u=this._areBracketsSupported(o),d=this._isDurationSupported(o),m=this._isAmountEditable(o),h=x(Ft.doneButton,c===j.f.Panel&&Ft["button--panel"],(!d||2===o.orderType.value())&&Ft.doneButtonBeforeBrackets),f=x(Ft.header,o&&o.headerModel&&o.headerModel.hasBackButton.value()&&Ft.headerWithBackButton),v=c===j.f.Panel&&this._height?{
height:this._height}:{},_={value:s.value(),setValue:s.setValue.bind(s)},b=o.limitPriceModel&&o.limitPriceModel.isRelativePriceControlHidden||o.stopPriceModel&&o.stopPriceModel.isRelativePriceControlHidden;return e=N.createElement(w,{image:Bt,title:Rt,text:o.notTradableText}),t=N.createElement(N.Fragment,null,o.sideModel&&N.createElement("div",{className:Ft.side},N.createElement(U,{model:o.sideModel,disabled:o.existingOrder})),o.limitPriceModel&&o.stopPriceModel&&N.createElement(oe,{activeTab:o.orderType.value(),disabled:o.existingOrder,supportMarketOrders:o.supportMarketOrders,supportLimitOrders:o.supportLimitOrders,supportStopOrders:o.supportStopOrders,supportStopLimitOrders:o.supportStopLimitOrders,onSelect:this._onSelectTab}),o.limitPriceModel&&o.stopPriceModel&&o.quantityModel&&N.createElement("div",{className:x(Ft.centerBlock)},2!==o.orderType.value()&&N.createElement(st,{model:o,trackEvent:i,focus:a}),2!==o.orderType.value()&&N.createElement("div",{className:Ft.separator}),m?N.createElement("div",{className:Ft.quantityBracketsWrapper},N.createElement(N.Fragment,null,N.createElement("div",{className:Ft.title},p),N.createElement(Me,{model:o.quantityModel,className:Ft.controlGroup,symbolHasLotSize:o.symbolHasLotSize,trackEvent:i})),u&&N.createElement(N.Fragment,null,N.createElement("div",{className:Ft.separator}),N.createElement(se.a,{model:o,focus:a}))):u&&N.createElement("div",{className:Ft["brackets-wrapper"]},N.createElement("div",{className:Ft.separator}),N.createElement(se.a,{model:o,focus:a})),!1===u&&!0===d&&N.createElement("div",{className:Ft.separator}),Array.isArray(o.customFieldModels.value())&&o.customFieldModels.value().length>0&&N.createElement("div",{className:x(Ft.customFieldsWrapper,u&&Ft.customFieldWrapperBeforeBrackets)},this._generateCustomFields(o),N.createElement("div",{className:Ft.separator})),d&&2!==o.orderType.value()&&N.createElement("div",{className:Ft.duration},N.createElement(kt,{onClose:this._focusBlock,model:o.durationModel}))),o.buttonModel&&N.createElement("div",{className:h},N.createElement(it.a,{model:o,reference:this._setButtonRef}))),N.createElement(Ce.a.Provider,{value:_},N.createElement("div",{className:x(Ft.orderWidget),onKeyDown:this._onKeyDown,tabIndex:-1,ref:this._setRef},N.createElement("div",{ref:this._setOrderWidgetWrapperRef,className:x(Ft.orderWidgetWrapper,c===j.f.Panel&&Ft["orderWidgetWrapper--inPanel"]),style:v},o.headerModel&&N.createElement("div",{className:f},N.createElement(H.a,{model:o.headerModel,showQuantityInsteadOfAmount:o.showQuantityInsteadOfAmount,currency:o.currency,supportBrackets:o.supportBrackets,supportOrderPreview:o.supportOrderPreview,hideRelativePriceSettingsItem:b})),o.needSignIn&&void 0,o.noBroker&&void 0,o.notTradableText&&e,o.supportOrderPreview&&l===j.g.Preview&&null!==o.orderPreviewModel?N.createElement(r,{model:o.orderPreviewModel,side:o.side.value(),loading:o.loading}):t),c===j.f.Panel&&o.orderInfoModel&&N.createElement("div",{className:Ft.orderInfoAndSeparatorWrapper},N.createElement(N.Fragment,null,N.createElement("div",{
className:Ft.separator}),N.createElement("div",{className:Ft.resizeHandler,ref:this._setResizeHandlerRef})),l!==j.g.Preview&&N.createElement("div",{className:Ft.orderInfo},N.createElement(Tt,{model:o.orderInfoModel,status:l})))))},t.prototype._requestHeight=function(e){this._orderWidgetWrapperBlock&&(this._height=e,this._callback())},t.prototype._subscribeToModel=function(e){e.orderType.subscribe(this._forceUpdateAndReCalculateBounds),e.status.subscribe(this._onStatusChange),e.customFieldModels.subscribe(this._callback)},t.prototype._unsubscribeFromModel=function(e){e.orderType.unsubscribe(this._forceUpdateAndReCalculateBounds),e.status.unsubscribe(this._onStatusChange),e.customFieldModels.unsubscribe(this._callback)},t.prototype._quantityTitle=function(e){return e.showQuantityInsteadOfAmount?Ht:jt},t.prototype._areBracketsSupported=function(e){var t=Boolean(2===this.props.model.orderType.value()&&e.supportMarketBrackets||2!==this.props.model.orderType.value());return Boolean(e.supportBrackets&&t)},t.prototype._isDurationSupported=function(e){return Boolean(e.durationModel&&(!e.existingOrder||e.existingOrder&&e.supportModifyDuration))},t.prototype._isAmountEditable=function(e){return!1===e.existingOrder||Boolean(e.existingOrder&&e.supportEditAmount)},t.prototype._generateCustomFields=function(e){var t=this._areBracketsSupported(e),n=this._isDurationSupported(e);return Object(It.a)(e.customFieldModels.value(),!0===t||!1===n,e.status,Ft.customField,this._focusBlock)},t.contextType=j.e,t}(N.PureComponent),At=n("bWo7"),Lt=function(e){function t(t){var n=e.call(this,t)||this;return n._onKeyDown=function(e){27===e.keyCode&&n.props.onCancel&&n.props.onCancel()},n}return Object(S.__extends)(t,e),t.prototype.render=function(){return N.createElement("div",{className:At.orderPanel,onKeyDown:this._onKeyDown},N.createElement(Vt,{model:this.props.model,settings:this.props.settings,key:this.props.model.id,trackEvent:this.props.trackEvent,focus:this.props.focus}))},t}(N.PureComponent),Ut=n("AVTG"),qt=n("WXjp"),Kt=n("pafz"),Yt=n("H3n3"),Gt=function(e){function t(t){var n=e.call(this,t)||this;return n._renderWidget=function(e){return N.createElement(Vt,{settings:Object(G.ensureDefined)(n.props.settings),model:Object(G.ensureNotNull)(n.props.model),key:Object(G.ensureNotNull)(n.props.model).id,trackEvent:n.props.trackEvent,focus:n.props.focus,popupController:e})},n._onKeyDown=function(e){27===e.keyCode&&n.props.onClose&&n.props.onClose()},n}return Object(S.__extends)(t,e),t.prototype.render=function(){return N.createElement(qt.a,{className:Yt.dialog,isOpened:this.props.isOpened,onKeyDown:this._onKeyDown},N.createElement(Ut.a,{className:Yt.dialogBody},this.props.model&&this.props.settings&&N.createElement(Kt.a.Consumer,null,this._renderWidget)))},t}(N.PureComponent),n.d(t,"showOrderDialog",function(){return C}),n.d(t,"closeOrderDialog",function(){return k}),n.d(t,"mountOrderPanel",function(){return P}),n.d(t,"unmountOrderPanel",function(){return M}),Qt=null},K3s3:function(e,t,n){"use strict";function r(e){
var t,n=a(e.className,l.tab,((t={})[l.active]=e.isActive,t[l.disabled]=e.isDisabled,t[l.defaultCursor]=!!e.shouldUseDefaultCursor,t[l.noBorder]=!!e.noBorder,t));return i.createElement("div",{className:n,onClick:e.onClick,ref:e.reference},e.children)}function o(e){return function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.activeTab={current:null},e}return Object(s.__extends)(n,t),n.prototype.componentDidUpdate=function(){var e=Object(c.ensureNotNull)(this._slider),t=e.style;t.transition="transform 350ms",this._componentDidUpdate()},n.prototype.componentDidMount=function(){this._componentDidUpdate()},n.prototype.render=function(){var t=this,n=this.props.className,r=this._generateTabs();return i.createElement("div",{className:a(n,l.tabs)},r,i.createElement(e,{reference:function(e){t._slider=e}}))},n.prototype._generateTabs=function(){var e=this;return this.activeTab.current=null,i.Children.map(this.props.children,function(t){var n=t,r=Boolean(n.props.isActive),o={reference:function(t){r&&(e.activeTab.current=t),n.props.reference&&n.props.reference(t)}};return i.cloneElement(n,o)})},n.prototype._componentDidUpdate=function(){var e,t,n=Object(c.ensureNotNull)(this._slider),r=n.style;this.activeTab.current?(e=this.activeTab.current.offsetWidth,t=this.activeTab.current.offsetLeft,r.transform="translateX("+t+"px)",r.width=e+"px",r.opacity="1"):r.opacity="0"},n}(i.PureComponent)}var s,i,a,c,l,p,u;n.d(t,"a",function(){return p}),n.d(t,"b",function(){return r}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return u}),s=n("mrSG"),i=n("q1tI"),a=n("TSYQ"),c=n("Eyy1"),l=n("5o6O"),p=l,u=o(function(e){return i.createElement("div",{className:l.slider,ref:e.reference})})},L2Pi:function(e,t,n){e.exports={content:"content-1YIBf3lR",separator:"separator-1mSMdjab",controls:"controls-IDE4AP5A",button:"button-2Uy9pQhh",warning:"warning-3J0Fpebm"}},O8MG:function(e,t,n){e.exports={progressBarContainer:"progressBarContainer-2UzV2-rl",marginsContainer:"marginsContainer-2YIEgu1y",usedMargin:"usedMargin-Occd5_wD",availableMargin:"availableMargin-1UzX-4qn",progressBar:"progressBar-1rAeuakE",track:"track-34r9IyTR",progress:"progress-4fCnvrOH",fullFilled:"fullFilled-ESXQE67E",marginOverflow:"marginOverflow-mEYE0qUu",wait:"wait-3dngfMo8"}},OOXv:function(e,t,n){e.exports={messageBlock:"messageBlock-33ZJuSuw",image:"image-1X1YSRqq",title:"title-2T3HPzlr",text:"text-ym4mcjNF",controls:"controls-2k57sohD"}},R36R:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23" width="23" height="23"><g fill="currentColor" stroke="none"><path d="M3 10h18v2H3z"/><path d="M11 2h2v18h-2z"/></g></svg>'},RRM5:function(e,t,n){e.exports={relativePriceDropdownItem:"relativePriceDropdownItem-P03SLjrk",price:"price-11oGShsY"}},TZdo:function(e,t,n){e.exports={tabsContainer:"tabsContainer-2bXPFXPx",moreThen3Types:"moreThen3Types-h2ltwgD5",separator:"separator-30l4KVu0"}},V1pJ:function(e,t,n){e.exports={wrapper:"wrapper-IKYJbhdS",control:"control-3aOSqN3K",label:"label-1Ma4eT-g",units:"units-3uGpy-z-",
input:"input-2phQofvc",single:"single-3bfv56uL",error:"error-2qSitF5j",highlightedInactive:"highlightedInactive-3b94aIr3",calculatorIcon:"calculatorIcon-1fJ_ur2m",isOpened:"isOpened-1BamcDLy",risk:"risk-2eRxx8ye",highlighted:"highlighted-17dBSMuc",riskControlWrapper:"riskControlWrapper-9R1cwt3z",wait:"wait-dO-nc11W"}},WUqb:function(e,t,n){"use strict";function r(e){return function(t){function n(e){var n=t.call(this,e)||this;return n._keyboardListener=new a,n._listener=n._keyboardListener.listen.bind(n._keyboardListener),n}return Object(o.__extends)(n,t),n.prototype.componentDidMount=function(){this._registerHandlers(this.props.keyboardEventHandlers)},n.prototype.componentWillReceiveProps=function(e){this.props.keyboardEventHandlers!==e.keyboardEventHandlers&&this._registerHandlers(e.keyboardEventHandlers)},n.prototype.render=function(){return s.createElement(e,Object(o.__assign)({},this.props,{onKeyDown:this._listener}))},n.prototype._registerHandlers=function(e){e&&(this._keyboardListener.deleteAllHandlers(),this._keyboardListener.registerHandlers(e))},n}(s.PureComponent)}var o,s,i,a;n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r}),o=n("mrSG"),s=n("q1tI"),function(e){e[e.Enter=13]="Enter",e[e.Space=32]="Space",e[e.Backspace=8]="Backspace",e[e.DownArrow=40]="DownArrow",e[e.UpArrow=38]="UpArrow",e[e.RightArrow=39]="RightArrow",e[e.LeftArrow=37]="LeftArrow",e[e.Escape=27]="Escape",e[e.Tab=9]="Tab"}(i||(i={})),a=function(){function e(){this._handlers=new Map}return e.prototype.registerHandlers=function(e){var t=this;Object.keys(e).forEach(function(n){var r,o=parseInt(n),s=e[o];Array.isArray(s)||(s=[s]),t._handlers.has(o)?(r=t._handlers.get(o))&&s.forEach(function(e){return r.add(e)}):t._handlers.set(o,new Set(s))})},e.prototype.unregisterHandlers=function(e){var t=this;Object.keys(e).forEach(function(n){var r,o=parseInt(n),s=e[o];Array.isArray(s)||(s=[s]),t._handlers.has(o)&&(r=t._handlers.get(o))&&s.forEach(function(e){return r.delete(e)})})},e.prototype.deleteAllHandlers=function(){this._handlers=new Map},e.prototype.registerHandler=function(e,t){if(this._handlers.has(e)){var n=this._handlers.get(e);n&&n.add(t)}else this._handlers.set(e,new Set([t]))},e.prototype.unregisterHandler=function(e,t){if(this._handlers.has(e)){var n=this._handlers.get(e);n&&n.delete(t)}},e.prototype.listen=function(e){if(this._handlers.has(e.keyCode)){var t=this._handlers.get(e.keyCode);t&&t.forEach(function(t){return t(e)})}},e}()},"X6/E":function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 19" width="15" height="19"><path fill="currentColor" d="M2 0h11a2 2 0 0 1 2 2v15a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm1.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm4 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm4 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm-8 4a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm4 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm4 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm-8 4a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm4 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm4 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zM3 2a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H3z"/></svg>'},ZYKY:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 132 76" width="132" height="76" fill="none"><mask fill="#fff" id="a"><path fill-rule="evenodd" clip-rule="evenodd" d="M114 76H24C10.745 76 0 65.255 0 52s10.745-24 24-24l.247.002C26.215 12.214 39.681 0 56 0c14.582 0 26.886 9.753 30.744 23.093A21.896 21.896 0 0 1 98 20c11.821 0 21.464 9.323 21.979 21.017C126.981 43.48 132 50.155 132 58c0 9.265-7 16.895-16 17.89V76h-2z"/></mask><path fill="currentColor" d="M24 28l.012-2H24v2zm.247.002l-.012 2 1.777.01.22-1.763-1.985-.247zm62.497-4.909l-1.921.556.72 2.49 2.226-1.328-1.025-1.718zm33.235 17.924l-1.999.087.06 1.35 1.274.45.665-1.887zM116 75.89l-.22-1.988-1.78.197v1.791h2zm0 .11v2h2v-2h-2zm-2-2H24v4h90v-4zm-90 0C11.85 74 2 64.15 2 52h-4c0 14.36 11.64 26 26 26v-4zM2 52c0-12.15 9.85-22 22-22v-4C9.64 26-2 37.64-2 52h4zm21.988-22l.247.001.024-4-.247-.001-.024 4zm2.244-1.751C28.077 13.45 40.702 2 56 2v-4C38.66-2 24.354 10.98 22.263 27.754l3.969.495zM56 2c13.668 0 25.206 9.142 28.823 21.649l3.842-1.111C84.567 8.365 71.497-2 56-2v4zm31.769 22.81A19.896 19.896 0 0 1 98 22v-4a23.896 23.896 0 0 0-12.28 3.376l2.049 3.435zM98 22c10.745 0 19.513 8.475 19.98 19.105l3.997-.176C121.415 28.17 110.896 18 98 18v4zm21.314 20.903C125.541 45.095 130 51.03 130 58h4c0-8.72-5.58-16.132-13.357-18.87l-1.329 3.773zM130 58c0 8.234-6.222 15.018-14.22 15.902l.44 3.976C126.222 76.772 134 68.296 134 58h-4zm-16 17.89V76h4v-.11h-4zm2-1.89h-2v4h2v-4z" mask="url(#a)"/><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M60 51.659a6 6 0 1 0-4 0V57a2 2 0 0 0 4 0v-5.341z"/></svg>'},bWo7:function(e,t,n){e.exports={panelContainer:"panelContainer-2GRNIJHU",orderPanel:"orderPanel-2QLpCQWj"}},gla1:function(e,t,n){"use strict";var r,o;n.d(t,"a",function(){return o}),r=n("q1tI"),o=function(){return Object(r.useReducer)(function(e,t){return e+1},0)[1]}},k2TW:function(e,t,n){e.exports={orderInfo:"orderInfo-2Hj6-cYK",title:"title-2ACvP8Dj",contentWrapper:"contentWrapper-1sTVdn2l",right:"right-1W51QeYF"}},pKbH:function(e,t,n){e.exports={sideControl:"sideControl-2oXIf6EZ",section:"section-3MfYUJOf",active:"active-FRHydCOR",sell:"sell-ykfyDrcj",buy:"buy-3HuKjxF-",wait:"wait-2DfyH4ZO",title:"title-3dSfvTFy",value:"value-M4_Dls7U",valueNoData:"valueNoData-ucfFUNNG",spread:"spread-3GnlGVpC",isLongValue:"isLongValue-3l6vn8JU",disable:"disable-28AHfUgY"}},sgDj:function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23" width="23" height="23"><g fill="none"><path stroke="currentColor" stroke-width="2" d="M4 12.5A7.5 7.5 0 1 0 11.5 5h-6"/><path fill="currentColor" d="M3 5l4-4v8z"/></g></svg>'},tTUf:function(e,t,n){e.exports={absolutePriceControl:"absolutePriceControl-uLXQkgxA",priceLabel:"priceLabel-2kUzPOVO",openButton:"openButton-39taZ464",iconWrapper:"iconWrapper-1FcljkyE",openIcon:"openIcon-23_1vNRW",wait:"wait-1AhWjOdM",opened:"opened-1rRnuMNw",list:"list-3JNUkHkz",item:"item-1Vey2uzE",selected:"selected-1f5ZyQeD"}},vwxn:function(e,t,n){e.exports={relativePriceControl:"relativePriceControl-2D5_0KF4",pipsLabel:"pipsLabel-3aNbFmnw",openButton:"openButton-r_JmGebz",iconWrapper:"iconWrapper-ZWhNeJxv",openIcon:"openIcon-2FnsFwL5",wait:"wait-dLX9ZJ4I",opened:"opened-2RdtMkXb",list:"list-jPfYPULi",item:"item-3RitS1Ij",selected:"selected-3Sqra9uu"}},xT4p:function(e,t,n){e.exports={duration:"duration-2jJM5fvV",container:"container-xVSrlojA",typeSelector:"typeSelector-2SAnfJBX",timeSelector:"timeSelector-yuE4Dlc7",editWrapper:"editWrapper-3UQ7pdRc",dateTimeWrapper:"dateTimeWrapper-3e5COnT3",buttonBlock:"buttonBlock-14BBoq32",buttonWrapper:"buttonWrapper-3cP-zDem",calendar:"calendar-2u-94XzL",clock:"clock-3yvOF1q8",button:"button-19d7C_az"}}}]);
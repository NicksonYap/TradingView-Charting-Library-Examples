(window.webpackJsonp=window.webpackJsonp||[]).push([["trading-account-manager"],{"040A":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 26" width="3" height="13"><circle cx="3" cy="3" r="3"/><circle cx="3" cy="13" r="3"/><circle cx="3" cy="23" r="3"/></svg>'},"0dtH":function(t,e,i){"use strict";var n,s,r,o,a,l;Object.defineProperty(e,"__esModule",{value:!0}),n=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function t(e,i,n){var s,r,o;return null===e&&(e=Function.prototype),void 0===(s=Object.getOwnPropertyDescriptor(e,i))?null===(r=Object.getPrototypeOf(e))?void 0:t(r,i,n):"value"in s?s.value:void 0!==(o=s.get)?o.call(n):void 0},r=i("aIyQ"),o=(l=r)&&l.__esModule?l:{default:l},a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i._delegates=t,i._isSubscribed=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),n(e,[{key:"subscribe",value:function(t,i,n){var r=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"subscribe",this).call(this,t,i,n),!this._isSubscribed&&this._listeners.length&&this._delegates.forEach(function(t){return t.subscribe(r,r._onFire)})}},{key:"unsubscribe",value:function(t,i){var n=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unsubscribe",this).call(this,t,i),this._isSubscribed&&0===this._listeners.length&&this._delegates.forEach(function(t){return t.unsubscribe(n,n._onFire)})}},{key:"_onFire",value:function(){this.fire.apply(this,arguments)}}]),e}(),e.default=a,t.exports=e.default},"0sbS":function(t,e,i){"use strict";function n(t){var e=document.createElement("div");return e.innerHTML=t.trim(),e.childNodes[0]}function s(t,e){var i='\n\t\t<span class="tv-data-table__button tv-data-table__edit-button" title="'+(e||window.t("Edit"))+'">\n\t\t\t'+l+"\n\t\t</span>",s=n(i);return s.addEventListener("click",function(e){return t()}),s}function r(t,e){var i='\n\t\t<span class="tv-data-table__button tv-data-table__close-button" title="'+(e||window.t("Close",{context:"position"}))+'">\n\t\t\t'+u+"\n\t\t</span>",s=n(i);return s.addEventListener("click",function(e){return t()}),s}function o(t){return n('\n\t\t<span class="apply-common-tooltip tv-data-table__button tv-data-table__information-button '+t.type+'" title="'+t.text+'">\n\t\t\t'+c+"\n\t\t</span>")}
function a(t,e,i,n,a){var l,u,c,d=document.createElement("span");return void 0!==a&&(l=o(a),d.appendChild(l)),i&&(u=s(i,n),d.appendChild(u)),t&&(c=r(t,e),d.appendChild(c)),d}var l,u,c;i.r(e),i.d(e,"createEditButton",function(){return s}),i.d(e,"createCloseButton",function(){return r}),i.d(e,"createMessageButton",function(){return o}),i.d(e,"getSettingsButtons",function(){return a}),l=i("CRS4"),u=i("BhuR"),c=i("drKH"),i("YFKU")},"5tvn":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 5a4 4 0 1 1 8 0 4 4 0 0 1-8 0zm4-5a5 5 0 1 0 0 10A5 5 0 0 0 9 0zM1 18c0-1.26.24-2.78.99-3.97C2.7 12.88 3.92 12 6 12h6c2.08 0 3.3.88 4.01 2.03.75 1.19.99 2.7.99 3.97h1c0-1.36-.26-3.1-1.14-4.5-.9-1.44-2.44-2.5-4.86-2.5H6c-2.42 0-3.96 1.06-4.86 2.5A8.66 8.66 0 0 0 0 18h1z"/></svg>'},"6f6E":function(t,e,i){"use strict";var n,s;i.r(e),i.d(e,"AccountSummaryRow",function(){return s}),n=i("xZ9U"),s=function(){function t(t,e){this._infoUnsubscribe=[],this._infoUnsubscribe=e.reverse().map(function(e,i){var s,r,o,a="js-"+i,l=function(t,e){var i,n,s;return void 0===e&&(e=""),(i=document.createElement("div")).className="tv-account-manager__el "+e,(n=document.createElement("div")).className="tv-account-manager__text",n.textContent=t,(s=document.createElement("div")).className="tv-account-manager__data js-collateral-value",i.appendChild(n),i.appendChild(s),i}(e.text,a),u=l.getElementsByClassName("js-collateral-value")[0];return t.appendChild(l),s=e.formatter||"fixed",r=Object(n.tableFormatterByName)(s),o=function(t){var e=r.format({value:t,$container:$(u),row:{}});u.textContent=e.toString().replace(/&nbsp;/g," ")},e.wValue.subscribe(o),void 0!==e.wValue.value()&&o(e.wValue.value()),function(){return e.wValue.unsubscribe(o)}})}return t.prototype.destroy=function(){this._infoUnsubscribe.forEach(function(t){return t()})},t}()},CRS4:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path d="M0 46l35-35 14 14-35 35H0zM39 7l6-6c5-5 19 9 14 14l-6 6z"/></svg>'},EgWA:function(t,e,i){"use strict";var n;i.r(e),i.d(e,"notificationColumns",function(){return n}),i("YFKU"),n=[{label:$.t("Time"),property:"time",formatter:"localDate",className:"tv-data-table__cell--text tv-data-table__cell--text-nowrap"},{label:$.t("Title"),property:"title",className:"tv-data-table__cell--text tv-data-table__cell--text-nowrap"},{label:$.t("Text"),property:"text",className:"tv-data-table__cell--text"}]},LoC4:function(t,e,i){"use strict";var n,s,r,o,a,l,u;i.r(e),n=i("mrSG"),s=i("OKnH"),r=i("vFOx"),o=i("xZ9U"),a=function(t){function e(e,i,n){var s=t.call(this,e,i,n)||this;return n.forEach(function(t){return t.table().addFormatters(i.formatters.concat(o.formatters))}),s}return Object(n.__extends)(e,t),e}(r.TablePage),l=i("Sweg"),i.d(e,"SingleTablePage",function(){return u}),u=function(t){function e(e){var i=this,n=$("<div>"),r={id:e.id,idProperty:"id"
},o=new l.Table(n,e.columns,r,e.priceFormatterFn),a=new s.a(o,e.source,e.subscriptions),u={id:e.id,name:e.title,headerCounter:!1,formatters:e.formatters};return i=t.call(this,n,u,[a])||this,a.start(),i}return Object(n.__extends)(e,t),e}(a)},OKnH:function(t,e,i){"use strict";var n,s,r;i.d(e,"a",function(){return r}),n=i("Eyy1"),s=i("b5Gw"),r=function(){function t(t,e,i,n){this._active=!1,this._created=!1,this._started=!1,this._fullUpdateDelegate=null,this._partialUpdateDelegate=null,this._deleteUpdateDelegate=null,this._noMoreEntries=!1,this._fullUpdateCancel=null,this._table=t,this._source=e,this._subscriptions=i,this._supportPagination=Boolean(n)}return t.prototype.start=function(){this._started||(this._subscribeUpdates(),this._started=!0)},t.prototype.stop=function(){this._started&&(this._unsubscribeUpdates(),this.reset(),this._started=!1)},t.prototype.isStarted=function(){return this._started},t.prototype.setActive=function(t){Object(n.assert)(!t||this._started,"Should be started first"),this._active!==t&&(this._active=t,this._active&&!this._created&&this._fullUpdate(),this._table.setActive(t))},t.prototype.isActive=function(){return this._active},t.prototype.reset=function(){this._active?this._fullUpdate():(this._deleteRows(),this._created=!1)},t.prototype.destroy=function(){this._unsubscribeUpdates(),this._table.destroy()},t.prototype.table=function(){return this._table},t.prototype._update=function(t){return!!this._created&&(this._table.addRow(t),!0)},t.prototype._deleteRow=function(t){this._created&&this._table.deleteRow(t)},t.prototype._deleteRows=function(){this._table.deleteRows(),this._created=!1},t.prototype._fullUpdate=function(){var t,e=this;return this._deleteRows(),this._noMoreEntries=!1,this._active?(this._fullUpdateCancel&&this._fullUpdateCancel(),t=Object(s.makeCancelable)(this._source()),this._fullUpdateCancel=t.cancel,t.promise.then(function(t){e._fullUpdateCancel=null,e._table.addRows(t),e._created=!0,e._onCreated()}).catch(function(t){if(!Object(s.isCancelled)(t))throw t})):Promise.resolve()},t.prototype._onCreated=function(){},t.prototype._loadMoreIfBottomVisible=function(t){var e,i,n=this;this._noMoreEntries||(e=this._table.rowsCount(),t&&t.to===e-1&&(i=this._table.rowIdByIndex(e-1),this._source(i).then(function(t){0!==t.length?n._table.addRows(t):n._noMoreEntries=!0})))},t.prototype._subscribeUpdates=function(){if(this._fullUpdateDelegate)throw new Error("should unsubscribe first");this._fullUpdateDelegate=this._subscriptions.fullUpdateDelegate,this._fullUpdateDelegate.subscribe(this,this._fullUpdate),this._partialUpdateDelegate=this._subscriptions.rowUpdateDelegate,this._partialUpdateDelegate.subscribe(this,this._update),this._supportPagination&&this._table.visibleRangeChanged.subscribe(this,this._loadMoreIfBottomVisible),this._subscriptions.rowDeleteDelegate&&(this._deleteUpdateDelegate=this._subscriptions.rowDeleteDelegate,this._deleteUpdateDelegate.subscribe(this,this._deleteRow))},t.prototype._unsubscribeUpdates=function(){
this._fullUpdateDelegate&&(this._fullUpdateDelegate.unsubscribe(this,this._fullUpdate),delete this._fullUpdateDelegate),this._partialUpdateDelegate&&(this._partialUpdateDelegate.unsubscribe(this,this._update),delete this._partialUpdateDelegate),this._deleteUpdateDelegate&&(this._deleteUpdateDelegate.unsubscribe(this,this._deleteRow),delete this._deleteUpdateDelegate),this._table.visibleRangeChanged.unsubscribe(this,this._loadMoreIfBottomVisible)},t}()},PGTi:function(t,e,i){},RoXi:function(t,e,i){"use strict";var n,s;i.r(e),i.d(e,"PriceColorer",function(){return s}),n=i("j1f4"),function(t){function e(t,e){return 0===t?e&&void 0!==e.neutral?e.neutral:n.color.black70:t>0?e&&void 0!==e.up?e.up:n.color.success:e&&void 0!==e.down?e.down:n.color.danger}t.formatSign=e,t.formatDiff=function(t,i){return e(i-t)},t.domDifference=function(t,e,i,n,s){function r(t){var e=document.createElement("span");return e.innerHTML=t,e}var o,a,l,u,c,d;if(void 0===i&&(i=0),void 0===n&&(n=""),void 0===s&&(s=""),!i)return $(r(t));if(l=null,(o=t+"").length===(a=e+"").length){for(u=0;u<o.length;u++)if(o.charAt(u)!==a.charAt(u)){l=u;break}}else l=Number("0");return null===l?$(r(o)):(c=r(o.substr(0,l)),(d=document.createElement("span")).className=i<0?n:s,d.appendChild(r(o.substr(l))),$(c).add(d))}}(s||(s={}))},Sweg:function(t,e,i){"use strict";i.r(e),function(t){function n(t,e){return t<e?1:t>e?-1:0}function s(t){return t||""}var r,o,a,l,u,c,d,h,p,_,f,b,v,m,g,y,w,C,O,S,T,j,x,F,D,U,P;i.d(e,"Table",function(){return P}),r=i("P5fv"),o=i("pfXf"),a=i("uOxu"),l=i("kcTO"),u=i("UX5W"),c=i("Vdly"),d=i("aIyQ"),h=i.n(d),p=i("QwKQ"),_=i("7XZl"),f=i("040A"),b=i("aLUT"),v=i("Eyy1"),m=i("Ialn"),g=i("v9OY"),y=Object(a.getLogger)("Table"),w=5e3,C=20,O='<div class="tv-dropdown tv-dropdown--inline tv-dropdown-behavior tv-data-table__dropdown-button-wrap js-init-switcher"><div class="tv-dropdown-behavior__button apply-common-tooltip js-dropdown-toggle" title="'+$.t("Column setup")+'">'+f+"</div></div>",S='<div class="tv-dropdown__body tv-dropdown-behavior__body tv-data-table__dropdown-wrap i-hidden"></div>',T='<div class="tv-dropdown-behavior__scroll"><div class="tv-dropdown-behavior__inscroll">{{#columns}}{{^isAlwaysVisible}}<div class="tv-dropdown-behavior__item js-column-item"><label data-field="{{property}}" class="tv-control-select__option-wrap js-fields-item"><label class="tv-control-checkbox"><input type="checkbox" name="{{property}}" class="js-field-checkbox tv-control-checkbox__input i-inited" {{#isVisible}}checked{{/isVisible}}><span class="tv-control-checkbox__box ">'+b+'</span><span class="tv-control-checkbox__ripple js-ripple"></span></label><span class="tv-control-checkbox__label tv-data-table__dropdown-label--breakable js-checkbox-label">{{label}}</span></label></div>{{/isAlwaysVisible}}{{/columns}}</div></div>',
j='<table class="tv-data-table {{className}}"><thead class="tv-data-table__thead"><tr class="tv-data-table__stroke">{{#columns}}<th class="tv-data-table__cell tv-data-table__cell--bold {{className}}"><span class="tv-data-table__cell-text{{^notSortable}} tv-data-table__sortable{{/notSortable}}{{#help}} apply-common-tooltip{{/help}}{{#htmlHelp}} common-tooltip-html{{/htmlHelp}}" {{#help}}title="{{help}}"{{/help}}>{{{label}}}</span></th>{{/columns}}</tr></thead>{{#bodies}}<tbody class="tv-data-table__tbody {{className}}">{{#strokes}}<tr class="tv-data-table__stroke">{{#cells}}<td class="tv-data-table__cell {{className}}"{{#colspan}}colspan="{{colspan}}"{{/colspan}}>{{#contain}}{{{contain}}}{{/contain}}</td>{{/cells}}</tr>{{/strokes}}</tbody>{{/bodies}}</table>',x='<tr class="tv-data-table__stroke {{rowClassName}}">{{#columns}}<td class="tv-data-table__cell {{className}}">{{#contain}}{{{contain}}}{{/contain}}</td>{{/columns}}</tr>',F='<td class="tv-data-table__cell {{className}}">{{#contain}}{{{contain}}}{{/contain}}</td>',D=7,U=38,P=function(){function e(t,e,i,n){var r,o,a=this;this.visibleRangeChanged=new h.a,this._data=[],this._dataIndicesCache={},this._delayedUpdateInterval=null,this._updateVisibleRowsTimeout=null,this._option=i||{},this._priceFormatterFn=n,this._columns=e,this._visibleColumns=this._createVisibleStore(this._option.id),this._idx=c.getInt(this._option.id+".sort._idx",this._option.idx||0),this._asc=c.getBool(this._option.id+".sort._asc",this._option.asc||!1),this._formatters={},this._group=this._option.group,this._defaultPriceFormatter=new l.PriceFormatter,this._cleanHead(),this._toggleVisibleSwitcher=$('<div><div class="tv-data-table__dropdown-button tv-data-table__dropdown-button-cross-align js-dropdown-button"></div></div>'),this._idProperty=s(this._option.idProperty||e[0].property),r=this._renderTable(j,s(this._option.className)),$(r).appendTo(t),this._head=this._option.className?$(t).find("."+this._option.className+" thead"):$(t).find("thead"),this._body=this._option.className?$(t).find("."+this._option.className+" tbody"):$(t).find("tbody"),this._initSwitcher(),o=this._head.find("tr").children(),this._columns.forEach(function(t,e){var i,n,s,r=o[e];for(a._isCellHidden(e)&&$(r).addClass("i-hidden"),i=r.querySelectorAll(".tv-data-table__sortable"),n=function(t){var n=i[t];n.addEventListener("click",function(t){t.preventDefault(),a._head.find(".tv-data-table__sortable--asc, .tv-data-table__sortable--desc").removeClass("tv-data-table__sortable--asc tv-data-table__sortable--desc"),a._idx===e?a._asc=!a._asc:(a._idx=e,a._asc=!1),n.classList.add(a._asc?"tv-data-table__sortable--asc":"tv-data-table__sortable--desc"),c.setValue(a._option.id+".sort._idx",a._idx),c.setValue(a._option.id+".sort._asc",a._asc),a._sortViewImpl()})},s=0;s<i.length;s++)n(s)}),this._head.find("th:eq("+this._idx+") .tv-data-table__sortable").addClass(this._asc?"tv-data-table__sortable--asc":"tv-data-table__sortable--desc"),this._sortTimeout=null,this._visibleRange=null,this._delayedData={},this._active=!1}
return e.prototype.setActive=function(t){this._active!==t&&(this._active=t,this._updateVisibleRows())},e.prototype.destroy=function(){this._sortTimeout&&clearTimeout(this._sortTimeout),this._delayedUpdateInterval&&clearInterval(this._delayedUpdateInterval),this._updateVisibleRowsTimeout&&clearTimeout(this._updateVisibleRowsTimeout)},e.prototype.addRow=function(e,i){var n,s,r,o,a,l,u,c,d=this;if(void 0===i&&(i=!0),n=e[this._idProperty],-1===(s=this._findIndexById(n))){if(o=0,i)for(a=this._data.length-1;a>=0;a--)-1===this._compare(e,this._data[a])&&(r=this._data[a],o=a);l=t.render(x,{rowClassName:e.type?"tv-data-table__stroke--hl tv-data-table__stroke--hl-"+e.type:""}),void 0===(u=Object.assign({$row:$(l)},e)).priceFormatter&&this._resolveFormatter(u),c=u.priceFormatter||this._defaultPriceFormatter,this._columns.forEach(function(e,i){var n,s=$(t.render(F,{contain:""}));s[0].className+=" "+e.className,n=(e.formatter&&d._formatters[e.formatter]?d._formatters[e.formatter]:d._extractValue)({value:e.property?u[e.property]:u,priceFormatter:c,row:u,$container:s}),e.fixedWidth&&(n=$('<span class="js-fixedwidth inlined">').append(n)),"object"==typeof n?d._append(s,n):s.append(n),d._isCellHidden(i)&&s.addClass("i-hidden"),d._append(u.$row,s)}),r?(this._data.splice(o,0,u),u.$row.insertBefore(r.$row)):(this._data.push(u),u.$row.appendTo(this._body)),this._clearDataIndicesCache(),this.updateVisibleContent()}else this._scheduleUpdateRow(s,e)},e.prototype.updateRowById=function(t,e){var i,n=this._findIndexById(t);-1!==n?(i=this._delayedData[t]||this._data[n],this._scheduleUpdateRow(n,Object.assign({},i,e))):y.logWarn("Id "+t+" not found")},e.prototype.addRows=function(t){var e=this;t.forEach(function(t){return e.addRow(t,!1)}),this._sortViewImpl()},e.prototype.deleteRow=function(t){var e=this._findIndexById(t),i=this._data[e];-1!==e&&(i.$row.remove(),this._data.splice(e,1),this.updateVisibleContent()),delete this._delayedData[t],this._clearDataIndicesCache()},e.prototype.updateVisibleContent=function(){var t,e=this;this._updateVisibleRowsTimeout&&clearTimeout(this._updateVisibleRowsTimeout),t=100,this._updateVisibleRowsTimeout=setTimeout(function(){return e._updateVisibleRows()},t)},e.prototype.deleteRows=function(){this._removeAllChildren(this._body[0]),this._data=[],this._clearDataIndicesCache(),this._delayedData={},this._updateVisibleRows()},e.prototype.highlightRowById=function(t){var e=this._rowElementById(t);e&&e.highlight(2)},e.prototype.setRowActiveById=function(t,e){var i=this.rowById(t);i&&this._setRowActive(i,e)},e.prototype.setRowActiveByFilter=function(t){var e=this;this._data.forEach(function(i){return e._setRowActive(i,t(i))})},e.prototype.addFormatter=function(t,e){this._formatters[t]=e},e.prototype.addFormatters=function(t){var e=this;t.forEach(function(t){return e.addFormatter(t.name,t.format)})},e.prototype.isRowInViewport=function(t){if(!this._active)return!1;if(this._updateVisibleRowsTimeout&&this._updateVisibleRows(),!this._visibleRange)return!0;var e=this._findIndexById(t)
;return e>=this._visibleRange.from&&e<=this._visibleRange.to},e.prototype.setColumnAvailable=function(t,e){try{this._visibleColumns[this._getColumnIdx(t)].forceInvisible=!e,this._applyColumnVisibility(t)}catch(e){y.logWarn("Column "+t+" not found")}},e.prototype.setRowLinkedByFilter=function(t){var e=this;this._data.forEach(function(i){return e._setRowLinked(i,t(i))})},e.prototype.setRowLinkedById=function(t,e){var i=this.rowById(t);i&&this._setRowLinked(i,e)},e.prototype.rowById=function(t){var e=this._findIndexById(t);if(-1!==e)return this._data[e]},e.prototype.rowIdAtEvent=function(t){var e=$(t.srcElement||t.target).parents().andSelf(),i=this._data.find(function(t){return e.is(t.$row)});if(i)return i[this._idProperty]},e.prototype.rowsCount=function(){return this._data.length},e.prototype.rowIdByIndex=function(t){if(t<0||t>this.rowsCount()-1)throw new Error("No table entry for such index");return this._data[t][this._idProperty]},e.prototype._setRowLinked=function(t,e){t&&t.isRowLinked!==e&&(t.isRowLinked=e,t.$row[0].classList.toggle("tv-data-table__stroke--hl",e),t.$row[0].classList.toggle("tv-data-table__stroke--hl-active",e))},e.prototype._setRowActive=function(t,e){t&&t.isRowActive!==e&&(t.isRowActive=e,this._applyRowActivityToElement(t.$row,!!t.isRowActive))},e.prototype._append=function(t,e){t[0].appendChild(e[0])},e.prototype._resolveFormatter=function(t){var e=this;this._priceFormatterFn&&this._priceFormatterFn(t).then(function(i){var n=e._findIndexById(t[e._idProperty]);-1!==n&&(e._data[n].priceFormatter=i,e._updateRow(Object.assign({},e._data[n]),n,!0))})},e.prototype._updateVisibleRows=function(){this._updateVisibleRowsTimeout&&(clearTimeout(this._updateVisibleRowsTimeout),delete this._updateVisibleRowsTimeout);var t=this._visibleRange;0!==this._data.length&&this._active?this._visibleRange=Object(u.a)(this._visibleRange,this._data):this._visibleRange=null,(!!t!=!!this._visibleRange||this._visibleRange&&(this._visibleRange.from!==Object(v.ensure)(t).from||this._visibleRange.to!==Object(v.ensure)(t).to))&&(y.logDebug(this._option.id+" visible rows changed. Previous: from "+(t&&t.from)+", to "+(t&&t.to)+". New: from "+(this._visibleRange&&this._visibleRange.from)+", to "+(this._visibleRange&&this._visibleRange.to)+"."),this._forceUpdateDelayedData(this._visibleRange),this.visibleRangeChanged.fire(this._visibleRange))},e.prototype._removeAllChildren=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype._scheduleUpdateRow=function(t,e){var i=this;this._visibleRange&&t>=this._visibleRange.from-1&&t<=this._visibleRange.to+1?this._updateRow(e,t):(this._delayedData[e[this._idProperty]]=e,this._delayedUpdateInterval||(this._delayedUpdateInterval=setInterval(function(){return i._forceUpdateDelayedData(null,C)},w)))},e.prototype._forceUpdateDelayedData=function(t,e){var i,n,s,r,o,a=0,l=Object.keys(this._delayedData);for(i=0,n=l;i<n.length&&(s=n[i],r=this._delayedData[s],-1!==(o=this._findIndexById(r[this._idProperty]))?(!t||o>=t.from-1&&o<=t.to+1)&&(this._updateRow(r,o),delete this._delayedData[s],
a++):y.logWarn("Row has been removed"),!e||a!==e);i++);!this._delayedUpdateInterval||e&&0!==Object.keys(this._delayedData).length||(clearInterval(this._delayedUpdateInterval),delete this._delayedUpdateInterval)},e.prototype._updateRow=function(e,i,n){var r,o,a,l,u=this;if(void 0===n&&(n=!1),void 0===i||-1===i)throw Error("row not exist");r=this._data[i],o=!!this._group&&this._group(r)!==this._group(e),a=r.priceFormatter||this._defaultPriceFormatter,l=$.extend({},r),this._columns.forEach(function(i,c){var d,h,p,_,f,b,v=s(i.modificationProperty||i.property);(n||v&&l[v]!==e[v])&&(c===u._idx&&(o=!0),d=r[v],r[v]=e[v],h=r.$row.find("td:eq("+c+")"),p=u._elementFormatterForColumn(i),_=i.property?r[i.property]:r,(f=$(t.render(F,{contain:""})))[0].className+=" "+i.className,b=p({value:_,priceFormatter:a,row:e,prevValue:i.highlightDiff?d:null,$container:f}),i.fixedWidth&&(b=$("<span>").addClass("js-fixedwidth tv-data-table__cell--inlined").css("min-width",h.find(".js-fixedwidth").width()).append(b)),u._isCellHidden(c)&&f.addClass("i-hidden"),"object"==typeof b&&1===b.length?u._append(f,b):f.append(b),f.insertBefore(h),h.remove())}),o&&this._sortView(),delete e.$row,Object.assign(r,e)},e.prototype._elementFormatterForColumn=function(t){return t.formatter&&this._formatters[t.formatter]?this._formatters[t.formatter]:this._extractValue},e.prototype._rowElementById=function(t){var e=this.rowById(t);return e&&e.$row},e.prototype._compare=function(t,e){var i,r=s(this._columns[this._idx].sortProp||this._columns[this._idx].property),o=s(t[r]),a=s(e[r]),l=0;return this._hasGroups()&&(l=n(this._group(t),this._group(e))),l||(l=t.isTotalRow?1:e.isTotalRow?-1:0),l||(l=n(o,a),this._asc&&(l=-l)),l||(l=n(o=s(t[i=s(this._columns[0].sortProp||this._columns[0].property)]),a=s(e[i]))),l},e.prototype._hasGroups=function(){return"function"==typeof this._group},e.prototype._sortViewImpl=function(){var t,e,i;for(this._data.sort(this._compare.bind(this)),t=null,e=this._data.length-1;e>=0;e--)i=this._data[e].$row[0],t&&t.parentNode&&t.parentNode.insertBefore(i,t),t=i;this._clearDataIndicesCache()},e.prototype._sortView=function(){var t=this;this._sortTimeout||(this._sortTimeout=setTimeout(function(){t._sortViewImpl(),t._sortTimeout=null},1e3))},e.prototype._applyRowActivityToElement=function(t,e){t.toggleClass("tv-data-table__stroke--grayed",e)},e.prototype._cleanHead=function(){var t=this._columns.length-1,e=this._columns[t];-1!==e.label.toLowerCase().indexOf("dropdown")&&(e.label="")},e.prototype._renderTable=function(e,i){var n=this._columns.length-1,r=this._columns[n];return""===r.label?(r.label=this._toggleVisibleSwitcher.html(),this._visibleColumns[n].isAlwaysVisible=!0):(this._columns.push({label:this._toggleVisibleSwitcher.html(),className:"tv-data-table__cell--buttons-cell",notSortable:!0,fixedWidth:!1,property:"dropdown",formatter:""}),this._visibleColumns.push({isVisible:!0,isAlwaysVisible:!0,property:s(r.property),label:""})),t.render(e,{columns:this._columns,className:"tv-data-table--trading-cqg "+i,bodies:[{className:""}]})},
e.prototype._initSwitcher=function(){var e,i,n,s,r=this,o=$(t.render(T,{columns:this._visibleColumns})),a=$(S),l=$(O),u=null,c=null,d=(n=this._visibleColumns.length,s=this._visibleColumns.filter(function(t){return t.isAlwaysVisible}).length,n-s>D);o.appendTo(a),a.appendTo(l),d&&(e=$('<div class="tv-data-table__dropdown-search-wrap">').prependTo(a),u=$('<input type="text" placeholder='+$.t("Search")+' class="tv-data-table__dropdown-search-input">').appendTo(e),c=$('<div class="tv-control-select__option-wrap tv-data-table__search-no-matches js-hidden">'+$.t("No matches")+"</div>").appendTo(a),this._initSearchInput(a,o,l,u,c,d)),this._initDropdown(o,a,l,u,d),d&&u&&this._handleDropdownClosed(o,a,l,d,u,Object(v.ensure)(c)),l.on("change",".js-fields-item",function(t){r._handleChecked($(t.currentTarget),o)}),i=this._head.find(".js-dropdown-button"),l.appendTo(i),this._countAndSetPosition(a,l),this._countAndSetHeight(o,a,l,d)},e.prototype._handleChecked=function(t,e){var i=t.data("field"),n=t.find(".js-field-checkbox"),s=!n[0].checked,r=this._getColumnIdx(i);s?this._hideColumn(r):this._showColumn(r),e.find(":checked").prop("disabled",this._isLastColumnVisible())},e.prototype._handleDropdownClosed=function(t,e,i,n,s,r){var o=this;i.on("afterCloseMenu",function(){if(""!==s.val()){var a=t.find(".js-column-item").size()*U;s.val(""),t.find(".js-column-item").toggleClass("js-hidden",!1),r.toggleClass("js-hidden",!0),t.toggleClass("js-hidden",!1),t.css("height",a+"px"),o._countAndSetHeight(t,e,i,n)}})},e.prototype._initDropdown=function(t,e,i,n,s){var r=this;i.tvDropdown(i,{scroll:!0}).on("beforeOpenMenu",function(){r._countAndSetPosition(e,i),r._countAndSetHeight(t,e,i,s),r._isLastColumnVisible()&&t.find(":checked").prop("disabled",!0)}),n&&i.on("afterOpenMenu",function(){n.first().focus()})},e.prototype._initSearchInput=function(t,e,i,n,s,r){var o=this;n.on("change input",function(){var a,l,u,c,d,h=n.val().trim().toLowerCase(),p=e.find(".js-column-item");if(0!==h.length)for(a=p.length,l=0;l<a;l++)u=-1===$(p[l]).find(".js-checkbox-label").text().toLowerCase().indexOf(h),$(p[l]).toggleClass("js-hidden",u);else p.removeClass("js-hidden");d=!!(c=e.find(".js-column-item:not(.js-hidden)").size()),s.toggleClass("js-hidden",d),d&&e.css("height",U*c+"px"),o._countAndSetHeight(e,t,i,r)})},e.prototype._countAndSetHeight=function(t,e,i,n){var s=$(document.getElementsByClassName("js-table-container")[0]),r=s.height(),o=s.offset(),a=55,l=n?a:0,u=10,c=U*t.find(".js-column-item:not(.js-hidden)").size(),d=parseInt(e.css("top"))-(o?o.top:0);0<d?c>r-d?t.css("height",r-d-l-u+"px"):t.css("height",c+"px"):c>r-l-u?t.css("height",r-l-u+"px"):t.css("height",c+"px"),i.tvDropdown("updateScroll")},e.prototype._countAndSetPosition=function(t,e){var i=e[0].getBoundingClientRect(),n=t.width();t.css({left:Object(m.isRtl)()?i.left:i.left-n+37,right:"auto",top:i.top-25})},e.prototype._createVisibleStore=function(t){var e,i,n,r=[],o=this._columns.filter(function(t){return t.hideByDefault}).map(function(t){return t.property
}),a=c.getJSON(t+".invisibleColumns",o),l=this._columns.length;for(e=0;e<l;e++)i=this._columns[e],n=-1!==a.indexOf(i.property),r.push({isVisible:!n,isAlwaysVisible:!0===i.notHideable,property:s(i.property),label:i.label});return r},e.prototype._toggleVisibleState=function(t,e){this._visibleColumns[this._getColumnIdx(t)].isVisible=e;c.setJSON(this._option.id+".invisibleColumns",this._visibleColumns.reduce(function(t,e){return e.isVisible||t.push(e.property),t},[]))},e.prototype._showColumn=function(t){this._toggleVisibleState(this._visibleColumns[t].property,!0),this._applyColumnVisibility(this._visibleColumns[t].property)},e.prototype._isLastColumnVisible=function(){return 1===this._visibleColumns.filter(function(t){return t.isVisible&&t.label&&t.property&&"dropdown"!==t.property}).length},e.prototype._hideColumn=function(t){this._toggleVisibleState(this._visibleColumns[t].property,!1),this._applyColumnVisibility(this._visibleColumns[t].property)},e.prototype._applyColumnVisibility=function(t){var e=this._getColumnIdx(t),i=this._head.find("th:eq("+e+")"),n=$("td:nth-child("+(e+1)+")",this._body),s=this._visibleColumns[e],r=(s.isVisible||s.isAlwaysVisible)&&!s.forceInvisible;r?(i.removeClass("i-hidden"),n.removeClass("i-hidden")):(i.addClass("i-hidden"),n.addClass("i-hidden"))},e.prototype._isCellHidden=function(t){var e=this._visibleColumns[t];return!e.isVisible||!!e.forceInvisible},e.prototype._getColumnIdx=function(t){var e,i=this._visibleColumns.length;for(e=0;e<i;e++)if(this._visibleColumns[e].property===t)return e;throw new Error("Unknown column")},e.prototype._extractValue=function(t){return t.value},e.prototype._findIndexById=function(t){var e,i,n=this._dataIndicesCache[t];return void 0!==n?n:(e=this._idProperty,i=this._data.findIndex(function(i){return i[e]===t}),this._dataIndicesCache[t]=i,i)},e.prototype._clearDataIndicesCache=function(){this._dataIndicesCache={}},e}()}.call(this,i("OiQe"))},T7KF:function(t,e,i){"use strict";var n,s,r,o,a,l;i.r(e),i.d(e,"TitledTablesPage",function(){return l}),n=i("mrSG"),s=i("vFOx"),r=i("OKnH"),o=i("Sweg"),a=i("xZ9U"),l=function(t){function e(e){var i,n=$("<div>"),s=[];return e.tables.forEach(function(t){var e,i=$("<div>"),l=new o.Table(i,t.columns,t.options,t.priceFormatterFn);t.title&&$('<h3 class="tv-data-table__header">').text(t.title).appendTo(n),i.appendTo(n),e=new r.a(l,t.source,t.subscriptions,t.flags&&t.flags.supportPagination),s.push(e),l.addFormatters(t.formatters.concat(a.formatters)),e.start()}),i={id:e.id,name:e.title,headerCounter:!1},t.call(this,n,i,s)||this}return Object(n.__extends)(e,t),e}(s.TablePage)},UX5W:function(t,e,i){"use strict";function n(t,e){return!d(t)}function s(t,e){return!d(e)}function r(t,e){if(t){if(d(e[t.from]))return t.from;if(d(e[t.to]))return t.to}return function t(e,i,n){var s,r;return n<i?NaN:d(e[s=i+(n-i+1>>1)])?s:(r=t(e,i,s-1),isNaN(r)?t(e,s+1,n):r)}(e,0,e.length-1)}function o(t,e){var i,o,a=r(t,e);return isNaN(a)?null:(i=Object(l.lowerbound)(e,1,n,0,a+1),o=Object(l.upperbound)(e,1,s,a+1,e.length)-1,isNaN(i)||isNaN(o)?null:{
from:Math.max(0,i),to:Math.min(o,e.length-1)})}var a,l,u,c,d;i.d(e,"a",function(){return o}),a=i("P5fv"),l=i("Y7w9"),u=i("lt86"),c=i.n(u),d=function(t){return t&&c.a.isVisible(t.$row)}},UpRv:function(t,e,i){"use strict";i.r(e),function(t){function n(t,e,i,n,s,r){var o={id:t,className:"positions",idProperty:"id"},a=new d.Table(e,s,o,r);return new w(a,i,n)}var s,r,o,a,l,u,c,d,h,p,_,f,b,v,m,g,y,w,C;i.d(e,"PositionPage",function(){return C}),s=i("mrSG"),r=i("xZ9U"),o=i("0sbS"),a=i("N22A"),l=i("pIOw"),u=i("aIyQ"),c=i.n(u),d=i("Sweg"),h=i("Eyy1"),p=i("vFOx"),_=i("yB0V"),f=i("4qhP"),i("YFKU"),b=i("Vdly"),v=i("JOqt"),m="Trading.PositionsTable.Filter",g='\n\t<div>\n\t\t<div class="tv-tabs tv-tabs--no-border tv-tabs--secondary-active tv-tabs--no-margin tv-tabs--semi-compact js-filter-wrapper">\n\t\t\t{{#filter}}\n\t\t\t\t<div class="tv-tabs__tab {{id}}">\n\t\t\t\t\t<div class="tv-tabs__wrap">\n\t\t\t\t\t\t<div class="counter">\n\t\t\t\t\t\t\t<div class="counter__text">{{name}}</div>\n\t\t\t\t\t\t\t<div class="counter__count counter__count--{{id}}">0</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{{/filter}}\n\t\t</div>\n\t</div>',y=function(){function t(t,e,i){this._totalCount=0,this._recalcCountsDelayed=Object(v.debounce)(this._recalcCounts.bind(this),100),this._source=t,this._rowUpdateDelegate=e,this._fullUpdateDelegate=i,this.countChanged=new c.a}return t.prototype.start=function(){this._rowUpdateDelegate.subscribe(this,this._recalcCountsDelayed),this._fullUpdateDelegate.subscribe(this,this._recalcCountsDelayed),this._recalcCounts()},t.prototype.stop=function(){this._rowUpdateDelegate.unsubscribe(this,this._recalcCountsDelayed),this._fullUpdateDelegate.unsubscribe(this,this._recalcCountsDelayed)},t.prototype._recalcCounts=function(){var t=this;this._source().then(function(e){var i=e.filter(function(t){return Object(f.isPositionActive)(t)});t._totalCount!==i.length&&(t._totalCount=i.length,t.countChanged.fire(t._totalCount))})},t}(),w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.__extends)(e,t),e.prototype._update=function(e){return!!t.prototype._update.call(this,e)&&(Object(f.isPositionActive)(e)||this._deleteRow(e.id),!0)},e}(_.LinkingTableController),C=function(e){function i(t){var i,s,a,l,u,c,d,p,_=this,f=$("<div>"),v={id:"positions",name:window.t("Positions"),headerCounter:!0},g=$("<div>"),w=n(t.brokerId+".positions",g,t.positions.source,Object.assign({},t.positions.subscriptions,{fullUpdateDelegate:t.fullUpdateDelegate}),t.positions.columns,t.priceFormatterFn);return f.append(g),i=[w],s=null,a=null,t.trades&&(s=$("<div>"),a=n(t.brokerId+".trades",s,t.trades.source,Object.assign({},t.trades.subscriptions,{fullUpdateDelegate:t.fullUpdateDelegate}),t.trades.columns,t.priceFormatterFn),f.append(s),i.push(a)),(_=e.call(this,f,v,i)||this)._$positionsTableContainer=g,_._$tradesTableContainer=s,_._positionsTable=w,_._tradesTable=a,l=t.formatters||[],_._fullUpdateDelegate=t.fullUpdateDelegate,_._posSubscriptions=t.positions.subscriptions,
_._checkSupportTrades=t.checkSupportTrades,_._storeFunctions(t),u={name:"posSettings",format:function(t){var e=_._closePositionFn?_._closePositionFn.bind(null,t.row.id):null,i=_._editPositionFn?_._editPositionFn.bind(null,t.row.id):null;return $(Object(o.getSettingsButtons)(e,window.t("Close",{context:"position"}),i,window.t("Protect Position..."),t.row.message))}},w.table().addFormatters([u].concat(r.formatters).concat(l)),t.trades?(c={name:"tradeSettings",format:function(t){var e=_._closeTradeFn&&t.row.canBeClosed?_._closeTradeFn.bind(null,t.row.id):null,i=_._editTradeFn?_._editTradeFn.bind(null,t.row.id):null;return $(Object(o.getSettingsButtons)(e,window.t("Close",{context:"position"}),i,window.t("Protect Position...")))}},Object(h.ensure)(a).table().addFormatters([c].concat(r.formatters).concat(l)),_._tradesCounter=new y(t.trades.source,t.trades.subscriptions.countUpdateDelegate,_._fullUpdateDelegate)):_._tradesCounter=null,_._positionsCounter=new y(t.positions.source,_._posSubscriptions.countUpdateDelegate,_._fullUpdateDelegate),_._constructFilter(),_._checkShowFilter(),_._subscribeUpdates(),d=b.getInt(m,0),p=_._checkSupportTrades()?d:1,_._filterTabs.setActivePage(p),_._selectPage(p),_}return Object(s.__extends)(i,e),i.prototype.contextItems=function(t){var e,i,n=this._activeTableController().table(),s=n.rowIdAtEvent(t);return s?(e=Object(h.ensureDefined)(n.rowById(s)),i=[],0===this._filterTabs.index()?(this._editTradeFn&&i.push({text:window.t("Protect Position..."),action:this._editTradeFn.bind(null,s)}),this._closeTradeFn&&e.canBeClosed&&i.push({text:window.t("Close Position"),action:this._closeTradeFn.bind(null,s)})):(this._editPositionFn&&i.push({text:window.t("Protect Position..."),action:this._editPositionFn.bind(null,s)}),this._closePositionFn&&i.push({text:window.t("Close Position"),action:this._closePositionFn.bind(null,s)}),this._reversePositionFn&&i.push({text:window.t("Reverse Position"),action:this._reversePositionFn.bind(null,s)})),i):[]},i.prototype.topline=function(){return this._filter},i.prototype.destroy=function(){this._unsubscribeUpdates(),e.prototype.destroy.call(this)},i.prototype._onActiveChanged=function(t){t?this._activeTableController().setActive(!0):(this._positionsTable.setActive(!1),this._tradesTable&&this._tradesTable.setActive(!1))},i.prototype._onPositionsCountChanged=function(t){this._setCount(t),this._setTabCount(1,t)},i.prototype._onTradesCountChanged=function(t){this._setTabCount(0,t)},i.prototype._setTabCount=function(t,e){this._filter.find(".counter .counter__count")[t].innerHTML=String(e)},i.prototype._activeTableController=function(){return this._checkSupportTrades()&&0===this._filterTabs.index()?Object(h.ensure)(this._tradesTable):this._positionsTable},i.prototype._subscribeUpdates=function(){this._positionsCounter.start(),this._positionsCounter.countChanged.subscribe(this,this._onPositionsCountChanged),this._tradesCounter&&(this._tradesCounter.start(),this._tradesCounter.countChanged.subscribe(this,this._onTradesCountChanged)),
this._filterTabs.tabChanged.subscribe(this,this._selectPage),this._fullUpdateDelegate.subscribe(this,this._checkShowFilter)},i.prototype._unsubscribeUpdates=function(){this._positionsCounter.stop(),this._positionsCounter.countChanged.unsubscribe(this,this._onPositionsCountChanged),this._tradesCounter&&(this._tradesCounter.stop(),this._tradesCounter.countChanged.unsubscribe(this,this._onTradesCountChanged)),this._filterTabs.tabChanged.unsubscribe(this,this._selectPage),this._fullUpdateDelegate.unsubscribe(this,this._checkShowFilter)},i.prototype._constructFilter=function(){this._filter=$(t.render(g,{filter:[{id:"type-individual",name:window.t("Individual Positions")},{id:"type-net",name:window.t("Net Positions")}]})),this._filterTabs=new l.Tabs(this._filter.find(".js-filter-wrapper").get(0),void 0,{noSlider:!0})},i.prototype._checkShowFilter=function(){var t=this._filter.find(".js-filter-wrapper");this._checkSupportTrades()?t.removeClass("js-hidden"):(t.addClass("js-hidden"),this._tradesTable&&this._tradesTable.stop())},i.prototype._selectPage=function(t){var e=1===t;e?this._positionsTable.start():this._tradesTable&&this._tradesTable.start(),this._$positionsTableContainer.toggleClass("js-hidden",!e),this._$tradesTableContainer&&this._$tradesTableContainer.toggleClass("js-hidden",e),this._positionsTable.setActive(e),this._tradesTable&&this._tradesTable.setActive(!e),b.setValue(m,t)},i.prototype._storeFunctions=function(t){var e,i,n,s,r,o=Object(h.ensure)(Object(a.tradingService)()),l="Positions Page",u=t.positions.closeFn;this._closePositionFn=u?function(t){return o.trackEvent(l,"Close Position"),u(t)}:null,e=t.positions.editFn,this._editPositionFn=e?function(t){return o.trackEvent(l,"Edit Position"),e(t)}:null,i=t.positions.reverseFn,this._reversePositionFn=i?function(t){return o.trackEvent(l,"Reverse Position"),i(t)}:null,(n=t.trades)&&(s=n.closeFn,this._closeTradeFn=s?function(t){return o.trackEvent(l,"Close Trade"),s(t)}:null,r=n.editFn,this._editTradeFn=r?function(t){return o.trackEvent(l,"Edit Trade"),r(t)}:null)},i}(p.TablePage)}.call(this,i("OiQe"))},drKH:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 9" width="9" height="9"><path fill="currentColor" d="M9 4.5A4.5 4.5 0 0 1 4.5 9 4.5 4.5 0 0 1 0 4.5 4.5 4.5 0 0 1 4.5 0 4.5 4.5 0 0 1 9 4.5z"/><path fill="#fff" d="M4.768 1.527c.131 0 .243.047.334.141a.444.444 0 0 1 .141.33.461.461 0 0 1-.14.339.455.455 0 0 1-.335.137.468.468 0 0 1-.471-.475c0-.132.045-.244.137-.335a.455.455 0 0 1 .334-.137zm-.42 5.946v-3.67h-.591V3.16h1.357v4.314z"/></svg>'},f11d:function(t,e,i){"use strict";(function(n){function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),
e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a,l,u,c,d,h,p,_,f,b,v,m,g,y,w,C,O,S,T,j,x,F,D,U,P;Object.defineProperty(e,"__esModule",{value:!0}),a=function t(e,i,n){var s,r,o;return null===e&&(e=Function.prototype),void 0===(s=Object.getOwnPropertyDescriptor(e,i))?null===(r=Object.getPrototypeOf(e))?void 0:t(r,i,n):"value"in s?s.value:void 0!==(o=s.get)?o.call(n):void 0},l=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i("xZ9U"),c=i("0sbS"),d=i("N22A"),h=i("OekH"),p=i("4qhP"),_=i("pIOw"),f=i("aIyQ"),b=(P=f)&&P.__esModule?P:{default:P},v=i("yB0V"),m=i("vFOx"),g=i("Sweg"),y=i("qahq"),i("YFKU"),w=i("JOqt").debounce,C=0,O=-1,S="Orders Page",T=function(){function t(e,i,n,s){o(this,t),this._source=e,this._totalCount=0,this._activeCount=0,this._orderUpdateDelegate=i,this._fullUpdateDelegate=n,this._possibleStatuses=s,this._statusCount=this._emptyStatuses(),this.countChanged=new b.default,this._recalcCountsDelayed=w(this._recalcCounts.bind(this),100)}return l(t,[{key:"_emptyStatuses",value:function(){var t={};return this._possibleStatuses.forEach(function(e){t[e]=0}),t}},{key:"start",value:function(){this._orderUpdateDelegate.subscribe(this,this._recalcCountsDelayed),this._fullUpdateDelegate.subscribe(this,this._recalcCountsDelayed),this._recalcCounts()}},{key:"stop",value:function(){this._statusCount=this._emptyStatuses(),this._orderUpdateDelegate.unsubscribe(this,this._recalcCountsDelayed),this._fullUpdateDelegate.unsubscribe(this,this._recalcCountsDelayed)}},{key:"_recalcCounts",value:function(){var t=this,e=this._emptyStatuses();this._source().then(function(i){var n=0;i.forEach(function(t){e[t.status]++,t.status!==h.ORDERSTATUS.WORKING&&t.status!==h.ORDERSTATUS.INACTIVE||n++}),t._possibleStatuses.forEach(function(i){e[i]!==t._statusCount[i]&&(t._statusCount[i]=e[i],t.countChanged.fire(i,t._statusCount[i]))}),t._totalCount!==i.length&&(t._totalCount=i.length,t.countChanged.fire(C,t._totalCount)),t._activeCount!==n&&(t._activeCount=n,t.countChanged.fire(O,t._activeCount))})}}]),t}(),j=function(t){function e(t,i,n,r){o(this,e);var a=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n,r));return a._filterStatus=null,a}return r(e,y.AbstractObjectsFilter),l(e,[{key:"setFilterStatus",value:function(t){this._filterStatus=t,this.isStarted()&&(this.stop(),this.start())}},{key:"filterStatus",value:function(){return this._filterStatus}},{key:"_satisfy",value:function(t){return!this._filterStatus||t.status===this._filterStatus}}]),e}(),x=function(t){function e(t,i,n,r,a){o(this,e);var l=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n,r));return l._functor=a,l}return r(e,y.AbstractObjectsFilter),l(e,[{key:"_satisfy",value:function(t){return this._functor(t)}}]),e}(),F=function(){function t(e,i,n){
o(this,t),this._source=e,this._rowUpdateDelegate=i,this._fullUpdateDelegate=n,this._orders=[],this.newStatusDelegate=new b.default}return l(t,[{key:"start",value:function(){var t=this;this._source().then(function(e){t._orders=e.slice(0),t._rowUpdateDelegate.subscribe(t,t._onRowUpdated),t._fullUpdateDelegate.subscribe(t,t._onFullUpdate)})}},{key:"stop",value:function(){this._fullUpdateDelegate.unsubscribe(this,this._onFullUpdate),this._rowUpdateDelegate.unsubscribe(this,this._onRowUpdated),this._orders=[]}},{key:"_onFullUpdate",value:function(){this.stop(),this.start()}},{key:"_onRowUpdated",value:function(t){var e=this._orders.find(function(e){return e.id===t.id});e&&e.status===t.status||(this.newStatusDelegate.fire(t),e?e.status=t.status:this._orders.push($.extend({},t)))}}]),t}(),D=function(t){function e(t,i,n,r){o(this,e);var a=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n));return a._filterStatusGetter=r,a}return r(e,v.LinkingTableController),l(e,[{key:"fullUpdate",value:function(){return this._fullUpdate()}},{key:"_onCreated",value:function(){var t=this;a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onCreated",this).call(this),this.table().setRowActiveByFilter(function(e){return!t._filterStatusGetter()&&!(0,p.isOrderActive)(e.status)})}},{key:"_update",value:function(t){return!!a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_update",this).call(this,t)&&(this.table().setRowActiveById(t.id,!this._filterStatusGetter()&&!(0,p.isOrderActive)(t.status)),!0)}}]),e}(),U=function(t){function e(t){var i,r,a,l,h,f,b,v,m,y,w,C,O,U;return o(this,e),i=t.formatters||[],r=new x(t.source,t.subscriptions.rowUpdateDelegate,null,t.subscriptions.fullUpdateDelegate,t.filter),a=new T(r.filterSource.bind(r),r.filterObjectUpdateDelegate,r.filterFullUpdateDelegate,t.possibleOrderStatuses),l=new j(r.filterSource.bind(r),r.filterObjectUpdateDelegate,r.filterObjectDeleteDelegate,r.filterFullUpdateDelegate),h=t.subscriptions.fullUpdateDelegate,t.source=l.filterSource.bind(l),t.subscriptions.rowUpdateDelegate=l.filterObjectUpdateDelegate,t.subscriptions.rowDeleteDelegate=l.filterObjectDeleteDelegate,t.subscriptions.fullUpdateDelegate=l.filterFullUpdateDelegate,f=$("<div>"),b=Object.assign({id:t.tableId,className:"orders",group:function(t){return+(0,p.isOrderActive)(t.status)},idProperty:"id"},t.tableOptions),v=new g.Table(f,t.columns,b,t.priceFormatterFn),m={id:t.id,name:t.title,headerCounter:t.headerCounter},y=new D(v,t.source,t.subscriptions,function(){return w._ordersFilter.filterStatus()}),(w=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,f,m,[y])))._ordersTable=y,w._globalFullUpdateDelegate=h,w._statusWatcher=new F(r.filterSource.bind(r),r.filterObjectUpdateDelegate,r.filterFullUpdateDelegate),w._orderPreFilter=r,w._ordersFilter=l,w._statusesCount=a,w._activeCount=0,w._highlightChanges=t.highlightChanges,w._possibleOrderStatuses=t.possibleOrderStatuses,w._columns=t.columns,w._pendingNewOrdersByStatuses={},w._closeFn=function(){return(0,
d.tradingService)().trackEvent(S,"Cancel Order"),t.cancelFn.apply(t,arguments)},w._editFn=null!==t.modifyFn?function(){return(0,d.tradingService)().trackEvent(S,"Edit Order"),t.modifyFn.apply(t,arguments)}:null,C={name:"orderSettings",format:function(t){var e,i,n=t.value;return(0,p.isOrderActive)(n.status)?(e=w._closeFn?function(){return w._closeFn(n.id)}:null,i=w._editFn?function(){return w._editFn(n)}:null,$((0,c.getSettingsButtons)(e,$.t("Cancel"),i,$.t("Modify Order..."),n.message))):$((0,c.getSettingsButtons)())}},v.addFormatters(u.formatters.concat([C]).concat(i)),O='\n\t\t<div class="tv-tabs tv-tabs--no-border tv-tabs--secondary-active tv-tabs--no-margin tv-tabs--semi-compact">\n\t\t\t{{#filter}}\n\t\t\t\t<div class="tv-tabs__tab {{id}}">\n\t\t\t\t\t<div class="tv-tabs__wrap">\n\t\t\t\t\t\t<div class="counter">\n\t\t\t\t\t\t\t<div class="counter__text">{{name}}</div>\n\t\t\t\t\t\t\t<div class="counter__count counter__count--{{id}}">0</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{{/filter}}\n\t\t</div>',U=w._possibleOrderStatuses.map(w._translateStatus),w._filter=$(n.render(O,{filter:[{id:"status-all",name:$.t("All")}].concat(U)})),w._filterTabs=new _.Tabs(w._filter.get(0),null,{noSlider:!0}),w._subscribeUpdates(),w}return r(e,m.TablePage),l(e,[{key:"_subscribeUpdates",value:function(){this._ordersTable.start(),this._orderPreFilter.start(),this._ordersFilter.start(),this._statusesCount.start(),this._statusWatcher.start(),this._statusWatcher.newStatusDelegate.subscribe(this,this._onNewStatus),this._filterTabs.tabChanged.subscribe(this,this._onFilterChanged),this._statusesCount.countChanged.subscribe(this,this._onCountChanged),this._globalFullUpdateDelegate.subscribe(this,this._onGlobalFullUpdate)}},{key:"_unsubscribeUpdates",value:function(){this._statusWatcher.newStatusDelegate.unsubscribe(this,this._onNewStatus),this._statusWatcher.stop(),this._ordersFilter.stop(),this._statusesCount.stop(),this._ordersTable.stop(),this._filterTabs.tabChanged.unsubscribe(this,this._onFilterChanged),this._statusesCount.countChanged.unsubscribe(this,this._onCountChanged),this._globalFullUpdateDelegate.unsubscribe(this,this._onGlobalFullUpdate)}},{key:"destroy",value:function(){this._unsubscribeUpdates(),a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"_onGlobalFullUpdate",value:function(){this._pendingNewOrdersByStatuses={},this._updateFiltersActiveState()}},{key:"_count",value:function(){this._setCount(this._activeCount)}},{key:"_translateStatus",value:function(t){var e=(0,p.orderStatusToText)(t),i=e[0].toUpperCase()+e.slice(1);return{id:(0,p.orderStatusId)(t),name:i}}},{key:"contextItems",value:function(t){var e,i=this,n=[],s=this._ordersTable.table().rowIdAtEvent(t);return s?(e=this._ordersTable.table().rowById(s),null!==this._editFn&&n.push({text:$.t("Modify Order..."),enabled:(0,p.isOrderActive)(e.status),action:function(){return i._editFn(e)}}),n.push({text:$.t("Cancel Order"),enabled:(0,p.isOrderActive)(e.status),action:function(){return i._closeFn(s)}}),
n):n}},{key:"_onFilterChanged",value:function(t){var e=this,i=0===t?null:this._possibleOrderStatuses[t-1];(0,d.tradingService)().trackEvent(S,"Order status filter",(0,p.orderStatusToText)(i)),this._ordersFilter.setFilterStatus(i),this._columns.filter(function(t){return t.hasOwnProperty("supportedStatusFilters")}).forEach(function(t){e._ordersTable.table().setColumnAvailable(t.property,t.supportedStatusFilters.includes(null!==i?i:h.ORDERSTATUSFILTER.ALL))}),this._ordersTable.fullUpdate().then(function(){i&&e._pendingNewOrdersByStatuses[i]&&e._pendingNewOrdersByStatuses[i].forEach(function(t){return e._ordersTable.table().highlightRowById(t)}),e._removeActiveState()})}},{key:"_onCountChanged",value:function(t,e){var i,n=this._filter.find(".counter .counter__count");if(t!==C){if(t===O&&this._activeCount!==e)return this._activeCount=e,void this._count();-1!==(i=this._possibleOrderStatuses.indexOf(t))&&$(n[i+1]).text(e)}else $(n[0]).text(e)}},{key:"_onNewStatus",value:function(t){var e=this;t.status!==h.ORDERSTATUS.PLACING&&(this._possibleOrderStatuses.forEach(function(i){if(e._pendingNewOrdersByStatuses[i]){var n=e._pendingNewOrdersByStatuses[i].indexOf(t.id);-1!==n&&e._pendingNewOrdersByStatuses[i].splice(n,1)}}),this._pendingNewOrdersByStatuses[t.status]||(this._pendingNewOrdersByStatuses[t.status]=[]),this._pendingNewOrdersByStatuses[t.status].push(t.id),setTimeout(function(){var i=e._ordersFilter.filterStatus(),n=!1;i&&i!==t.status||e._ordersTable.table().isRowInViewport(t.id)&&(e._ordersTable.table().highlightRowById(t.id),n=!0),n||e._pendingNewOrdersByStatuses[t.status]&&-1!==e._pendingNewOrdersByStatuses[t.status].indexOf(t.id)&&e._updateFiltersActiveState(),e._scheduleRemoveActiveState()},0))}},{key:"_scheduleRemoveActiveState",value:function(){var t=this;this._activeStateRemovalScheduled||(this._activeStateRemovalScheduled=!0,setTimeout(function(){return t._removeActiveState()},1e3))}},{key:"_removeActiveState",value:function(){this._activeStateRemovalScheduled=!1;var t=this._ordersFilter.filterStatus();t?this._pendingNewOrdersByStatuses[t]=[]:this._pendingNewOrdersByStatuses={},this._updateFiltersActiveState()}},{key:"_updateFiltersActiveState",value:function(){var t=this;this._highlightChanges&&this._possibleOrderStatuses.forEach(function(e){var i=t._pendingNewOrdersByStatuses[e]&&t._pendingNewOrdersByStatuses[e].length;t._filter.find("."+(0,p.orderStatusId)(e)+" .counter__count").toggleClass("i-active",!!i)})}},{key:"topline",value:function(){return this._filter}},{key:"filter",get:function(){return this._filter}}]),e}(),e.default=U,t.exports=e.default}).call(this,i("OiQe"))},l6K7:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(void 0===e)return{};var i=function(t,e){var i=t.findIndex(function(t){return t.id===e});return-1===i&&(i=t.findIndex(function(t){return t.property===e})),i}(t,e.columnId);return-1!==i?{idx:i,asc:e.asc||!1}:{}}var r,o,a,l,u,c,d,h,p,_,f,b,v,m,g,y,w,C,O,S,T,j,x,F,D,U,P;Object.defineProperty(e,"__esModule",{value:!0}),
e.AccountManager=void 0,r=i("14Xm"),o=n(r),a=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i,n,s=[],r=!0,o=!1,a=void 0;try{for(i=t[Symbol.iterator]();!(r=(n=i.next()).done)&&(s.push(n.value),!e||s.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}return s}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),i("PGTi"),u=i("pIOw"),c=i("5VQP"),d=i("PT1i"),h=i("Kxc7"),p=function(t){var e,i;if(t&&t.__esModule)return t;if(e={},null!=t)for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h),_=i("LoC4"),f=i("T7KF"),b=i("f11d"),v=n(b),m=i("UpRv"),g=i("0dtH"),y=n(g),w=i("bR4N"),C=i("4qhP"),O=i("OekH"),S=i("EgWA"),T=i("N22A"),j=i("6f6E"),x=i("Eyy1"),$.t("Username or password is incorrect"),F=[O.ORDERSTATUS.WORKING,O.ORDERSTATUS.INACTIVE,O.ORDERSTATUS.FILLED,O.ORDERSTATUS.CANCELED,O.ORDERSTATUS.REJECTED],D=[O.ORDERSTATUS.FILLED,O.ORDERSTATUS.CANCELED,O.ORDERSTATUS.REJECTED],U=function(t){var e=t.accId,n=void 0===e?"":e,s=t.brokerName,r=void 0===s?"":s,o=t.tabsCount,a=void 0===o?0:o;return'\n<div class="tv-account-manager">\n\t<div class="tv-account-manager__top-panel">\n\t\t<div class="tv-tabs tv-tabs--semi-compact tv-tabs--no-margin tv-tabs--no-border">\n\t\t\t'+P(a)('<div class="tv-tabs__tab js-tab"></div>')+'\n\t\t</div>\n\t\t<div class="controls">\n\t\t\t<div class="controls__elem controls__elem--disabled broker-selector js-broker-dropdown">\n\t\t\t\t<span class="js-broker-name">'+r+'</span>\n\t\t\t\t<span class="tv-caret"></span>\n\t\t\t</div>\n\t\t\t<div class="controls__elem controls__elem--disabled account-selector js-account-dropdown">\n\t\t\t\t<span class="js-account-name">'+n+'</span>\n\t\t\t</div>\n\t\t\t<div class="controls__elem option js-tab-options">'+i("5tvn")+'</div>\n\t\t</div>\n\t</div>\n\t<div class="tv-account-manager__secondary-panel js-cesondary-panel">\n\t\t<div class="js-secondary-tabs"></div>\n\t\t<div class="tv-account-manager__summary js-summary"></div>\n\t</div>\n\t<div class="tv-account-manager__content js-content js-table-container">\n\t\t'+P(a)('<div class="tv-account-manager__page js-page"></div>')+"\n\t</div>\n</div>"},P=function(t){return function(e){return Array(t).fill(e).join("")}},e.AccountManager=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._adapter=e,this._bridge=i,this._container=i.$body,this._pages=[],this._topLines={},this._trading=(0,T.tradingService)(),this._updateAccountIdBinded=this._updateAccountId.bind(this),this._create(),this._fullupdate()}return l(t,[{key:"priceFormatter",value:function(t){return t.symbol?this._trading.formatter(t.symbol):Promise.resolve(null)}},{
key:"_updateAccountId",value:function(t){this._accName.text(t.name)}},{key:"_create",value:function(){var t,e,i,n,s,r,o,a,l,c,d,h,p,_,f,b=this;this._pages=this.pages.map(function(t){return new t.constructor(t.ctorArgument)}),t=this._info=this._adapter.accountManagerInfo(),e=this._info.accountTitle,i=this._pages.length,this._container.append($(U({tabsCount:i,brokerName:e,accId:""}))),n=this._container.find(".js-tab-options"),(0,w.bindPopupMenu)(n,this._adapter.buttonDropdownActions.bind(this._adapter),{reverse:!0}),s=function(t,e){return t&&e&&t.id===e.id},r=this._container.find(".js-account-dropdown"),o=this._container.find(".js-broker-dropdown"),this._accName=this._container.find(".js-account-name"),this._accountSummaryRow&&this._accountSummaryRow.destroy(),this._info.summary&&(a=this._container.find(".js-summary"),this._accountSummaryRow=new j.AccountSummaryRow(a[0],this._info.summary)),this._info.account?this._info.account.subscribe(this._updateAccountIdBinded,{callWithLast:!0}):r.addClass("js-hidden"),this._trading.brokersList().filter(function(t){return!t.configFlags.isSuspended}),o.addClass("js-hidden"),t.accountsList&&(l=function(){return t.accountsList.map(function(e){void 0===e.currency&&(e.currency="USD");var i=e.name;return i.length>14&&(i=i.slice(0,14)+""),{html:'<div class="pair apply-common-tooltip" title="'+e.name+'"><div>'+i+"</div><div>"+e.currency+"</div></div>",action:function(){s(e,t.account.value())||t.account.setValue(e)},active:s(e,t.account.value())}})},r.removeClass("controls__elem--disabled").append($('<span class="tv-caret"></span>')),(0,w.bindPopupMenu)(r,l,{direction:"down",notCloseOnButtons:!0,reverse:!0,activeClass:"i-dropped i-active",addClass:"account-selector"})),c=this._container.find(".js-page"),d=this._container.find(".js-tab"),this._pages.forEach(function(t,e){c.eq(e).html(t.content()),d.eq(e).html(t.header())}),h=this._container.find(".js-content"),(this.tabs=new u.Tabs(this._container.find(".tv-tabs").get(0),h.get(0))).tabChanged.subscribe(this,this._onPageChanged),this.unbindContexMenu(),this._dispatch=this.bindContextMenu(),this._dispatchHeightHandler&&(this._dispatchHeightHandler(),delete this._dispatchHeightHandler),p=function(){b._pages.forEach(function(t){return t.updateVisibleContent()})},h.on("scroll",p),_=function(t){h.css("height",t-86+"px"),p()},this._bridge.height.subscribe(_,{callWithLast:!0}),this._dispatchHeightHandler=function(){return b._bridge.height.unsubscribe(_)},f=function(t){t?b._updatePagesActiveStatuses():b._pages.forEach(function(t){return t.setActive(!1)})},this._bridge.visible.subscribe(f,{callWithLast:!0}),this._dispatchVisibilityHandler=function(){return b._bridge.visible.unsubscribe(f)},this._attachFilter()}},{key:"_onPageChanged",value:function(t){this._attachFilter(),this._trading.trackEvent("Bottom Panel","Select "+this._pages[t].id()+" page"),this._updatePagesActiveStatuses()}},{key:"_updatePagesActiveStatuses",value:function(){var t,e=this._adapter.connectionStatus()===O.CONNECTSTATUSES.CONNECTED,i=this.tabs.index()
;for(t=0;t<this._pages.length;t++)this._pages[t].setActive(i===t&&e)}},{key:"_detachFilter",value:function(){this._container.find(".js-secondary-tabs").children().addClass("js-hidden")}},{key:"_attachFilter",value:function(){var t,e;this._detachFilter(),this._topLines[this._currentPageIndex()]?this._topLines[this._currentPageIndex()].removeClass("js-hidden"):this._currentPage().topline()&&(t=this._currentPage().topline(),e=this._container.find(".js-secondary-tabs"),t.appendTo(e),this._topLines[this._currentPageIndex()]=t)}},{key:"_fullupdate",value:function(){this._pages.forEach(function(t){return t.reset()})}},{key:"_unsubscribe",value:function(){this._info&&this._info.account&&this._info.account.unsubscribe(this._updateAccountIdBinded),this.tabs&&(this.tabs.tabChanged.unsubscribe(this,this._onPageChanged),this.tabs.stop()),this._dispatchHeightHandler&&(this._dispatchHeightHandler(),delete this._dispatchHeightHandler),this._dispatchVisibilityHandler&&(this._dispatchVisibilityHandler(),delete this._dispatchVisibilityHandler),this._container.find(".js-secondary-tabs").empty(),this._topLines={}}},{key:"remove",value:function(){this._adapter.connectionStatusUpdate.unsubscribe(this,this._onStatusChange),this._unsubscribe(),this._pages.forEach(function(t){return t.destroy()}),this.unbindContexMenu(),this._container.empty()}},{key:"bindContextMenu",value:function(){var t=this,e=function(e){e.preventDefault(),t._contextItems(e).then(function(t){p.enabled("property_pages")||(t=t.slice(0,-1)),c.ContextMenuManager.createMenu((0,C.convertActionDescriptionsToActions)(t)).then(function(t){t.show(e)})})};return this._container.on("contextmenu",e),this._container.off.bind(this._container,"contextmenu",e)}},{key:"unbindContexMenu",value:function(){this._dispatch&&(this._dispatch(),delete this._dispatch)}},{key:"_getCurrentPrice",value:function(t){return this._trading.realtimeProvider().quotesSnapshot(t).then(function(t){var e=t.bid;return(t.ask+e)/2})}},{key:"_currentPageIndex",value:function(){return this.tabs.index()}},{key:"_currentPage",value:function(){return this._pages[this._currentPageIndex()]}},{key:"_contextItems",value:function(){var t,e=(t=o.default.mark(function t(e){var n,s,r,l,u,c,h,_,f,b=this;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="Bottom Panel Context Menu",s=d.linking.proSymbol.value(),t.next=4,Promise.all([this._getCurrentPrice(s),this._trading.suggestedQty().value(s)]);case 4:if(r=t.sent,l=a(r,2),u=l[0],c=l[1],h=this._currentPage().contextItems(e),!this._info||!this._info.contextMenuActions){t.next=13;break}return t.next=12,this._info.contextMenuActions(e,h);case 12:return t.abrupt("return",t.sent);case 13:return _={separator:!0},h.length&&h.push(_),f=[{text:$.t("Create New Order..."),action:function(){b._trading.trackEvent(n,"New Order"),(0,x.ensureNotNull)(b._trading.brokerCommandsUI()).placeOrder({symbol:s,price:u,qty:c})}},_,{text:$.t("Show Buy/Sell Panel"),checkable:!0,checked:!this._trading.hideFloatingPanel.value(),action:function(){
var t=!b._trading.hideFloatingPanel.value();b._trading.trackEvent(n,"Show Panel",t?"Uncheck":"Check"),b._trading.hideFloatingPanel.setValue(t)}}],p.enabled("property_pages")&&f.push(_,{text:$.t("Trading Settings..."),icon:i("MXV9"),action:function(){b._trading.trackEvent(n,"Trading Properties"),b._trading.showTradingProperties()}}),this._trading.brokersList().length>1&&f.push(_,{text:$.t("Log Out"),action:function(){b._trading.trackEvent(n,"Disconnect"),b._trading.selectBroker(null)}}),t.abrupt("return",h.concat(f));case 19:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function n(s,r){var o,a;try{a=(o=e[s](r)).value}catch(t){return void i(t)}if(!o.done)return Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)});t(a)}("next")})});return function(t){return e.apply(this,arguments)}}()},{key:"pages",get:function(){var t,e=this,i=this._adapter.metainfo().id,n=this._adapter.accountManagerInfo(),r=this._adapter.metainfo().configFlags,o=(0,x.ensureNotNull)(this._trading.brokerCommandsUI()),a=[];return r.supportPositions&&a.push({constructor:m.PositionPage,ctorArgument:{brokerId:i,formatters:n.customFormatters||[],priceFormatterFn:this.priceFormatter.bind(this),checkSupportTrades:function(){return r.supportTrades},positions:{source:function(){return e._adapter.positions().then(function(t){return t.filter(function(t){return(0,C.isPositionActive)(t)})})},closeFn:o.closePosition.bind(o),editFn:r.supportPositionBrackets?o.editPositionBrackets.bind(o):null,reverseFn:r.supportReversePosition?o.reversePosition.bind(o):null,columns:n.positionColumns,subscriptions:{rowUpdateDelegate:new y.default([this._adapter.positionPartialUpdate,this._adapter.positionUpdate]),countUpdateDelegate:this._adapter.positionUpdate,plSubscription:this._adapter.subscribePL.bind(this._adapter)}},trades:r.supportTrades?{source:function(){return e._adapter.trades().then(function(t){return t.filter(function(t){return 0!==t.qty})})},closeFn:r.supportCloseTrade?o.closeTrade.bind(o):null,editFn:r.supportTradeBrackets?o.editTradeBrackets.bind(o):null,reverseFn:null,columns:n.tradeColumns||n.positionColumns,subscriptions:{rowUpdateDelegate:new y.default([this._adapter.tradePartialUpdate,this._adapter.tradeUpdate]),countUpdateDelegate:this._adapter.tradeUpdate,plSubscription:this._adapter.subscribePL.bind(this._adapter)}}:null,fullUpdateDelegate:this._adapter.fullUpdate}}),a.push({constructor:v.default,ctorArgument:{id:"Orders",title:$.t("Orders"),source:this._adapter.orders.bind(this._adapter),cancelFn:o.cancelOrder.bind(o),modifyFn:this._adapter.metainfo().configFlags.supportModifyOrder?o.modifyOrder.bind(o):null,columns:n.orderColumns,headerCounter:!0,tableId:i+".orders",formatters:n.customFormatters||[],priceFormatterFn:this.priceFormatter.bind(this),subscriptions:{fullUpdateDelegate:this._adapter.fullUpdate,rowUpdateDelegate:new y.default([this._adapter.orderPartialUpdate,this._adapter.orderUpdate]),orderUpdateDelegate:this._adapter.orderUpdate},
possibleOrderStatuses:F.filter(function(t){return!n.possibleOrderStatuses||-1!==n.possibleOrderStatuses.indexOf(t)}),filter:n.historyColumns&&n.historyColumns.length?function(t){return!!t.updateTime}:function(){return!0},highlightChanges:!0,tableOptions:s(n.orderColumns,n.orderColumnsSorting)}}),n.historyColumns&&n.historyColumns.length&&(t={constructor:v.default,ctorArgument:{id:"History",title:$.t("History"),source:this._adapter.orders.bind(this._adapter),cancelFn:o.cancelOrder.bind(o),modifyFn:o.modifyOrder.bind(o),columns:n.historyColumns,headerCounter:!1,tableId:i+".history",formatters:n.customFormatters||[],priceFormatterFn:this.priceFormatter.bind(this),subscriptions:{fullUpdateDelegate:this._adapter.fullUpdate,rowUpdateDelegate:new y.default([this._adapter.orderPartialUpdate,this._adapter.orderUpdate]),orderUpdateDelegate:this._adapter.orderUpdate},possibleOrderStatuses:D.filter(function(t){return!n.possibleOrderStatuses||-1!==n.possibleOrderStatuses.indexOf(t)}),filter:function(t){return-1===[O.ORDERSTATUS.INACTIVE,O.ORDERSTATUS.PLACING,O.ORDERSTATUS.WORKING].indexOf(t.status)},highlightChanges:!1,tableOptions:s(n.historyColumns,n.historyColumnsSorting)}},a.push(t)),n.pages&&n.pages.forEach(function(t){var r=t.tables.map(function(r){return{title:r.title||"",columns:r.columns,source:(0,C.wrapDeferredWithPromise)(r.getData),options:Object.assign({id:i+"."+t.id+"."+r.id,className:"balances",idProperty:"id"},s(r.columns,r.initialSorting)),formatters:n.customFormatters||[],priceFormatterFn:e.priceFormatter.bind(e),subscriptions:{fullUpdateDelegate:e._adapter.fullUpdate,rowUpdateDelegate:r.changeDelegate},flags:r.flags}});a.push({constructor:f.TitledTablesPage,ctorArgument:{id:t.id,title:t.title,tables:r}})}),p.enabled("show_trading_notifications_history")&&a.push({constructor:_.SingleTablePage,ctorArgument:{id:"notifications_log",title:$.t("Notifications log"),source:function(){return Promise.resolve(e._trading.getNotifications())},columns:S.notificationColumns,formatters:[],priceFormatterFn:this.priceFormatter.bind(this),subscriptions:{fullUpdateDelegate:this._trading.onNotificationsChanged,rowUpdateDelegate:this._trading.onNewNotification}}}),a}}]),t}()},lt86:function(t,e,i){"use strict";var n=i("rp+F"),s={createLabel:function(t,e,i){return n.create("label",$.extend(i,{html:e,for:t}))},unbindContextMenu:function(t){t.contextMenu(function(t){return!1})},offsetX:function(t,e){return t.width()+e.pageX},offsetY:function(t,e){return t.height()+e.pageY},isElementInViewport:function(t){"function"==typeof jQuery&&t instanceof jQuery&&(t=t[0]);var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},isVisible:function(t,e,i){var n,s,r;for("function"==typeof jQuery&&t instanceof jQuery&&(t=t[0]),n=.01,e||(e=1),i||(i=1),s=t.getBoundingClientRect(),r=[];t.parentElement;)r.push(t.parentElement.getBoundingClientRect()),t=t.parentElement;return r.every(function(t){
var r=Math.min(s.right,t.right)-Math.max(s.left,t.left),o=Math.min(s.bottom,t.bottom)-Math.max(s.top,t.top),a=r/s.width*100,l=o/s.height*100;return a+n>e&&l+n>i})},checkObjIsOutOfWindowX:function(t,e){var i,n=$(window).width()-s.offsetX(t,e);return n<0?(i=e.pageX+n)>0?i:0:e.pageX},checkObjIsOutOfWindowY:function(t,e){var i,n=$(window).height()-s.offsetY(t,e);return n<0?(i=e.pageY+n)>0?i:0:e.pageY},checkObjIsOutOfWindow:function(t,e){return{left:s.checkObjIsOutOfWindowX(t,e),top:s.checkObjIsOutOfWindowY(t,e)}},setAttr:function(t,e,i){return t.attr?t.attr(e,i):t[e]=i,t},removeAttr:function(t,e){return t.removeAttr?t.removeAttr(e):t.removeAttribute(e),t},notNull:function(t){return-1===$.inArray(t,[null,void 0,"false","null","undefined",0])},hideControl:function(t){return t.css({position:"absolute",top:-1e3,left:-1e3})}};t.exports=s},qahq:function(t,e,i){"use strict";var n,s,r;i.r(e),i.d(e,"AbstractObjectsFilter",function(){return r}),n=i("aIyQ"),s=i.n(n),r=function(){function t(t,e,i,n){this.filterFullUpdateDelegate=new s.a,this.filterObjectUpdateDelegate=new s.a,this.filterObjectDeleteDelegate=new s.a,this._filteredObjects=[],this._requestsCount=0,this._started=!1,this._objectsRequest=null,this._source=t,this._objectUpdateDelegate=e,this._objectDeleteDelegate=i,this._fullUpdateDelegate=n}return t.prototype.start=function(){var t,e,i=this;this._requestsCount++,t=this._source,e=this._objectsRequest||Promise.resolve([]),this._objectsRequest=e.then(function(){return t()}).then(function(t){var e=t.filter(function(t){return i._satisfy(t)});return i._requestsCount--,i._requestsCount||(i.stop(),i._filteredObjects=e,i._objectsRequest=null,i._objectUpdateDelegate.subscribe(i,i._onObjectUpdated),i._objectDeleteDelegate&&i._objectDeleteDelegate.subscribe(i,i._onObjectDeleted),i._fullUpdateDelegate.subscribe(i,i._onFullUpdate),i._started=!0),e.slice(0)})},t.prototype.stop=function(){this._objectUpdateDelegate.unsubscribe(this,this._onObjectUpdated),this._fullUpdateDelegate.unsubscribe(this,this._onFullUpdate),this._objectDeleteDelegate&&this._objectDeleteDelegate.unsubscribe(this,this._onObjectDeleted),this._filteredObjects=[],this._started=!1},t.prototype.isStarted=function(){return this._started},t.prototype.filterSource=function(){return this._objectsRequest?this._objectsRequest:Promise.resolve(this._filteredObjects.slice(0))},t.prototype._satisfy=function(t){throw new Error("should be implemented")},t.prototype._onFullUpdate=function(){this.stop(),this.start(),this.filterFullUpdateDelegate.fire()},t.prototype._onObjectDeleted=function(t){var e=this._filteredObjects.find(function(e){return e.id===t});e&&this.filterObjectDeleteDelegate.fire(e.id)},t.prototype._onObjectUpdated=function(t){var e=this._filteredObjects.find(function(e){return e.id===t.id}),i=e?this._filteredObjects.indexOf(e):-1;this._satisfy(t)?(e?this._filteredObjects[i]=t:this._filteredObjects.push(t),this.filterObjectUpdateDelegate.fire(t)):e&&(this.filterObjectDeleteDelegate.fire(e.id),this._filteredObjects.splice(i,1))},t}()},"rp+F":function(t,e,i){"use strict"
;var n={renderAttributes:function(t){var e,i="";for(e in t)t[e]&&(i+=" "+e+'="'+t[e]+'"');return i},create:function(t,e){var i=$(document.createElement(t));return e&&(e.html&&(i.html(e.html),delete e.html),i.attr(e)),i},validAttributes:["abbr","accept-charset","accept","accesskey","action","align","alink","alt","archive","axis","background","bgcolor","border","cellpadding","cellspacing","char","charoff","charset","checked","cite","class","classid","clear","code","codebase","codetype","color","cols","colspan","compact","content","coords","data","datetime","declare","defer","dir","disabled","enctype","face","for","frame","frameborder","headers","height","href","hreflang","hspace","http-equiv","id","ismap","label","lang","language","link","longdesc","marginheight","marginwidth","maxlength","media","method","multiple","name","nohref","noresize","noshade","nowrap","object","onblur","onchange","onclick","ondblclick","onfocus","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onreset","onselect","onsubmit","onunload","profile","prompt","readonly","rel","rev","rows","rowspan","rules","scheme","scope","scrolling","selected","shape","size","span","src","standby","start","style","summary","tabindex","target","text","title","type","usemap","valign","value","valuetype","version","vlink","vspace","width"],validAttribute:function(t){return-1!==jQuery.inArray(t,n.validAttributes)},cleanAttributes:function(t){return jQuery.each(t,function(e,i){n.validAttribute(e)||delete t[e]}),t}};t.exports=n},v9OY:function(t,e,i){},vFOx:function(t,e,i){"use strict";var n,s,r;i.r(e),n=i("mrSG"),s=function(){function t(t,e){this._active=!1,this._$content=t,this._id=e.id,this._name=e.name;var i=e.headerCounter?'<div class="counter"><div class="counter__text">'+e.name+'</div><div class="counter__count">0</div></div>':"<span>"+e.name+"</span>";this._$header=$(i),this._countElement=this._$header.find(".counter__count")[0]}return t.prototype.setActive=function(t){this._active!==t&&(this._active=t,this._onActiveChanged(t))},t.prototype.isActive=function(){return this._active},t.prototype.reset=function(){},t.prototype.destroy=function(){},t.prototype.updateVisibleContent=function(){},t.prototype.header=function(){return this._$header},t.prototype.content=function(){return this._$content},t.prototype.name=function(){return this._name},t.prototype.id=function(){return this._id||this._name},t.prototype.contextItems=function(t){return[]},t.prototype.topline=function(){return null},t.prototype._setCount=function(t){this._countElement&&(this._countElement.innerHTML=String(t))},t.prototype._onActiveChanged=function(t){},t}(),i.d(e,"TablePage",function(){return r}),r=function(t){function e(e,i,n){var s=t.call(this,e,i)||this;return s._tableControllers=n,s}return Object(n.__extends)(e,t),e.prototype.reset=function(){this._tableControllers.forEach(function(t){return t.reset()}),t.prototype.reset.call(this)},e.prototype.destroy=function(){this._tableControllers.forEach(function(t){return t.destroy()}),
t.prototype.destroy.call(this)},e.prototype.updateVisibleContent=function(){this._tableControllers.forEach(function(t){return t.table().updateVisibleContent()}),t.prototype.updateVisibleContent.call(this)},e.prototype._onActiveChanged=function(t){this._tableControllers.forEach(function(e){return e.setActive(t)})},e}(s)},xZ9U:function(t,e,i){"use strict";function n(t,e,i,n){var s={textPrevPrice:i?Object(r.splitThousands)(t.format(i)):"",textPrice:e?Object(r.splitThousands)(t.format(e)):""};return!Object(p.isNumber)(i)&&n&&(i=e),Object(p.isNumber)(e)&&Object(p.isNumber)(i)&&(s.elem=d.PriceColorer.domDifference(s.textPrice,s.textPrevPrice,e-i,"tv-data-table__red-text","tv-data-table__green-text")),s}function s(t,e){var i,n,s;for(void 0===e&&(e=O),i=0,n=S;i<n.length;i++)if((s=n[i]).name===t)return s;return e}var r,o,a,l,u,c,d,h,p,_,f,b,v,m,g,y,w,C,O,S;i.r(e),i("P5fv"),r=i("9XXR"),o=i("PT1i"),a=i("MbIA"),l=i("4kQX"),u=i("gQ5K"),c=function(){function t(){this._dateFormatter=new u.DateFormatter,this._timeFormatter=new l.TimeFormatter}return t.prototype.format=function(t){var e=new Date(t.dateOrDateTime),i=this._dateFormatter.format(e);return t.hasTime&&(i+=" "+this._timeFormatter.format(e)),i},t.prototype.formatLocal=function(t){var e=new Date(t.dateOrDateTime),i=this._dateFormatter.formatLocal(e);return t.hasTime&&(i+=" "+this._timeFormatter.formatLocal(e)),i},t}(),d=i("RoXi"),h=i("4qhP"),p=i("ogJP"),_=i("GH0z"),i("mgqz"),f=i("Ialn"),b=i("qjxE"),v=i("ivNn"),i.d(e,"formatters",function(){return S}),i.d(e,"tableFormatterByName",function(){return s}),g=new a.a,y=new c,w=new _.PercentageFormatter,(m={})[3]="tv-data-table__grey-text",m[6]="tv-data-table__blue-text",m[5]="tv-data-table__red-text",m[2]="tv-data-table__green-text",m[1]="tv-data-table__red-green-text",m[4]=void 0,C=m,O={name:"default",format:function(t){return t.value+""}},S=[{name:"symbol",format:function(t){var e=t.value,i=t.row,n=t.$container;return""!==i.symbol&&n.on("click",function(){return o.linking.symbol.setValue(i.symbol)}),e}},{name:"side",format:function(t){var e=t.value,i=t.$container,n=Object(h.sideToText)(e);return 1===e?i.addClass("tv-data-table__blue-text"):i.addClass("tv-data-table__light-red-text"),n}},{name:"type",format:function(t){var e=t.value;return Object(h.orderTypeToText)(e)}},{name:"formatPrice",format:function(t){var e=t.value,i=t.priceFormatter,s=t.prevValue,r=n(i,e,s);return r.elem||Object(f.forceLTRStr)(r.textPrice)}},{name:"formatPriceForexSup",format:function(t){var e=t.value,i=t.priceFormatter,s=t.prevValue,r=i.hasForexAdditionalPrecision(),o=n(i,e,s,r);return e&&o.elem&&r&&o.elem.last().lastCharSup(),o.elem||Object(f.forceLTRStr)(o.textPrice)}},{name:"status",format:function(t){var e=t.value,i=t.$container,n=Object(h.orderStatusToText)(e),s=C[e];return s&&i.addClass(s),n}},{name:"date",format:function(t){var e=t.value;return e?g.format(new Date(e)):""}},{name:"localDate",format:function(t){var e=t.value;return e?g.formatLocal(new Date(e)):""}},{name:"dateOrDateTime",format:function(t){var e=t.value;return e?y.format(e):""}},{
name:"localDateOrDateTime",format:function(t){var e=t.value;return e?y.formatLocal(e):""}},{name:"unixTimeAgo",format:function(t){var e=t.value,i=$(document.createElement("span"));return Object(b.jQueryCompatibleAgoDateFormatter)(i,new Date(1e3*e)),i}},{name:"fixed",format:function(t){var e=t.value;return isNaN(e)?"":Object(f.forceLTRStr)(Math.abs(e||0)<.001?"0.00":Object(r.splitThousands)((e||0).toFixed(2)))}},{name:"variablePrecision",format:function(t){var e=t.value;return isNaN(e)?"":Object(f.forceLTRStr)(String(Object(v.fixComputationError)(e)))}},{name:"pips",format:function(t){var e=t.value;return Object(f.forceLTRStr)(Object(p.isNumber)(e)?Math.abs(e)<.01?"0.0":Object(r.splitThousands)(e.toFixed(1)):"")}},{name:"integerSeparated",format:function(t){var e=t.value;return Object(f.forceLTRStr)(Object(p.isNumber)(e)?Object(r.splitThousands)(e.toFixed(0)):"")}},{name:"formatQuantity",format:function(t){var e=t.value;return Object(f.forceLTRStr)(Object(p.isNumber)(e)?Object(r.splitThousands)(e):"")}},{name:"profit",format:function(t){var e,i,n,s=t.value,o=t.$container;return Object(p.isNumber)(s)?(i=(e=s&&Math.round(100*s)/100)>0?"+":"",n=e<0?"tv-data-table__red-text":e>0?"tv-data-table__green-text":"",o.addClass(n),Object(f.forceLTRStr)(i+Object(r.splitThousands)((e||0).toFixed(2)))):""}},{name:"percentage",format:function(t){var e=t.value;return Object(f.forceLTRStr)(Object(p.isNumber)(e)?w.format(e):"")}}]},yB0V:function(t,e,i){"use strict";var n,s,r,o;i.r(e),i.d(e,"LinkingTableController",function(){return o}),n=i("mrSG"),s=i("PT1i"),r=i("OKnH"),o=function(t){function e(e,i,n){var r=t.call(this,e,i,n)||this;return r._onLinkingBound=r._onLinking.bind(r),s.linking.proSymbol.subscribe(r._onLinkingBound),r}return Object(n.__extends)(e,t),e.prototype.destroy=function(){s.linking.proSymbol.unsubscribe(this._onLinkingBound),t.prototype.destroy.call(this)},e.prototype._update=function(e){if(!t.prototype._update.call(this,e))return!1;var i=s.linking.proSymbol.value();return this.table().setRowLinkedById(e.id,i===e.symbol),!0},e.prototype._onCreated=function(){this.table().setRowLinkedByFilter(function(t){return t.symbol===s.linking.proSymbol.value()})},e.prototype._onLinking=function(t){this.table().setRowLinkedByFilter(function(e){return e.symbol===t})},e}(r.a)}}]);
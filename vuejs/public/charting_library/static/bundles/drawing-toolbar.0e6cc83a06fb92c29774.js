(window.webpackJsonp=window.webpackJsonp||[]).push([["drawing-toolbar"],{"5f7t":function(e,t,o){"use strict";function n(e){var t,o=e.id,n=e.activeClass,i=e.children,a=e.className,r=e.icon,s=e.isActive,u=e.isGrayed,d=e.isHidden,p=e.isTransparent,m=e.theme,b=void 0===m?N:m,g=e.onClick,v=e.title,f=e.buttonHotKey;return c.createElement("div",Object(l.__assign)({id:o,className:h(b.button,a,s&&n,(t={},t["apply-common-tooltip common-tooltip-vertical"]=Boolean(v),t[b.isActive]=s,t[b.isGrayed]=u,t[b.isHidden]=d,t[b.isTransparent]=p,t)),onClick:g,title:v,"data-role":"button","data-tooltip-hotkey":f},Object(D.a)(e)),c.createElement("div",{className:b.bg},r&&("string"==typeof r?c.createElement(A.a,{className:b.icon,icon:r}):c.createElement("span",{className:b.icon},r)),i))}function i(e){var t=e.id,o=e.action,i=e.isActive,a=e.isHidden,r=e.isTransparent,s=e.toolName;return c.createElement(n,{id:t,icon:T.a[s].icon,isActive:i,isHidden:a,isTransparent:r,onClick:o,title:T.a[s].localizedName,"data-name":s})}function a(){Object(U.saveDefaultProperties)(!0),g.properties().childs().magnet.setValue(!g.properties().childs().magnet.value()),Object(U.saveDefaultProperties)(!1)}function r(){Object(re.trackEvent)("GUI","Magnet mode","Weak"),Object(U.saveDefaultProperties)(!0),g.properties().childs().magnetMode.setValue(se.MagnetMode.WeakMagnet),g.properties().childs().magnet.setValue(!0),Object(U.saveDefaultProperties)(!1)}function s(){Object(re.trackEvent)("GUI","Magnet mode","Strong"),Object(U.saveDefaultProperties)(!0),g.properties().childs().magnetMode.setValue(se.MagnetMode.StrongMagnet),g.properties().childs().magnet.setValue(!0),Object(U.saveDefaultProperties)(!1)}var l,c,u,d,p,h,m,b,g,v,f,_,y,w,T,C,k,O,E,S,L,M,j,A,D,N,P,x,W,F,I,R,V,z,G,B,H,U,K,Q,q,Y,X,J,Z,$,ee,te,oe,ne,ie,ae,re,se,le,ce,ue,de,pe,he,me,be,ge,ve,fe,_e,ye,we,Te,Ce,ke,Oe,Ee;o.r(t),l=o("mrSG"),c=o("q1tI"),u=o("i8i4"),d=o("Eyy1"),o("YFKU"),o("bf9a"),p=o("17x9"),h=o("TSYQ"),m=o("Vdly"),b=o("Kxc7"),g=o("mMWL"),v=o("zL3Q"),f=o("FQhm"),_=o("aIyQ"),y=o.n(_),w=o("qFKp"),T=o("MP+M"),C=function(){function e(e){this._drawingsAccess=e||{tools:[],type:"black"}}return e.prototype.isToolEnabled=function(e){var t=this._findTool(e);return!(!t||!t.grayed)||("black"===this._drawingsAccess.type?!t:!!t)},e.prototype.isToolGrayed=function(e){var t=this._findTool(e);return Boolean(t&&t.grayed)},e.prototype._findTool=function(e){return this._drawingsAccess.tools.find(function(t){return t.name===e})},e}(),k=o("/3z9"),O=o("+GxX"),E=[{id:"linetool-group-cursors",title:window.t("Cursors"),items:[{name:"cursor"},{name:"dot"},{name:"arrow"},{name:"eraser"}]},{id:"linetool-group-trend-line",title:window.t("Trend Line Tools"),items:[{name:"LineToolTrendLine"},{name:"LineToolInfoLine"},{name:"LineToolTrendAngle"},{name:"LineToolHorzLine",hotkeyHash:k.Modifiers.Alt+72},{name:"LineToolHorzRay"},{name:"LineToolVertLine",hotkeyHash:k.Modifiers.Alt+86},{name:"LineToolCrossLine",hotkeyHash:k.Modifiers.Alt+67},{name:"LineToolArrow"},{name:"LineToolRay"},{name:"LineToolExtended"},{name:"LineToolParallelChannel"},{
name:"LineToolDisjointAngle"},{name:"LineToolFlatBottom"},null].filter(Boolean)},{id:"linetool-group-gann-and-fibonacci",title:window.t("Gann and Fibonacci Tools"),items:[{name:"LineToolPitchfork"},{name:"LineToolSchiffPitchfork2"},{name:"LineToolSchiffPitchfork"},{name:"LineToolInsidePitchfork"},{name:"LineToolPitchfan"},{name:"LineToolGannSquare"},{name:"LineToolGannComplex"},{name:"LineToolGannFixed"},{name:"LineToolGannFan"},{name:"LineToolFibRetracement"},{name:"LineToolTrendBasedFibExtension"},{name:"LineToolFibSpeedResistanceFan"},{name:"LineToolFibTimeZone"},{name:"LineToolTrendBasedFibTime"},{name:"LineToolFibCircles"},{name:"LineToolFibSpiral"},{name:"LineToolFibSpeedResistanceArcs"},{name:"LineToolFibWedge"},{name:"LineToolFibChannel"}]},{id:"linetool-group-geometric-shapes",title:window.t("Geometric Shapes"),items:[{name:"LineToolBrush"},{name:"LineToolRectangle"},{name:"LineToolRotatedRectangle"},{name:"LineToolEllipse"},{name:"LineToolTriangle"},{name:"LineToolPolyline"},{name:"LineToolBezierQuadro"},{name:"LineToolBezierCubic"},{name:"LineToolArc"}]},{id:"linetool-group-annotation",title:window.t("Annotation Tools"),items:[{name:"LineToolText"},{name:"LineToolTextAbsolute"},{name:"LineToolNote"},{name:"LineToolNoteAbsolute"},{name:"LineToolCallout"},{name:"LineToolBalloon"},{name:"LineToolPriceLabel"},{name:"LineToolArrowMarkLeft"},{name:"LineToolArrowMarkRight"},{name:"LineToolArrowMarkUp"},{name:"LineToolArrowMarkDown"},{name:"LineToolFlagMark"}]},{id:"linetool-group-patterns",title:window.t("Patterns"),items:[{name:"LineTool5PointsPattern"},{name:"LineToolCypherPattern"},{name:"LineToolABCD"},{name:"LineToolTrianglePattern"},{name:"LineToolThreeDrivers"},{name:"LineToolHeadAndShoulders"},{name:"LineToolElliottImpulse"},{name:"LineToolElliottTriangle"},{name:"LineToolElliottTripleCombo"},{name:"LineToolElliottCorrection"},{name:"LineToolElliottDoubleCombo"},{name:"LineToolCircleLines"},{name:"LineToolTimeCycles"},{name:"LineToolSineLine"}]},{id:"linetool-group-prediction-and-measurement",title:window.t("Prediction and Measurement Tools"),items:[{name:"LineToolRiskRewardLong"},{name:"LineToolRiskRewardShort"},{name:"LineToolPrediction"},{name:"LineToolDateRange"},{name:"LineToolPriceRange"},{name:"LineToolDateAndPriceRange"},{name:"LineToolBarsPattern"},Object(O.isFeatureEnabled)("remove-line-tool-ghost-feed")?null:{name:"LineToolGhostFeed"},{name:"LineToolProjection"}].filter(Boolean)}],S=o("OiSa"),L=o("5AaZ"),M=o("lxNp"),j=o("tWVy"),A=o("jjrI"),D=o("QpNh"),N=o("gb5g"),P=o("wZIs"),x=o("3mf1"),W=o("9dlw"),F=o("hn2c"),I=o("KmEK"),R=function(e){function t(t){var o=e.call(this,t)||this;return o._toggleDropdown=function(e){o.setState({isOpened:void 0!==e?e:!o.state.isOpened})},o._handleClose=function(){o._toggleDropdown(!1)},o._getDropdownPosition=function(){if(!o._control)return{x:0,y:0};var e=o._control.getBoundingClientRect();return{x:e.left+e.width+1,y:e.top-6}},o._handleClickArrow=function(){o._toggleDropdown()},o._handleTouchStart=function(){o.props.onClickButton(),o._toggleDropdown()},
o._handlePressStart=function(){if(Modernizr.mobiletouch&&!o.props.checkable)o._longPressDelay||o.props.onClickButton();else{if(o._doubleClickDelay)return clearTimeout(o._doubleClickDelay),delete o._doubleClickDelay,void o._toggleDropdown(!0);o._doubleClickDelay=setTimeout(function(){delete o._doubleClickDelay,o._longPressDelay||o.props.onClickButton()},175)}o._longPressDelay=setTimeout(function(){delete o._longPressDelay,o._toggleDropdown(!0)},300)},o._handlePressEnd=function(){o._longPressDelay&&(clearTimeout(o._longPressDelay),delete o._longPressDelay,o.state.isOpened?o._toggleDropdown(!1):o.props.checkable||o.state.isOpened||!o.props.isActive||Modernizr.mobiletouch||o._toggleDropdown(!0))},o.state={isOpened:!1},o}return Object(l.__extends)(t,e),t.prototype.render=function(){var e,t=this,o=this.props,i=o.buttonActiveClass,a=o.buttonClass,r=o.buttonIcon,s=o.buttonTitle,u=o.buttonHotKey,d=o.dropdownTooltip,p=o.children,m=o.isActive,b=o.isGrayed,g=o.onClickWhenGrayed,v=o.checkable,f=this.state.isOpened,_=Object(D.a)(this.props);return c.createElement("div",{className:h(I.dropdown,(e={},e[I.isGrayed]=b,e[I.isActive]=m,e[I.isOpened]=f,e)),onClick:b?g:void 0},c.createElement("div",Object(l.__assign)({},_,{ref:function(e){return t._control=e},className:I.control}),c.createElement("div",{className:h(I.buttonWrap,{"apply-common-tooltip common-tooltip-vertical":Boolean(s||u)}),"data-tooltip-hotkey":u,"data-tooltip-delay":1500,"data-role":"button",title:s,onMouseDown:b||Modernizr.mobiletouch?void 0:this._handlePressStart,onMouseUp:b||Modernizr.mobiletouch?void 0:this._handlePressEnd,onTouchStart:!b&&v&&Modernizr.mobiletouch?this._handlePressStart:void 0,onTouchEnd:!b&&v&&Modernizr.mobiletouch?this._handlePressEnd:void 0,onClick:b||v||!Modernizr.mobiletouch?void 0:this._handleTouchStart},c.createElement(n,{activeClass:i,className:a,icon:r,isActive:m,isGrayed:b,isTransparent:!v})),!b&&!Modernizr.mobiletouch&&c.createElement("div",{className:h(I.arrow,d&&"apply-common-tooltip common-tooltip-vertical"),title:d,onClick:this._handleClickArrow,"data-role":"menu-handle"},c.createElement(A.a,{className:I.arrowIcon,icon:F}))),!b&&c.createElement(W.a,{doNotCloseOn:this,isOpened:f,onClose:this._handleClose,position:this._getDropdownPosition},p))},t}(c.PureComponent),V=o("KKsp"),z=o("EA32"),G={icon:window.t("Icon"),dropdownTooltip:window.t("Icons")},B=10,H=function(e){function t(t){var o=e.call(this,t)||this;return o._renderItem=function(e){return c.createElement("div",{className:z.item,key:e,onClick:function(){o._handleSelect(e),Object(j.b)()}},String.fromCharCode(e))},o._onChangeDrawingState=function(){o.setState({isActive:o._isActive()})},o._handleSelect=function(e){var t,n;Object(P.saveDefaults)("linetoolicon",Object(l.__assign)(Object(l.__assign)({},Object(P.defaults)("linetoolicon")),{icon:e})),g.tool.setValue("LineToolIcon"),-1!==(n=(t=o.state.recents).indexOf(e))&&t.splice(n,1),t=Object(l.__spreadArrays)([e],t.slice(0,B-1)),Object(m.setJSON)("linetoolicon.recenticons",t),o.setState({current:e,recents:t})},o.state={
current:Object(P.defaults)("linetoolicon").icon,recents:Object(m.getJSON)("linetoolicon.recenticons")||[]},o}return Object(l.__extends)(t,e),t.prototype.componentDidMount=function(){g.tool.subscribe(this._onChangeDrawingState),m.onSync.subscribe(this,this._onSyncSettings)},t.prototype.componentWillUnmount=function(){g.tool.unsubscribe(this._onChangeDrawingState),m.onSync.unsubscribe(this,this._onSyncSettings)},t.prototype.render=function(){var e=this,t=this.props,o=t.isGrayed,n=t.toolName,i=this.state,a=i.current,r=i.isActive,s=i.recents,u=Object(D.a)(this.props);return c.createElement(R,Object(l.__assign)({buttonClass:z.button,buttonIcon:c.createElement("div",{className:z.buttonIcon},String.fromCharCode(a||x.availableIcons[0])),buttonTitle:G.icon,dropdownTooltip:G.dropdownTooltip,isActive:r,isGrayed:o,onClickButton:function(){return e._handleSelect(a||x.availableIcons[0])},onClickWhenGrayed:function(){return Object(f.emit)("onGrayedObjectClicked",{type:"drawing",name:T.a[n].localizedName})}},u),s&&[c.createElement("div",{key:"recent",className:z.wrap},s.map(this._renderItem)),c.createElement(V.a,{key:"separator"})],c.createElement("div",{key:"all",className:z.wrap},x.availableIcons.map(this._renderItem)))},t.prototype._isActive=function(){return g.tool.value()===this.props.toolName},t.prototype._onSyncSettings=function(){this.setState({recents:Object(m.getJSON)("linetoolicon.recenticons")})},t}(c.Component),U=o("Ocx9"),K=function(e){function t(t){var o=e.call(this,t)||this;return o._handleClick=function(){o.props.saveDefaultOnChange&&Object(U.saveDefaultProperties)(!0),o.props.property.setValue(!o.props.property.value()),o.props.saveDefaultOnChange&&Object(U.saveDefaultProperties)(!1)},o.state={isActive:o.props.property.value()},o}return Object(l.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.property.subscribe(this,this._onChange)},t.prototype.componentWillUnmount=function(){this.props.property.unsubscribe(this,this._onChange)},t.prototype.render=function(){var e=this.props.toolName,t=this.state.isActive,o=T.a[e];return c.createElement(n,{icon:t&&o.iconActive?o.iconActive:o.icon,isActive:t,onClick:this._handleClick,title:o.localizedName,"data-name":e})},t.prototype._onChange=function(e){this.setState({isActive:e.value()})},t}(c.PureComponent),Q=function(e){function t(t){var o=e.call(this,t)||this;return o._handleClick=function(){g.tool.setValue(o.props.toolName)},o._onChange=function(){o.setState({isActive:g.tool.value()===o.props.toolName})},o.state={isActive:g.tool.value()===o.props.toolName},o}return Object(l.__extends)(t,e),t.prototype.componentDidMount=function(){g.tool.subscribe(this._onChange)},t.prototype.componentWillUnmount=function(){g.tool.unsubscribe(this._onChange)},t.prototype.render=function(){var e=this.props.toolName,t=this.state.isActive,o=T.a[e];return c.createElement(n,{icon:T.a[e].icon,isActive:t,isTransparent:!0,onClick:this._handleClick,title:o.localizedName,buttonHotKey:o.hotKey,"data-name":e})},t}(c.PureComponent),q=function(e){function t(t){var o=e.call(this,t)||this
;return o._boundUndoModel=null,o._handleClick=function(){var e=o._activeChartWidget().model();e&&e.zoomFromViewport()},o._syncUnzoomButton=function(){var e=o._activeChartWidget(),t=e.model(),n=!1;t?(o._boundUndoModel!==t&&(o._boundUndoModel&&o._boundUndoModel.zoomStack().onChange().unsubscribe(null,o._syncUnzoomButton),t.zoomStack().onChange().subscribe(null,o._syncUnzoomButton),o._boundUndoModel=t),n=!t.zoomStack().isEmpty()):e.withModel(null,o._syncUnzoomButton),o.setState({isVisible:n})},o.state={isVisible:!1},o}return Object(l.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.chartWidgetCollection.activeChartWidget.subscribe(this._syncUnzoomButton,{callWithLast:!0})},t.prototype.componentWillUnmount=function(){this.props.chartWidgetCollection.activeChartWidget.unsubscribe(this._syncUnzoomButton)},t.prototype.render=function(){return this.state.isVisible?c.createElement(i,{action:this._handleClick,isTransparent:!0,toolName:"zoom-out"}):c.createElement("div",null)},t.prototype._activeChartWidget=function(){return this.props.chartWidgetCollection.activeChartWidget.value()},t}(c.PureComponent),Y=o("b2d7"),X=o("pr86"),J=o("N5tr"),Z=function(e){function t(t){var o,n=e.call(this,t)||this;return n._onChangeDrawingState=function(){var e=n._getActiveToolIndex();n.setState({current:-1!==e?e:n.state.current,isActive:-1!==e})},n._handleClickButton=function(){if(!w.CheckMobile.any()){var e=n._getCurrentToolName();n._selectTool(e)}},n._handleClickItem=function(e){n._selectTool(e)},n._handleGrayedClick=function(e){Object(f.emit)("onGrayedObjectClicked",{type:"drawing",name:T.a[e].localizedName})},n._handleClickFavorite=function(e){n.state.favState&&n.state.favState[e]?Y.a.removeFavorite(e):Y.a.addFavorite(e)},n._onAddFavorite=function(e){var t;n.setState({favState:Object(l.__assign)(Object(l.__assign)({},n.state.favState),(t={},t[e]=!0,t))})},n._onRemoveFavorite=function(e){var t;n.setState({favState:Object(l.__assign)(Object(l.__assign)({},n.state.favState),(t={},t[e]=!1,t))})},n._onSyncFavorites=function(){n.setState({favState:n._composeFavState()})},o=n._getActiveToolIndex(),n.state={current:-1===o?n._firstNonGrayedTool():o,favState:n._composeFavState(),isActive:-1!==o},n}return Object(l.__extends)(t,e),t.prototype.componentDidMount=function(){g.tool.subscribe(this._onChangeDrawingState),Y.a.favoriteAdded.subscribe(null,this._onAddFavorite),Y.a.favoriteRemoved.subscribe(null,this._onRemoveFavorite),Y.a.favoritesSynced.subscribe(null,this._onSyncFavorites)},t.prototype.componentWillUnmount=function(){g.tool.unsubscribe(this._onChangeDrawingState),Y.a.favoriteAdded.unsubscribe(null,this._onAddFavorite),Y.a.favoriteRemoved.unsubscribe(null,this._onRemoveFavorite),Y.a.favoritesSynced.unsubscribe(null,this._onSyncFavorites)},t.prototype.componentDidUpdate=function(e,t){e.lineTools!==this.props.lineTools&&this.setState({favState:this._composeFavState()})},t.prototype.render=function(){
var e=this,t=this.props,o=t.favoriting,n=t.grayedTools,i=t.lineTools,a=t.dropdownTooltip,r=this.state,s=r.current,u=r.favState,d=r.isActive,p=this._getCurrentToolName(),h=T.a[p],m=this._showShortcuts(),b=Object(D.a)(this.props);return c.createElement("span",null,c.createElement(R,Object(l.__assign)({buttonIcon:h.icon,buttonTitle:h.localizedName,buttonHotKey:h.hotKey,dropdownTooltip:a,isActive:d,onClickButton:this._handleClickButton},b),i.map(function(t,i){var a=t.name,r=T.a[a],l=n[a];return c.createElement(J.b,{key:a,"data-name":t.name,dontClosePopup:l,forceShowShortcuts:m,shortcut:t.hotkeyHash?Object(k.humanReadableHash)(t.hotkeyHash):void 0,icon:r.icon,isActive:d&&s===i,appearAsDisabled:l,label:r.localizedName,onClick:l?e._handleGrayedClick:e._handleClickItem,onClickArg:a,showToolboxOnHover:!u[a],toolbox:o&&!l?c.createElement(X.a,{isFilled:u[a],onClick:e._handleClickFavorite,onClickArg:a}):void 0})})))},t.prototype._getCurrentToolName=function(){var e=this.state.current,t=this.props.lineTools;return t[e||0].name},t.prototype._firstNonGrayedTool=function(){var e=this.props,t=e.grayedTools;return e.lineTools.findIndex(function(e){return!t[e.name]})},t.prototype._getActiveToolIndex=function(){return this.props.lineTools.findIndex(function(e){return e.name===g.tool.value()})},t.prototype._showShortcuts=function(){return this.props.lineTools.some(function(e){return"shortcut"in e})},t.prototype._selectTool=function(e){g.tool.setValue(e)},t.prototype._composeFavState=function(){var e={};return this.props.lineTools.forEach(function(t){e[t.name]=Y.a.isFavorite(t.name)}),e},t}(c.PureComponent),$={all:window.t("Remove Drawing Tools & Indicators"),drawings:window.t("Remove Drawing Tools"),studies:window.t("Remove Indicators")},ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._handleRemoveToolClick=function(){Modernizr.mobiletouch||t._handleRemoveDrawings()},t._handleRemoveDrawings=function(){t.props.chartWidgetCollection.activeChartWidget.value().removeAllDrawingTools()},t._handleRemoveStudies=function(){t.props.chartWidgetCollection.activeChartWidget.value().removeAllStudies()},t._handleRemoveAll=function(){t.props.chartWidgetCollection.activeChartWidget.value().removeAllStudiesDrawingTools()},t}return Object(l.__extends)(t,e),t.prototype.render=function(){return c.createElement(R,{buttonIcon:T.a[this.props.toolName].icon,buttonTitle:$.drawings,onClickButton:this._handleRemoveToolClick,"data-name":this.props.toolName},c.createElement(J.b,{"data-name":"remove-drawing-tools",label:$.drawings,onClick:this._handleRemoveDrawings}),c.createElement(J.b,{"data-name":"remove-studies",label:$.studies,onClick:this._handleRemoveStudies}),c.createElement(J.b,{"data-name":"remove-all",label:$.all,onClick:this._handleRemoveAll}))},t}(c.PureComponent),te=o("g5Qf"),oe=o("85c9"),ne=window.t("Show Favorite Drawings Toolbar"),ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._instance=null,t._promise=null,t._bindedForceUpdate=function(){return t.forceUpdate()},
t._handleClick=function(){null!==t._instance&&(t._instance.isVisible()?t._instance.hide():t._instance.show())},t}return Object(l.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this,t=this._promise=Object(d.ensureNotNull)(Object(te.getFavoriteDrawingToolbarPromise)());t.then(function(o){e._promise===t&&(e._instance=o,e._instance.canBeShown().subscribe(e._bindedForceUpdate),e._instance.visibility().subscribe(e._bindedForceUpdate),e.forceUpdate())})},t.prototype.componentWillUnmount=function(){this._promise=null,null!==this._instance&&(this._instance.canBeShown().unsubscribe(this._bindedForceUpdate),this._instance.visibility().unsubscribe(this._bindedForceUpdate),this._instance=null)},t.prototype.render=function(){return null!==this._instance&&this._instance.canBeShown().value()?c.createElement(n,{id:this.props.id,icon:oe,isActive:this._instance.isVisible(),onClick:this._handleClick,title:ne}):null},t}(c.PureComponent),ae=o("Ijvb"),re=o("PC8g"),se=o("4o++"),function(e){e.Screenshot="drawing-toolbar-screenshot",e.FavoriteDrawings="drawing-toolbar-favorite-drawings",e.ObjectTree="drawing-toolbar-object-tree"}(le||(le={})),ce=o("8d0Q"),ue=o("XAms"),de=o("7RN7"),pe=o("X0gx"),he=o("VNzU"),me=function(e){function t(t){var o=e.call(this,t)||this;return o._syncVisibleState=function(){o.setState({isVisible:o._isMultipleLayout()})},o.state={isVisible:o._isMultipleLayout()},o}return Object(l.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.layout.subscribe(this._syncVisibleState)},t.prototype.componentWillUnmount=function(){this.props.layout.unsubscribe(this._syncVisibleState)},t.prototype.render=function(){return this.state.isVisible?this.props.children:c.createElement("div",null)},t.prototype._isMultipleLayout=function(){return Object(he.isMultipleLayout)(this.props.layout.value())},t}(c.PureComponent),be=o("nPPD"),ge=o("EKk7"),ve=o("ybOa"),fe=Object(be.a)(ge.a,ve),_e={hide:window.t("Hide Drawings Toolbar"),show:window.t("Show Drawings Toolbar")},ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._toggleVisibility=function(){S.isDrawingToolbarVisible.setValue(!S.isDrawingToolbarVisible.value())},t}return Object(l.__extends)(t,e),t.prototype.render=function(){var e=this.props.toolbarVisible;return c.createElement("div",{className:h(fe.toggleButton,"apply-common-tooltip common-tooltip-vertical",!e&&fe.collapsed),onClick:this._toggleVisibility,title:e?_e.hide:_e.show},c.createElement(ge.b,{direction:e?"left":"right",theme:e?void 0:fe}))},t}(c.PureComponent),we=o("JQKp"),Te={weakMagnet:window.t("Weak Magnet"),strongMagnet:window.t("Strong Magnet")},Ce=Object(w.onWidget)(),ke=new y.a,Oe=function(e){function t(t){var o=e.call(this,t)||this;return o._grayedTools={},o._handleMouseOver=function(e){Object(ce.a)(e)&&o.setState({isHovered:!0})},o._handleMouseOut=function(e){Object(ce.a)(e)&&o.setState({isHovered:!1})},o._handleChangeVisibility=function(e){o.setState({isVisible:e})},o._handleEsc=function(){g.resetToCursor(!0)},o._updateMagnetEnabled=function(){var e={
magnet:Object(v.a)().value()};o.setState(e)},o._updateMagnetMode=function(){var e={magnetMode:Object(v.b)().value()};o.setState(e)},g.init(),o._toolsFilter=new C(o.props.drawingsAccess),o._filteredLineTools=E.map(function(e){return{id:e.id,title:e.title,items:e.items.filter(function(e){return o._toolsFilter.isToolEnabled(T.a[e.name].localizedName)})}}).filter(function(e){return 0!==e.items.length}),o._filteredLineTools.forEach(function(e){return e.items.forEach(function(e){o._grayedTools[e.name]=o._toolsFilter.isToolGrayed(T.a[e.name].localizedName)})}),o.state={isHovered:!1,isVisible:S.isDrawingToolbarVisible.value(),magnet:g.properties().childs().magnet.value(),magnetMode:g.properties().childs().magnetMode.value()},o._features={favoriting:!Ce&&b.enabled("items_favoriting"),multicharts:b.enabled("support_multicharts"),tools:!Ce||b.enabled("charting_library_base")},o._negotiateResizer(),o}return Object(l.__extends)(t,e),t.prototype.getChildContext=function(){return{chartWidgetCollection:this.props.chartWidgetCollection}},t.prototype.componentDidMount=function(){S.isDrawingToolbarVisible.subscribe(this._handleChangeVisibility),j.a.subscribe(this,this._handleGlobalClose),Object(v.a)().subscribe(this._updateMagnetEnabled),Object(v.b)().subscribe(this._updateMagnetMode),this._tool=g.tool.spawn(),this._tool.subscribe(this._updateHotkeys.bind(this)),this._initHotkeys()},t.prototype.componentWillUnmount=function(){S.isDrawingToolbarVisible.unsubscribe(this._handleChangeVisibility),j.a.unsubscribe(this,this._handleGlobalClose),Object(v.a)().unsubscribe(this._updateMagnetEnabled),Object(v.b)().unsubscribe(this._updateMagnetMode),this._tool.destroy(),this._hotkeys.destroy()},t.prototype.componentDidUpdate=function(e,t){var o=this.state.isVisible;o!==t.isVisible&&(f.emit("toggle_sidebar",!o),m.setValue("ChartDrawingToolbarWidget.visible",o),this._negotiateResizer())},t.prototype.render=function(){var e,t,o=this,n=this.props,l=n.bgColor,u=n.chartWidgetCollection,d=n.readOnly,p=this.state,m=p.isHovered,b=p.isVisible,v=p.magnet,f=p.magnetMode,_={backgroundColor:l&&"#"+l};return t=c.createElement(ye,{toolbarVisible:b}),c.createElement(pe.a.Provider,{value:ke},c.createElement("div",{className:h(we.drawingToolbar,(e={},e[we.isHidden]=!b,e)),style:_,onClick:this.props.onClick,onContextMenu:ue.b},c.createElement(L.a,{onScroll:this._handleGlobalClose,isVisibleFade:Modernizr.mobiletouch,isVisibleButtons:!Modernizr.mobiletouch&&m,isVisibleScrollbar:!1,onMouseOver:this._handleMouseOver,onMouseOut:this._handleMouseOut},c.createElement("div",{className:we.inner},!d&&c.createElement("div",{className:we.group,style:_},this._filteredLineTools.map(function(e,t){return c.createElement(Z,{"data-name":e.id,chartWidgetCollection:u,favoriting:o._features.favoriting,grayedTools:o._grayedTools,key:t,dropdownTooltip:e.title,lineTools:e.items})}),this._toolsFilter.isToolEnabled("Font Icons")&&c.createElement(H,{"data-name":"linetool-group-font-icons",isGrayed:this._grayedTools["Font Icons"],toolName:"LineToolIcon"})),!d&&c.createElement("div",{
className:we.group,style:_},c.createElement(Q,{toolName:"measure"}),c.createElement(Q,{toolName:"zoom"}),c.createElement(q,{chartWidgetCollection:u})),!d&&c.createElement("div",{className:we.group,style:_},c.createElement(R,{"data-name":"magnet-button",buttonIcon:f===se.MagnetMode.StrongMagnet?ae.a.strongMagnet:ae.a.magnet,buttonTitle:T.a.magnet.localizedName,isActive:v,onClickButton:a,buttonHotKey:T.a.magnet.hotKey,checkable:!0},c.createElement(J.b,{key:"weakMagnet","data-name":"weakMagnet",icon:ae.a.magnet,isActive:v&&f!==se.MagnetMode.StrongMagnet,label:Te.weakMagnet,onClick:r}),c.createElement(J.b,{key:"strongMagnet","data-name":"strongMagnet",icon:ae.a.strongMagnet,isActive:v&&f===se.MagnetMode.StrongMagnet,label:Te.strongMagnet,onClick:s})),this._features.tools&&c.createElement(K,{property:g.properties().childs().stayInDrawingMode,saveDefaultOnChange:!0,toolName:"drawginmode"}),this._features.tools&&c.createElement(K,{property:g.lockDrawings(),toolName:"lockAllDrawings"}),this._features.tools&&c.createElement(K,{property:g.hideAllDrawings(),toolName:"hideAllDrawings"}),this._features.tools&&this._features.multicharts&&c.createElement(me,{layout:u.layout},c.createElement(K,{property:g.drawOnAllCharts(),saveDefaultOnChange:!0,toolName:"SyncDrawing"}))),!d&&this._features.tools&&c.createElement("div",{className:we.group,style:_},c.createElement(ee,{chartWidgetCollection:u,toolName:"removeAllDrawingTools"})),c.createElement("div",{className:we.fill,style:_}),!d&&(this._features.tools||!1)&&c.createElement("div",{className:h(we.group,we.lastGroup),style:_},!1,this._features.tools&&this._features.favoriting&&c.createElement(ie,{id:le.FavoriteDrawings}),this._features.tools&&c.createElement(i,{id:le.ObjectTree,action:function(){return o._activeChartWidget().showObjectsTreeDialog()},toolName:"showObjectsTree"})))),t))},t.prototype._activeChartWidget=function(){return this.props.chartWidgetCollection.activeChartWidget.value()},t.prototype._negotiateResizer=function(){var e=de.a;this.props.resizerBridge.negotiateWidth(this.state.isVisible?de.b:e)},t.prototype._handleGlobalClose=function(){ke.fire()},t.prototype._updateHotkeys=function(){this._hotkeys.promote()},t.prototype._initHotkeys=function(){var e=this;this._hotkeys=M.createGroup({desc:"Drawing Toolbar"}),this._hotkeys.add({desc:"Reset",hotkey:27,handler:function(){return e._handleEsc()},isDisabled:function(){return g.toolIsCursor(g.tool.value())}})},t.childContextTypes={chartWidgetCollection:p.any.isRequired},t}(c.PureComponent),o.d(t,"DrawingToolbarRenderer",function(){return Ee}),Ee=function(){function e(e,t){var o=this;this._component=null,this._handleRef=function(e){o._component=e},this._container=e,u.render(c.createElement(Oe,Object(l.__assign)({},t,{ref:this._handleRef})),this._container)}return e.prototype.destroy=function(){u.unmountComponentAtNode(this._container)},e.prototype.getComponent=function(){return Object(d.ensureNotNull)(this._component)},e}()},"85c9":function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="19" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.103.687a1 1 0 0 1 1.794 0l2.374 4.81 5.309.772a1 1 0 0 1 .554 1.706l-3.841 3.745.906 5.287a1 1 0 0 1-1.45 1.054L10 15.565 5.252 18.06A1 1 0 0 1 3.8 17.007l.907-5.287L.866 7.975a1 1 0 0 1 .554-1.706l5.31-.771L9.102.688zM10 1.13L7.393 6.412l-5.829.847 4.218 4.111-.996 5.806L10 14.436l5.214 2.74-.996-5.805 4.218-4.112-5.83-.847L10 1.13z"/></svg>'},"9dlw":function(e,t,o){"use strict";function n(e){var t=e.controller,o=e.children,n=e.isOpened,s=e.closeOnClickOutside,c=void 0===s||s,m=e.doNotCloseOn,b=e.onClickOutside,g=e.onClose,v=Object(i.__rest)(e,["controller","children","isOpened","closeOnClickOutside","doNotCloseOn","onClickOutside","onClose"]),f=Object(a.useContext)(p.a),_=Object(h.a)({handler:function(e){if(b&&b(e),c){if(m&&e.target instanceof Node){var t=l.a.findDOMNode(m);if(t instanceof Node&&t.contains(e.target))return}g()}},mouseDown:!0,touchStart:!0});return n?r.a.createElement(u.a,{top:"0",left:"0",right:"0",bottom:"0",pointerEvents:"none"},r.a.createElement("span",{ref:_,style:{pointerEvents:"auto"}},r.a.createElement(d.a,Object(i.__assign)({},v,{isOpened:n,onClose:g,onScroll:function(t){var o=e.onScroll;o&&o(t),t.stopPropagation()},customCloseDelegate:f,ref:t}),o))):null}var i,a,r,s,l,c,u,d,p,h;o.d(t,"a",function(){return n}),i=o("mrSG"),a=o("q1tI"),r=o.n(a),s=o("i8i4"),l=o.n(s),c=o("bf9a"),u=o("AiMB"),d=o("DTHj"),p=o("X0gx"),h=o("8Rai")},AiMB:function(e,t,o){"use strict";var n,i,a,r,s,l,c,u;o.d(t,"a",function(){return c}),o.d(t,"b",function(){return u}),n=o("mrSG"),i=o("q1tI"),a=o("i8i4"),r=o("0waE"),s=o("jAh7"),l=o("+EG+"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._uuid=Object(r.guid)(),t}return Object(n.__extends)(t,e),t.prototype.componentWillUnmount=function(){this._manager().removeWindow(this._uuid)},t.prototype.render=function(){var e=this._manager().ensureWindow(this._uuid);return e.style.top=this.props.top||"",e.style.bottom=this.props.bottom||"",e.style.left=this.props.left||"",e.style.right=this.props.top||"",e.style.pointerEvents=this.props.pointerEvents||null,a.createPortal(i.createElement(u.Provider,{value:this},this.props.children),e)},t.prototype.moveToTop=function(){this._manager().moveToTop(this._uuid)},t.prototype._manager=function(){return null===this.context?Object(s.getRootOverlapManager)():this.context},t.contextType=l.b,t}(i.PureComponent),u=i.createContext(null)},EA32:function(e,t,o){e.exports={wrap:"wrap-2I6DAtXG",buttonIcon:"buttonIcon-2rBwJ1QM",item:"item-31XunD5q",hovered:"hovered-2A1Cpat5",button:"button-21ihqWJ8"}},GWvR:function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M9.901 9.639c-.102-.797.218-1.775.77-2.356l1.438-1.527-2.07-.395c-.784-.142-1.615-.742-2.008-1.446L7.003 2.06 5.97 3.917c-.391.702-1.222 1.301-2 1.443l-2.08.396 1.44 1.526c.547.577.866 1.549.77 2.353l-.262 2.086 1.93-.897a2.95 2.95 0 0 1 1.233-.254c.44 0 .87.085 1.233.254l1.93.897-.263-2.082zm.992-.127l.458 3.624c.014.105-.006.16-.02.176-.028.03-.109.005-.182-.03L7.812 11.73a1.973 1.973 0 0 0-.811-.16c-.302 0-.59.057-.81.16l-3.338 1.552c-.118.056-.164.051-.182.03-.014-.016-.034-.07-.02-.178L3.11 9.51c.06-.503-.162-1.18-.505-1.54L.087 5.302c-.085-.091-.09-.148-.086-.158.003-.01.04-.053.16-.077l3.621-.689c.491-.09 1.069-.506 1.315-.948L7.004 0l1.902 3.43c.246.442.824.859 1.312.947l3.617.69c.123.024.162.068.164.077.003.01-.003.066-.089.157L11.4 7.97c-.348.367-.57 1.045-.506 1.543z"/></svg>'},HHbT:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path d="M10.893 9.512l.458 3.624c.014.105-.006.16-.02.176-.028.03-.109.005-.182-.03L7.812 11.73a1.973 1.973 0 0 0-.811-.16c-.302 0-.59.057-.81.16l-3.338 1.552c-.118.056-.164.051-.182.03-.014-.016-.034-.07-.02-.178L3.11 9.51c.06-.503-.162-1.18-.505-1.54L.087 5.302c-.085-.091-.09-.148-.086-.158.003-.01.04-.053.16-.077l3.621-.689c.491-.09 1.069-.506 1.315-.948L7.004 0l1.902 3.43c.246.442.824.859 1.312.947l3.617.69c.123.024.162.068.164.077.003.01-.003.066-.089.157L11.4 7.97c-.348.367-.57 1.045-.506 1.543z"/></svg>'},JQKp:function(e,t,o){e.exports={drawingToolbar:"drawingToolbar-U3_QXRof",isHidden:"isHidden-2d-PYkzV",inner:"inner-1xuW-gY4",group:"group-2JyOhh7Z",noGroupPadding:"noGroupPadding-1TTjVKWk",lastGroup:"lastGroup-O75UB5Xa",fill:"fill-1djIbBXv",separator:"separator-1BAqp1-l"}},KKsp:function(e,t,o){"use strict";function n(e){return i.createElement("div",{className:a.separator})}var i,a;o.d(t,"a",function(){return n}),i=o("q1tI"),a=o("NOPy")},KmEK:function(e,t,o){e.exports={dropdown:"dropdown-3_ASLzSj",buttonWrap:"buttonWrap-3fZWypJl",control:"control-1TyEfSIx",arrow:"arrow-1cFKS5Ok",arrowIcon:"arrowIcon-2wA7q8om",isOpened:"isOpened-22vLOY9o",hover:"hover-2eKqN_v0",isGrayed:"isGrayed-xr-mULNo"}},N5tr:function(e,t,o){"use strict";function n(e){var t=e.reference,o=Object(r.__rest)(e,["reference"]),n=Object(r.__assign)(Object(r.__assign)({},o),{ref:t});return l.a.createElement(e.href?"a":"div",n)}function i(e){e.stopPropagation()}function a(e){var t,o,a,m=e.className,b=e.title,g=e.labelRowClassName,v=e.shortcut,f=e.forceShowShortcuts,_=e.icon,y=e.isActive,w=e.isDisabled,T=e.isHovered,C=e.appearAsDisabled,k=e.label,O=e.link,E=e.showToolboxOnHover,S=e.target,L=e.toolbox,M=e.reference,j=e.onMouseOut,A=e.onMouseOver,D=e.theme,N=void 0===D?h:D,P=Object(p.a)(e),x=Object(s.useRef)(null);return l.a.createElement(n,Object(r.__assign)({},P,{className:c(m,N.item,_&&N.withIcon,(t={},t[N.isActive]=y,t[N.isDisabled]=w||C,t[N.hovered]=T,t)),title:b,href:O,target:S,reference:function(e){x.current=e,M&&M(e)},onClick:function(t){
var o=e.dontClosePopup,n=e.onClick,i=e.onClickArg,a=e.trackEventObject;w||(a&&Object(d.trackEvent)(a.category,a.event,a.label),n&&n(i,t),o||Object(u.b)())},onContextMenu:function(t){var o=e.trackEventObject,n=e.trackRightClick;o&&n&&Object(d.trackEvent)(o.category,o.event,o.label+"_rightClick")},onMouseUp:function(t){var o,n=e.trackEventObject,i=e.trackMouseWheelClick;1===t.button&&O&&n&&(o=n.label,i&&(o+="_mouseWheelClick"),Object(d.trackEvent)(n.category,n.event,o))},onMouseOver:A,onMouseOut:j}),void 0!==_&&l.a.createElement("div",{className:N.icon,dangerouslySetInnerHTML:{__html:_}}),l.a.createElement("div",{className:c(N.labelRow,g)},l.a.createElement("div",{className:N.label},k)),(void 0!==v||f)&&l.a.createElement("div",{className:N.shortcut},(a=v)&&a.split("+").join(" + ")),void 0!==L&&l.a.createElement("div",{onClick:i,className:c(N.toolbox,(o={},o[N.showOnHover]=E,o))},L))}var r,s,l,c,u,d,p,h,m;o.d(t,"a",function(){return m}),o.d(t,"b",function(){return a}),r=o("mrSG"),s=o("q1tI"),l=o.n(s),c=o("TSYQ"),u=o("tWVy"),d=o("PC8g"),p=o("QpNh"),h=o("v1bN"),m=h},NOPy:function(e,t,o){e.exports={separator:"separator-25lkUpN-"}},QpNh:function(e,t,o){"use strict";function n(e){var t,o,n,a,r,s=Object.entries(e).filter(i),l={};for(t=0,o=s;t<o.length;t++)a=(n=o[t])[0],r=n[1],l[a]=r;return l}function i(e){var t=e[0],o=e[1];return 0===t.indexOf("data-")&&"string"==typeof o}o.d(t,"a",function(){return n})},X0gx:function(e,t,o){"use strict";var n,i,a,r;o.d(t,"a",function(){return r}),n=o("q1tI"),i=o.n(n),a=o("tWVy"),r=i.a.createContext(a.a)},fEjm:function(e,t,o){e.exports={star:"star-uhAI7sV4",checked:"checked-2bhy04CF"}},gb5g:function(e,t,o){e.exports={button:"button-263WXsg-",hover:"hover-6KHfIHhL",bg:"bg-1kRv1Pf2",icon:"icon-1Y-3MM9F",isActive:"isActive-2mI1-NUL",isTransparent:"isTransparent-sRmateFl",isGrayed:"isGrayed-1kWObWVr",isHidden:"isHidden-2VzaskeU"}},hn2c:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 16" width="10" height="16"><path d="M.6 1.4l1.4-1.4 8 8-8 8-1.4-1.4 6.389-6.532-6.389-6.668z"/></svg>'},nPPD:function(e,t,o){"use strict";function n(e,t,o){var n,i,a,r,s;for(void 0===o&&(o={}),n=Object.assign({},t),i=0,a=Object.keys(t);i<a.length;i++)(s=o[r=a[i]]||r)in e&&(n[r]=[e[s],t[r]].join(" "));return n}function i(e,t,o){return void 0===o&&(o={}),Object.assign({},e,n(e,t,o))}o.d(t,"b",function(){return n}),o.d(t,"a",function(){return i})},pr86:function(e,t,o){"use strict";var n,i,a,r,s,l,c,u;o.d(t,"a",function(){return u}),n=o("mrSG"),o("YFKU"),i=o("q1tI"),a=o("TSYQ"),r=o("fEjm"),s=o("HHbT"),l=o("GWvR"),c={add:window.t("Add to favorites"),remove:window.t("Remove from favorites")},u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._handleClick=function(e){var o=t.props,n=o.onClick,i=o.onClickArg;n&&n(i,e)},t}return Object(n.__extends)(t,e),t.prototype.render=function(){var e,t=this.props.isFilled;return i.createElement("span",{className:a(r.star,"apply-common-tooltip",(e={},e[r.checked]=t,e)),dangerouslySetInnerHTML:{__html:t?s:l},
onClick:this._handleClick,title:t?c.remove:c.add})},t}(i.PureComponent)},v1bN:function(e,t,o){e.exports={item:"item-2xPVYue0",hovered:"hovered-1uf45E05",isDisabled:"isDisabled-1wLqKupj",isActive:"isActive-2j-GhQs_",shortcut:"shortcut-30pveiCO",toolbox:"toolbox-3ulPxfe-",withIcon:"withIcon-1xBjf-oB",icon:"icon-2Qm7YIcz",labelRow:"labelRow-3Q0rdE8-",label:"label-3Xqxy756",showOnHover:"showOnHover-1q6ySzZc"}},ybOa:function(e,t,o){e.exports={toggleButton:"toggleButton-3TAD9tll",collapsed:"collapsed-2PwwPYYB",background:"background-1bSnR2Ey",arrow:"arrow-liYbPQ3o"}}}]);